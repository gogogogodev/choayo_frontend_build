import{f as N,r as n,k as e,d as k,ag as E,n as B,q as R,v as y,i7 as z,g as V,t as I,c6 as H,F as A,dj as L,c8 as _,aF as S,ay as O,bZ as G,o as K,S as W,I as q,cP as Q,cD as Z,m as $,cQ as J,cd as U,cc as T,aw as X,az as Y,H as ee,C as te,aE as ae}from"./index-DtP58muJ.js";import{C as se}from"./custom-breadcrumbs-C-JLSHAz.js";import{C as ne}from"./errors-wZ747Yys.js";import{F as oe}from"./form-caption-DmEucZqR.js";import{B as re,a as ie,b as le}from"./functions-j1U0TWoc.js";import{T as ce}from"./table-pagination-custom-DoMFqUCQ.js";import{a as de,b as F,c as ue,T as me}from"./TableRow-BeGZSEnl.js";import{T as P}from"./TableCell-BYy3h6md.js";import{C as he}from"./Card-DhhypByC.js";import"./TablePagination-DcwzPYld.js";import"./LastPage-CTPAXkYQ.js";import"./FormControlLabel-aYt4PlDo.js";const M=n.createContext(void 0),b=()=>{const a=n.useContext(M);if(a===void 0)throw new Error("useContextSearch must be used within a PageContext.Provider");return a},xe=({children:a})=>{const t=N(),[s,l]=n.useState(0),o=()=>l(u=>u+1),[r,c]=n.useState(""),d=u=>{c(u)},[i,w]=n.useState(null),C=u=>{w(u)},[x,g]=n.useState(0),p=u=>{g(u)},[f,h]=n.useState(0),j=u=>{h(u)},m=n.useMemo(()=>({isDialogFormOpen:t,refreshFlag:s,triggerRefresh:o,keyword:r,updateKeyword:d,brandFormValues:i,updateBrandFormValues:C,page:x,updatePage:p,rowsPerPage:f,updateRowsPerPage:j}),[t,s,r,x,f]);return e.jsx(M.Provider,{value:m,children:a})};function ge(){const{checkAbilities:a}=k(),{isDialogFormOpen:t}=b();return e.jsx(se,{heading:"Brand",links:[{name:"Master",href:"#"},{name:"Brand",href:"#"}],action:a?.("brand:create")&&e.jsx(E,{size:"medium",variant:"contained",onClick:t.onTrue,startIcon:e.jsx(B,{icon:"mingcute:add-line"}),children:"New Brand"}),sx:{mb:{xs:3,md:5}}})}const pe=R({id:y().nullable(),name:y().min(1,{message:"Name is required!"})}),v={id:null,name:""},fe=R({keyword:y()}),je={keyword:""};function be(){const{showSweetDialog:a}=z(),{isDialogFormOpen:t,brandFormValues:s,updateBrandFormValues:l,triggerRefresh:o}=b(),[r,c]=n.useState("New Brand"),d=V({resolver:I(pe),defaultValues:v}),{reset:i,handleSubmit:w,formState:{isSubmitting:C,isDirty:x}}=d;n.useEffect(()=>{s?(c("Edit Brand"),i({id:s.id,name:s.name})):c("New Brand")},[s]);const g=()=>{i(v),l(null),t.onFalse()},p=async f=>{await re(f).then(()=>{g(),o(),a({icon:"success",title:"Data saved successfully",description:"Saved successfully"})}).catch(h=>{h instanceof ne&&Object.keys(h.validationErrors).forEach(j=>{d.setError(j,{type:"manual",message:h.validationErrors[j][0]})})})};return e.jsx(H,{open:t.value,children:e.jsxs(A,{methods:d,onSubmit:w(p),children:[e.jsx(L,{children:r}),e.jsx(_,{sx:{overflow:"visible"},children:e.jsxs(S,{container:!0,spacing:3,children:[e.jsx(S,{xs:12,children:e.jsx(O,{name:"name",label:"Name",size:"medium"})}),e.jsx(S,{xs:12,children:e.jsx(oe,{caption:"Fill in the form above and correct it again correctly"})})]})}),e.jsxs(G,{children:[e.jsx(E,{onClick:g,variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(K,{size:"medium",type:"submit",disabled:!x,variant:"contained",loading:C,children:"Save"})]})]})})}function we(){const{keyword:a,updateKeyword:t}=b(),s=V({resolver:I(fe),defaultValues:je}),{watch:l,reset:o,handleSubmit:r}=s;n.useEffect(()=>{o({keyword:a})},[a,o]);const c=l();n.useEffect(()=>{const i=setTimeout(()=>{c.keyword===""&&t("")},300);return()=>clearTimeout(i)},[c.keyword,t]);const d=async i=>{t(i.keyword)};return e.jsx(W,{sx:{p:2.5},children:e.jsx(A,{methods:s,onSubmit:r(d),children:e.jsx(O,{size:"medium",name:"keyword",tooltipTitle:"press enter",placeholder:"Search brand...",InputProps:{startAdornment:e.jsx(q,{position:"start",children:e.jsx(B,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})})}function Ce(){const a=[{id:"no",label:"No",width:10},{id:"brand",label:"Brand",width:100},{id:"",width:10}];return e.jsx(de,{children:e.jsx(F,{children:a.map(t=>e.jsx(P,{align:t.align||"left",sortDirection:!1,sx:{width:t.width,minWidth:0},children:t.label},t.id))})})}function Be({no:a,row:t}){const s=Q(),{showConfirmDialog:l}=Z(),{checkAbilities:o,checkAbilitiesMultiple:r}=k(),{isDialogFormOpen:c,updateBrandFormValues:d,triggerRefresh:i}=b();return e.jsxs(F,{hover:!0,children:[e.jsx(P,{sx:{whiteSpace:"nowrap"},children:a}),e.jsx(P,{sx:{whiteSpace:"nowrap"},children:t.name}),e.jsxs(P,{sx:{whiteSpace:"nowrap"},align:"right",children:[r?.(["brand:delete","brand:edit"])&&e.jsx($,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(B,{icon:"eva:more-vertical-fill"})}),e.jsx(J,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(U,{children:[o?.("brand:delete")&&e.jsxs(T,{onClick:()=>{s.onClose(),l({title:"Delete Brand",description:"Anda yakin? Data akan dihapus permanent.",confirmBtnText:"Delete",onConfirm:async()=>{await ie(t.id),i()}})},sx:{color:"error.main"},children:[e.jsx(B,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),o?.("brand:edit")&&e.jsxs(T,{onClick:()=>{s.onClose(),c.onTrue(),d(t)},children:[e.jsx(B,{icon:"solar:pen-bold"}),"Edit"]})]})})]})]})}function D({text:a}){return e.jsx(F,{hover:!0,children:e.jsx(P,{sx:{whiteSpace:"nowrap"},align:"center",colSpan:4,children:a})})}function Pe({rows:a,status:t}){const{page:s,rowsPerPage:l}=b();return e.jsx(ue,{children:t=="loading"?e.jsx(D,{text:"loading .."}):a.length==0?e.jsx(D,{text:"data not found"}):a.map((o,r)=>e.jsx(Be,{row:o,no:(s-1)*l+r+1},o.id))})}function Se(){const{keyword:a,refreshFlag:t,updatePage:s,updateRowsPerPage:l}=b(),[o,r]=n.useState(0),[c,d]=n.useState(0),[i,w]=n.useState(15),[C,x]=n.useState([]),[g,p]=n.useState(!1),f=async()=>{p(!0);const m=await le({keyword:a,page:o+1});p(!1),x(m.data),d(m.total),r(m.current_page-1),s(m.current_page),l(i)};n.useEffect(()=>{f()},[a,t,o]);const h=(m,u)=>{r(u)},j=m=>{w(parseInt(m.target.value,10)),r(0)};return e.jsxs(he,{children:[e.jsx(we,{}),e.jsx(X,{sx:{position:"relative"},children:e.jsx(Y,{children:e.jsxs(me,{size:"medium",sx:{minWidth:0},children:[e.jsx(Ce,{}),e.jsx(Pe,{rows:C,status:g?"loading":"finish"})]})})}),e.jsx(ce,{dense:!1,page:o,count:c,rowsPerPage:i,rowsPerPageOptions:[15,25,100],onPageChange:h,onRowsPerPageChange:j})]})}const ye={title:`Master - Category - ${te.site.name}`};function Ne(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs("title",{children:[" ",ye.title]})}),e.jsx(ae,{maxWidth:"xl",children:e.jsxs(xe,{children:[e.jsx(ge,{}),e.jsx(Se,{}),e.jsx(be,{})]})})]})}export{Ne as default};
