import{k as e,aw as p,bK as v,S as t,l as y,m as u,n,aY as P,L as S,aI as f,ci as T,gf as O,as as C,r as j,aL as D,bI as h,ag as I,cP as R,R as b,dg as w,o as G,cQ as B,cd as E,cc as F,ca as A,gg as _,c9 as z,aC as N,aE as U,gh as H,p as k,gi as M,H as $,C as V}from"./index-DtP58muJ.js";import{u as W}from"./use-params-x5Ny5RF3.js";import"./tour-new-edit-form-C52vEgBq.js";import{u as K}from"./use-tabs-DL7_jNPR.js";import{M as Q}from"./markdown-3Pra4sDh.js";import{u as Y,L as q}from"./use-light-box-Bv15ZZ-0.js";import{P as J}from"./Pagination-B2KXFnq5.js";import{C as X}from"./Card-DhhypByC.js";import"./fields-bN1H1Pph.js";import"./Rating-B0W3HkR9.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-RL1oLYI7.js";import"./rhf-radio-group-BrOd8CM7.js";import"./RadioGroup-xNsl4cpV.js";import"./FormGroup-BxqFH-77.js";import"./FormControlLabel-aYt4PlDo.js";import"./country-select-BF8gb-bd.js";import"./rhf-switch-zGDsqso1.js";import"./rhf-checkbox-DPISWm_F.js";import"./rhf-upload-CRHijUQt.js";import"./upload-0XjiEobF.js";import"./index-B_ujsHii.js";import"./placeholder-DEa7_v4_.js";import"./format-number-Ds7vlrjD.js";import"./preview-multi-file-B2dYLG1I.js";import"./upload-avatar-DbqysOrl.js";import"./rhf-date-picker-CTkMAX-z.js";import"./DatePicker-C3EXuF80.js";import"./ListItem-B8SR2-3G.js";import"./MobileDateTimePicker-CzOngS04.js";import"./schema-helper-IMZGb521.js";import"./CardHeader-DrP1HthL.js";import"./html-to-markdown-B4uLyYvU.js";import"./LastPage-CTPAXkYQ.js";function Z({tour:r}){const a=r?.images.map(s=>({src:s}))||[],{selected:c,open:o,onOpen:i,onClose:x}=Y(a),l=e.jsxs(e.Fragment,{children:[e.jsxs(p,{gap:1,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},sx:{mb:{xs:3,md:5}},children:[e.jsx(v,{alt:a[0].src,src:a[0].src,ratio:"1/1",onClick:()=>i(a[0].src),sx:{borderRadius:2,cursor:"pointer",transition:s=>s.transitions.create("opacity"),"&:hover":{opacity:.8}}}),e.jsx(p,{gap:1,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",children:a.slice(1,5).map(s=>e.jsx(v,{alt:s.src,src:s.src,ratio:"1/1",onClick:()=>i(s.src),sx:{borderRadius:2,cursor:"pointer",transition:L=>L.transitions.create("opacity"),"&:hover":{opacity:.8}}},s.src))})]}),e.jsx(q,{index:c,slides:a,open:o,close:x})]}),g=e.jsxs(e.Fragment,{children:[e.jsxs(t,{direction:"row",sx:{mb:3},children:[e.jsx(y,{variant:"h4",sx:{flexGrow:1},children:r?.name}),e.jsx(u,{children:e.jsx(n,{icon:"solar:share-bold"})}),e.jsx(P,{defaultChecked:!0,color:"error",icon:e.jsx(n,{icon:"solar:heart-outline"}),checkedIcon:e.jsx(n,{icon:"solar:heart-bold"}),inputProps:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}})]}),e.jsxs(t,{spacing:3,direction:"row",flexWrap:"wrap",alignItems:"center",children:[e.jsxs(t,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(n,{icon:"eva:star-fill",sx:{color:"warning.main"}}),e.jsx(p,{component:"span",sx:{typography:"subtitle2"},children:r?.ratingNumber}),e.jsx(S,{sx:{color:"text.secondary"},children:"(234 reviews)"})]}),e.jsxs(t,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"body2"},children:[e.jsx(n,{icon:"mingcute:location-fill",sx:{color:"error.main"}}),r?.destination]}),e.jsxs(t,{direction:"row",alignItems:"center",spacing:.5,sx:{typography:"subtitle2"},children:[e.jsx(n,{icon:"solar:flag-bold",sx:{color:"info.main"}}),e.jsx(p,{component:"span",sx:{typography:"body2",color:"text.secondary"},children:"Guide by"}),r?.tourGuides.map(s=>s.name).join(", ")]})]})]}),m=e.jsx(p,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[{label:"Available",value:`${f(r?.available.startDate)} - ${f(r?.available.endDate)}`,icon:e.jsx(n,{icon:"solar:calendar-date-bold"})},{label:"Contact name",value:r?.tourGuides.map(s=>s.phoneNumber).join(", "),icon:e.jsx(n,{icon:"solar:user-rounded-bold"})},{label:"Durations",value:r?.durations,icon:e.jsx(n,{icon:"solar:clock-circle-bold"})},{label:"Contact phone",value:r?.tourGuides.map(s=>s.name).join(", "),icon:e.jsx(n,{icon:"solar:phone-bold"})}].map(s=>e.jsxs(t,{spacing:1.5,direction:"row",children:[s.icon,e.jsx(T,{primary:s.label,secondary:s.value,primaryTypographyProps:{mb:.5,typography:"body2",color:"text.secondary"},secondaryTypographyProps:{component:"span",color:"text.primary",typography:"subtitle2"}})]},s.label))}),d=e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:r?.content}),e.jsxs(t,{spacing:2,children:[e.jsx(y,{variant:"h6",children:" Services"}),e.jsx(p,{rowGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:O.map(s=>e.jsxs(t,{spacing:1,direction:"row",alignItems:"center",sx:{...r?.services.includes(s.label)&&{color:"text.disabled"}},children:[e.jsx(n,{icon:"eva:checkmark-circle-2-outline",sx:{color:"primary.main",...r?.services.includes(s.label)&&{color:"text.disabled"}}}),s.label]},s.label))})]})]});return e.jsxs(e.Fragment,{children:[l,e.jsxs(t,{sx:{maxWidth:720,mx:"auto"},children:[g,e.jsx(C,{sx:{borderStyle:"dashed",my:5}}),m,e.jsx(C,{sx:{borderStyle:"dashed",mt:5,mb:2}}),d]})]})}function ee({bookers:r}){const[a,c]=j.useState([]),o=j.useCallback(i=>{const x=a.includes(i)?a.filter(l=>l!==i):[...a,i];c(x)},[a]);return e.jsxs(e.Fragment,{children:[e.jsx(p,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:r?.map(i=>e.jsx(re,{booker:i,selected:a.includes(i.id),onSelected:()=>o(i.id)},i.id))}),e.jsx(J,{count:10,sx:{mt:{xs:5,md:8},mx:"auto"}})]})}function re({booker:r,selected:a,onSelected:c}){return e.jsxs(X,{sx:{p:3,gap:2,display:"flex"},children:[e.jsx(D,{alt:r.name,src:r.avatarUrl,sx:{width:48,height:48}}),e.jsxs(t,{spacing:2,flexGrow:1,children:[e.jsx(T,{primary:r.name,secondary:e.jsxs(t,{direction:"row",alignItems:"center",spacing:.5,children:[e.jsx(n,{icon:"solar:users-group-rounded-bold",width:16}),r.guests," guests"]}),secondaryTypographyProps:{mt:.5,component:"span",typography:"caption",color:"text.disabled"}}),e.jsxs(t,{spacing:1,direction:"row",children:[e.jsx(u,{size:"small",color:"error",sx:{borderRadius:1,bgcolor:o=>h(o.vars.palette.error.mainChannel,.08),"&:hover":{bgcolor:o=>h(o.vars.palette.error.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"solar:phone-bold"})}),e.jsx(u,{size:"small",color:"info",sx:{borderRadius:1,bgcolor:o=>h(o.vars.palette.info.mainChannel,.08),"&:hover":{bgcolor:o=>h(o.vars.palette.info.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"solar:chat-round-dots-bold"})}),e.jsx(u,{size:"small",color:"primary",sx:{borderRadius:1,bgcolor:o=>h(o.vars.palette.primary.mainChannel,.08),"&:hover":{bgcolor:o=>h(o.vars.palette.primary.mainChannel,.16)}},children:e.jsx(n,{width:18,icon:"fluent:mail-24-filled"})})]})]}),e.jsx(I,{size:"small",variant:a?"text":"outlined",color:a?"success":"inherit",startIcon:a?e.jsx(n,{width:18,icon:"eva:checkmark-fill",sx:{mr:-.75}}):null,onClick:c,children:a?"Approved":"Approve"})]},r.id)}function se({publish:r,backLink:a,editLink:c,liveLink:o,publishOptions:i,onChangePublish:x,sx:l,...g}){const m=R();return e.jsxs(e.Fragment,{children:[e.jsxs(t,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...l},...g,children:[e.jsx(I,{component:b,href:a,startIcon:e.jsx(n,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(p,{sx:{flexGrow:1}}),r==="published"&&e.jsx(w,{title:"Go Live",children:e.jsx(u,{component:b,href:o,children:e.jsx(n,{icon:"eva:external-link-fill"})})}),e.jsx(w,{title:"Edit",children:e.jsx(u,{component:b,href:c,children:e.jsx(n,{icon:"solar:pen-bold"})})}),e.jsx(G,{color:"inherit",variant:"contained",loading:!r,loadingIndicator:"Loadingâ€¦",endIcon:e.jsx(n,{icon:"eva:arrow-ios-downward-fill"}),onClick:m.onOpen,sx:{textTransform:"capitalize"},children:r})]}),e.jsx(B,{open:m.open,anchorEl:m.anchorEl,onClose:m.onClose,slotProps:{arrow:{placement:"top-right"}},children:e.jsx(E,{children:i.map(d=>e.jsxs(F,{selected:d.value===r,onClick:()=>{m.onClose(),x(d.value)},children:[d.value==="published"&&e.jsx(n,{icon:"eva:cloud-upload-fill"}),d.value==="draft"&&e.jsx(n,{icon:"solar:file-text-bold"}),d.label]},d.value))})})]})}function ae({tour:r}){const[a,c]=j.useState(r?.publish),o=K("content"),i=j.useCallback(l=>{c(l)},[]),x=e.jsx(A,{value:o.value,onChange:o.onChange,sx:{mb:{xs:3,md:5}},children:_.map(l=>e.jsx(z,{iconPosition:"end",value:l.value,label:l.label,icon:l.value==="bookers"?e.jsx(N,{variant:"filled",children:r?.bookers.length}):""},l.value))});return e.jsxs(U,{children:[e.jsx(se,{backLink:k.dashboard.tour.root,editLink:k.dashboard.tour.edit(`${r?.id}`),liveLink:"#",publish:a||"",onChangePublish:i,publishOptions:H}),x,o.value==="content"&&e.jsx(Z,{tour:r}),o.value==="bookers"&&e.jsx(ee,{bookers:r?.bookers})]})}const oe={title:`Tour details | Dashboard - ${V.site.name}`};function ze(){const{id:r=""}=W(),a=M.find(c=>c.id===r);return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsxs("title",{children:[" ",oe.title]})}),e.jsx(ae,{tour:a})]})}export{ze as default};
