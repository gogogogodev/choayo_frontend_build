import{c as P,r as v,g as T,t as S,q,dC as w,p as k,k as e,F as N,aF as g,aC as z,aw as u,l as r,aN as D,aX as R,S as f,ag as A,o as F,d_ as V,v as i,fI as E,c6 as _,dj as G,c8 as I,A as W,fQ as Z,cc as B,bZ as L}from"./index-DtP58muJ.js";import{a as O}from"./format-number-Ds7vlrjD.js";import{F as s}from"./fields-bN1H1Pph.js";import{s as m}from"./schema-helper-IMZGb521.js";import{C}from"./Card-DhhypByC.js";import{F as Q}from"./FormControlLabel-aYt4PlDo.js";const M=q({avatarUrl:m.file({message:{required_error:"Avatar is required!"}}),name:i().min(1,{message:"Name is required!"}),email:i().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValidPhoneNumber:E}),country:m.objectOrNull({message:{required_error:"Country is required!"}}),address:i().min(1,{message:"Address is required!"}),company:i().min(1,{message:"Company is required!"}),state:i().min(1,{message:"State is required!"}),city:i().min(1,{message:"City is required!"}),role:i().min(1,{message:"Role is required!"}),zipCode:i().min(1,{message:"Zip code is required!"}),status:i(),isVerified:V()});function ee({currentUser:a}){const p=P(),l=v.useMemo(()=>({status:a?.status||"",avatarUrl:a?.avatarUrl||null,isVerified:a?.isVerified||!0,name:a?.name||"",email:a?.email||"",phoneNumber:a?.phoneNumber||"",country:a?.country||"",state:a?.state||"",city:a?.city||"",address:a?.address||"",zipCode:a?.zipCode||"",company:a?.company||"",role:a?.role||""}),[a]),d=T({mode:"onSubmit",resolver:S(M),defaultValues:l}),{reset:c,watch:h,control:b,handleSubmit:j,formState:{isSubmitting:y}}=d,t=h(),x=j(async o=>{try{await new Promise(n=>setTimeout(n,500)),c(),w.success(a?"Update success!":"Create success!"),p.push(k.dashboard.user.list),console.info("DATA",o)}catch(n){console.error(n)}});return e.jsx(N,{methods:d,onSubmit:x,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:12,md:4,children:e.jsxs(C,{sx:{pt:10,pb:5,px:3},children:[a&&e.jsx(z,{color:t.status==="active"&&"success"||t.status==="banned"&&"error"||"warning",sx:{position:"absolute",top:24,right:24},children:t.status}),e.jsx(u,{sx:{mb:5},children:e.jsx(s.UploadAvatar,{name:"avatarUrl",maxSize:3145728,helperText:e.jsxs(r,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",e.jsx("br",{})," max size of ",O(3145728)]})})}),a&&e.jsx(Q,{labelPlacement:"start",control:e.jsx(D,{name:"status",control:b,render:({field:o})=>e.jsx(R,{...o,checked:o.value!=="active",onChange:n=>o.onChange(n.target.checked?"banned":"active")})}),label:e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"subtitle2",sx:{mb:.5},children:"Banned"}),e.jsx(r,{variant:"body2",sx:{color:"text.secondary"},children:"Apply disable account"})]}),sx:{mx:0,mb:3,width:1,justifyContent:"space-between"}}),e.jsx(s.Switch,{name:"isVerified",labelPlacement:"start",label:e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"subtitle2",sx:{mb:.5},children:"Email verified"}),e.jsx(r,{variant:"body2",sx:{color:"text.secondary"},children:"Disabling this will automatically send the user a verification email"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}}),a&&e.jsx(f,{justifyContent:"center",alignItems:"center",sx:{mt:3},children:e.jsx(A,{variant:"soft",color:"error",children:"Delete user"})})]})}),e.jsx(g,{xs:12,md:8,children:e.jsxs(C,{sx:{p:3},children:[e.jsxs(u,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(s.Text,{name:"name",label:"Full name"}),e.jsx(s.Text,{name:"email",label:"Email address"}),e.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"}),e.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(s.Text,{name:"state",label:"State/region"}),e.jsx(s.Text,{name:"city",label:"City"}),e.jsx(s.Text,{name:"address",label:"Address"}),e.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(s.Text,{name:"company",label:"Company"}),e.jsx(s.Text,{name:"role",label:"Role"})]}),e.jsx(f,{alignItems:"flex-end",sx:{mt:3},children:e.jsx(F,{type:"submit",variant:"contained",loading:y,children:a?"Save changes":"Create user"})})]})})]})})}const H=q({name:i().min(1,{message:"Name is required!"}),email:i().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:m.phoneNumber({isValidPhoneNumber:E}),country:m.objectOrNull({message:{required_error:"Country is required!"}}),state:i().min(1,{message:"State is required!"}),city:i().min(1,{message:"City is required!"}),address:i().min(1,{message:"Address is required!"}),zipCode:i().min(1,{message:"Zip code is required!"}),company:i().min(1,{message:"Company is required!"}),role:i().min(1,{message:"Role is required!"}),status:i()});function ae({currentUser:a,open:p,onClose:l}){const d=v.useMemo(()=>({name:a?.name||"",email:a?.email||"",phoneNumber:a?.phoneNumber||"",address:a?.address||"",country:a?.country||"",state:a?.state||"",city:a?.city||"",zipCode:a?.zipCode||"",status:a?.status,company:a?.company||"",role:a?.role||""}),[a]),c=T({mode:"all",resolver:S(H),defaultValues:d}),{reset:h,handleSubmit:b,formState:{isSubmitting:j}}=c,y=b(async t=>{const x=new Promise(o=>setTimeout(o,1e3));try{h(),l(),w.promise(x,{loading:"Loading...",success:"Update success!",error:"Update error!"}),await x,console.info("DATA",t)}catch(o){console.error(o)}});return e.jsx(_,{fullWidth:!0,maxWidth:!1,open:p,onClose:l,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(N,{methods:c,onSubmit:y,children:[e.jsx(G,{children:"Quick Update"}),e.jsxs(I,{children:[e.jsx(W,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(u,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(s.Select,{name:"status",label:"Status",children:Z.map(t=>e.jsx(B,{value:t.value,children:t.label},t.value))}),e.jsx(u,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(s.Text,{name:"name",label:"Full name"}),e.jsx(s.Text,{name:"email",label:"Email address"}),e.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"}),e.jsx(s.CountrySelect,{fullWidth:!0,name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(s.Text,{name:"state",label:"State/region"}),e.jsx(s.Text,{name:"city",label:"City"}),e.jsx(s.Text,{name:"address",label:"Address"}),e.jsx(s.Text,{name:"zipCode",label:"Zip/code"}),e.jsx(s.Text,{name:"company",label:"Company"}),e.jsx(s.Text,{name:"role",label:"Role"})]})]}),e.jsxs(L,{children:[e.jsx(A,{variant:"outlined",onClick:l,children:"Cancel"}),e.jsx(F,{type:"submit",variant:"contained",loading:j,children:"Update"})]})]})})}export{ae as U,ee as a};
