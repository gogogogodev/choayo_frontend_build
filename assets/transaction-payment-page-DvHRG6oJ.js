import{f as E,r as o,k as e,d as we,ia as le,ag as M,n as k,fC as se,q as G,iu as w,v,d_ as Pe,cC as Se,d$ as ve,i7 as Ie,g as de,t as ce,c6 as Q,F as me,dj as ue,c8 as pe,aw as B,C as A,aF as g,iv as N,l as I,ay as q,bZ as he,o as X,dC as J,bH as U,az as ee,bK as Te,m as Ce,aI as Y,aZ as xe,iw as De,aY as Re,ix as Fe,S as ne,I as Oe,dg as ke,gN as Ye,cc as oe,c as Ee,p as Be,aC as He,iy as L,H as Me,aE as Ae}from"./index-DtP58muJ.js";import{C as Le}from"./custom-breadcrumbs-C-JLSHAz.js";import{f as D}from"./format-number-Ds7vlrjD.js";import{C as We}from"./errors-wZ747Yys.js";import{T as ge}from"./table-head-custom-CkAC_7gM.js";import{R as ze}from"./rhf-radio-group-BrOd8CM7.js";import{R as Ve}from"./rhf-switch-zGDsqso1.js";import{R as $e}from"./rhf-autocomplete-on-enter-DZm-8Fkx.js";import{C as Ne}from"./functions-BjzhM4yz.js";import{P as Ge,a as qe,b as Xe,c as re,d as Je}from"./functions-CH5u1xRj.js";import{P as Ze}from"./functions-nIKaVdf7.js";import{S as fe}from"./Skeleton-2yIQyMsS.js";import{T as te,c as ae,b as W,a as Ke}from"./TableRow-BeGZSEnl.js";import{a as Qe}from"./RadioGroup-xNsl4cpV.js";import{T as c}from"./TableCell-BYy3h6md.js";import{T as Ue}from"./table-selected-action-06aluIIx.js";import{T as je}from"./table-pagination-custom-DoMFqUCQ.js";import{T as $}from"./table-body-rowinfo-3iCgRhmq.js";import{R as ie}from"./rhf-date-picker-CTkMAX-z.js";import{B as et}from"./ButtonGroup-Bt9CCMsf.js";import{C as tt}from"./Card-DhhypByC.js";import"./FormControlLabel-aYt4PlDo.js";import"./FormGroup-BxqFH-77.js";import"./TablePagination-DcwzPYld.js";import"./LastPage-CTPAXkYQ.js";import"./DatePicker-C3EXuF80.js";import"./ListItem-B8SR2-3G.js";import"./MobileDateTimePicker-CzOngS04.js";import"./getValidReactChildren-BiSV1uXg.js";const ye=o.createContext(void 0),y=()=>{const a=o.useContext(ye);if(a===void 0)throw new Error("useContextPage must be used within a PageContext.Provider");return a},at=({children:a})=>{const t=E(),s=E(),[n,u]=o.useState(0),i=()=>u(j=>j+1),[p,d]=o.useState(null),h=j=>{d(j)},[_,T]=o.useState([]),P=j=>{T(j)},[m,R]=o.useState(null),S=j=>{R(j)},[l,H]=o.useState(0),b=j=>{H(j)},[x,C]=o.useState(0),F=j=>{C(j)},z=o.useMemo(()=>({isDialogPaymentFormOpen:t,isDialogPaymentImportOpen:s,refreshFlag:n,triggerRefresh:i,selectedOrderImport:_,updateSelectedOrderImport:P,selectedCustomer:p,updateSelectedCustomer:h,toolbarSearchValue:m,updateToolbarSearchValue:S,page:l,updatePage:b,rowsPerPage:x,updateRowsPerPage:F}),[t,s,_,p,n,m,l,x]);return e.jsx(ye.Provider,{value:z,children:a})};function st(){const{checkAbilities:a}=we(),{isDialogPaymentFormOpen:t}=y(),s=le(n=>n.activeStore);return e.jsx(Le,{heading:"Payment",links:[{name:"Transaction",href:"#"},{name:"Payment",href:"#"}],action:a?.("payment:create")&&e.jsx(M,{size:"medium",variant:"contained",disabled:s?.id==="",onClick:t.onTrue,startIcon:e.jsx(k,{icon:"mingcute:add-line"}),children:"New Payment"}),sx:{mb:{xs:3,md:5}}})}const nt=G({customer:G({id:v(),name:v()}),selected_order_id:ve(v()).min(1,{message:"No order has been imported!"}),type_payment:Se(Object.values(w),{message:"Invalid Payment Type"}),use_deposit:Pe(),deposit:v().optional(),max_deposit:v(),amount_paid:v(),amount_must_paid:v(),payment_method_id:v().min(1,{message:"Payment method is required!"})}).refine(a=>a.customer.id,{message:"Customer is required",path:["customer"]}).refine(a=>!a.use_deposit||a.use_deposit&&a.deposit?.trim()!=="",{message:"Deposit required",path:["deposit"]}).refine(a=>!a.use_deposit||!a.deposit?!0:parseFloat(a.deposit.replace(/,/g,""))<=parseFloat(a.max_deposit.replace(/,/g,"")),{message:"Deposit more than max",path:["deposit"]}),ot={customer:{id:"",name:""},selected_order:[],type_payment:w.full_payment,use_deposit:!1,deposit:"0",max_deposit:"0",amount_paid:"0",amount_must_paid:"0",payment_method_id:""},rt=G({keyword:v(),start_date:v(),end_date:v()}).refine(a=>!(a.end_date&&!a.start_date),{message:"Start date is required",path:["start_date"]}),it={keyword:"",start_date:`${se("YYYY-MM")}-01`,end_date:se("YYYY-MM-DD")};function lt(){const{showSweetDialog:a}=Ie(),{isDialogPaymentFormOpen:t,isDialogPaymentImportOpen:s,triggerRefresh:n,selectedOrderImport:u,updateSelectedOrderImport:i,selectedCustomer:p,updateSelectedCustomer:d}=y(),h=E(!0),[_,T]=o.useState(null),P=async()=>{h.onTrue(),await Ze().then(r=>{T(r)}).finally(()=>{h.onFalse()})};o.useEffect(()=>{t.value&&P()},[t.value]);const m=de({resolver:ce(nt),defaultValues:ot}),{reset:R,watch:S,setValue:l,getValues:H,handleSubmit:b,formState:{isSubmitting:x,isDirty:C,errors:F}}=m;o.useEffect(()=>{if(t.value&&u){const r=u?.reduce((f,O)=>f+Number(O.amount_to_paid),0);l("selected_order_id",u.map(f=>f.order_id)),l("amount_must_paid",String(r)),l("amount_paid",String(r))}},[t.value,u]),o.useEffect(()=>{S("type_payment")===w.full_payment?l("amount_paid",H("amount_must_paid")):S("type_payment")===w.partial_payment&&l("amount_paid","0")},[S("type_payment")]);const z=()=>{t.onFalse(),i([])},j=r=>{l("max_deposit",r.deposit?.after_amount??"0"),d(r),i([])},_e=async r=>{r.payment_method_id?.type==="too_small"?J.warning(r.payment_method_id?.message,{position:"top-center"}):r.selected_order_id?.type==="too_small"&&J.warning(r.selected_order_id?.message,{position:"top-center"})},be=async r=>{Ge(r),await qe().then(()=>{a({icon:"success",title:"Data saved successfully",description:"Saved successfully"}),n(),z()}).catch(f=>{f instanceof We&&Object.keys(f.validationErrors).forEach(O=>{m.setError(O,{type:"manual",message:f.validationErrors[O][0]})})})};return e.jsx(Q,{open:t.value&&!s.value,fullWidth:!0,maxWidth:"md",children:e.jsxs(me,{methods:m,onSubmit:b(be,_e),children:[e.jsx(ue,{children:"Payment"}),e.jsx(pe,{sx:{overflow:"visible"},children:e.jsx(B,{sx:{pt:1,overflowY:"auto",overflowX:"hidden",maxHeight:A.dialog.maxHeight},children:e.jsx(B,{minHeight:A.dialog.content.minHeight,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:10,children:e.jsx($e,{size:"medium",name:"customer",debounceSearch:!0,label:"Customer",onSelect:r=>j(r),isOptionEqualToValue:(r,f)=>r?.id===f?.id,getOptionLabel:r=>r?.name,fetchFunction:async r=>(await Ne({keyword:r,page:1})).data})}),e.jsx(g,{xs:2,children:e.jsx(M,{variant:"outlined",onClick:s.onTrue,disabled:m.watch("customer.id")=="",sx:{py:1.6,height:"100%",minWidth:"max-content"},children:"Import Order"})}),e.jsx(g,{xs:12,children:u.length>0&&e.jsx(ct,{})}),e.jsx(g,{xs:12,children:e.jsx(ze,{row:!0,label:"Type",name:"type_payment",sx:{px:.2},options:[{label:N(w.full_payment),value:w.full_payment},{label:N(w.partial_payment),value:w.partial_payment},{label:N(w.pay_on_delivery),value:w.pay_on_delivery}]})}),m.watch("type_payment")!==w.pay_on_delivery&&e.jsxs(e.Fragment,{children:[e.jsxs(g,{xs:12,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"end",children:[e.jsx(Ve,{name:"use_deposit",label:"",sx:{mr:0}}),e.jsx(I,{variant:"body2",sx:{color:"text.disabled"},children:`Deposit (Rp. ${D(p?.deposit?.after_amount??"0")})`})]}),m.watch("use_deposit")&&e.jsx(g,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(q,{size:"medium",name:"deposit",label:"Deposit",moneyFormat:!0,fullWidth:!0})}),e.jsx(g,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(q,{fullWidth:!0,moneyFormat:!0,size:"medium",name:"amount_paid",label:"Amount to be paid",disabled:m.watch("type_payment")===w.full_payment})}),e.jsx(g,{xs:12,children:e.jsx(I,{variant:"body2",sx:{color:"text.default"},children:"Payment Method"})}),h.value?Array.from({length:2}).map((r,f)=>e.jsx(g,{xs:12,children:e.jsx(fe,{variant:"rounded",sx:{width:"100%",height:60}})},f)):Object.entries(_??{}).map(([r,f])=>e.jsxs(g,{xs:12,sx:{px:1.6},children:[e.jsx(I,{gutterBottom:!0,variant:"body2",sx:{color:"text.disabled"},children:r}),f.map(O=>e.jsx(dt,{paymentMethod:O,selected:m.watch("payment_method_id")===O.id,onChecked:V=>l("payment_method_id",V.target.value,{shouldDirty:!0,shouldValidate:!0}),sx:{mb:2,border:V=>`solid 2px ${F.payment_method_id?V.vars.palette.error.main:V.vars.palette.background.neutral}`}},O.id))]},r))]})]})})})}),e.jsxs(he,{children:[e.jsx(M,{onClick:z,variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(X,{size:"medium",type:"submit",disabled:!C,variant:"contained",loading:x,children:"Process"})]})]})})}const dt=({selected:a,paymentMethod:t,onChecked:s,...n})=>e.jsxs(U,{variant:"outlined",sx:{py:2,px:1,display:"flex",alignItems:"center",...n.sx},children:[e.jsx(Qe,{checked:a,value:t.id,sx:{mr:1},onChange:s}),e.jsx(Te,{sx:{mr:2.5},width:"64px",src:t.image_url}),e.jsxs(B,{children:[e.jsx(I,{gutterBottom:!0,variant:"subtitle1",children:t.name}),e.jsx(I,{variant:"subtitle1",color:"text.disabled",children:"Biaya layanan (Rp. 0)"})]})]});function ct(){const{selectedOrderImport:a}=y();return e.jsx(B,{sx:{pt:1,overflowY:"auto",overflowX:"hidden",maxHeight:A.dialog.maxHeight},children:e.jsx(U,{variant:"outlined",sx:{position:"relative",overflow:"hidden"},children:e.jsx(ee,{children:e.jsxs(te,{size:"medium",sx:{minWidth:0},children:[e.jsx(ut,{}),e.jsx(pt,{listItem:a})]})})})})}const mt=[{id:"action",label:"",width:"1%"},{id:"order_id",label:"Order ID",width:100},{id:"order_date",label:"Order Date",width:100},{id:"amount",label:"Amount",width:100},{id:"paid",label:"Paid",width:100},{id:"balance",label:"Balance",width:100,align:"right"}];function ut(){return e.jsx(ge,{headLabel:mt})}function pt({listItem:a}){return e.jsxs(ae,{children:[a.map((t,s)=>e.jsx(ht,{item:t},s)),e.jsx(xt,{})]})}function ht({no:a,item:t}){const{selectedOrderImport:s,updateSelectedOrderImport:n}=y(),u=i=>{const p=s.filter(d=>d.order_id!==i);n(p)};return e.jsxs(W,{hover:!0,children:[e.jsx(c,{sx:{whiteSpace:"nowrap"},children:e.jsx(Ce,{onClick:()=>u(t.order_id),children:e.jsx(k,{icon:"solar:trash-bin-trash-bold",sx:{color:"error.main"}})})}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.order_no}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:Y(t.order_date,xe.dateTime)}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:D(t.amount_to_paid)}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:D(t.amount_be_paid)}),e.jsx(c,{sx:{whiteSpace:"nowrap"},align:"right",children:D(Number(t.amount_to_paid)-Number(t.amount_be_paid))})]})}function xt(){const{selectedOrderImport:a}=y();return e.jsxs(W,{hover:!0,children:[e.jsx(c,{sx:{whiteSpace:"nowrap"},colSpan:3,align:"right"}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:e.jsx(I,{component:"span",variant:"subtitle1",sx:{flexGrow:1},children:"Total"})}),e.jsx(c,{sx:{whiteSpace:"nowrap"},colSpan:2,children:e.jsxs(B,{sx:{textAlign:"right"},children:[e.jsx(I,{component:"span",variant:"subtitle1",sx:{display:"block",color:"error.main"},children:`Rp. ${D(a?.reduce((t,s)=>t+Number(s.amount_to_paid),0))}`}),e.jsx(I,{variant:"caption",children:"(VAT included if applicable)"})]})})]})}function gt(){const{isDialogPaymentImportOpen:a,selectedCustomer:t,selectedOrderImport:s}=y(),[n,u]=o.useState(0),[i,p]=o.useState(0),d=E(!0),[h,_]=o.useState(5),[T,P]=o.useState([]),[m,R]=o.useState([]),S=async()=>{d.onTrue(),await De(1e3),await Xe(t?.id??"").then(x=>{p(x.length),R(x),P(x.slice(0,h))}).finally(()=>{d.onFalse()})};o.useEffect(()=>{a.value&&t&&S()},[a.value,t]),o.useEffect(()=>{const x=n*h,C=x+h;P(m.slice(x,C))},[n,h,m]);const l=(x,C)=>{u(C)},H=x=>{_(parseInt(x.target.value,10)),u(0)},b=()=>{a.onFalse(),P([])};return e.jsxs(Q,{open:a.value,fullWidth:!0,maxWidth:"md",children:[e.jsx(ue,{children:`List Order - ${t?.name}`}),e.jsx(pe,{sx:{overflow:"visible"},children:e.jsx(B,{sx:{pt:1,overflowY:"auto",overflowX:"hidden",maxHeight:A.dialog.maxHeight},children:e.jsx(B,{minHeight:A.dialog.content.minHeight,children:d.value?e.jsx(fe,{variant:"rounded",height:200}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{sx:{position:"relative",overflow:"hidden"},children:[e.jsx(jt,{listItem:m}),e.jsx(ee,{children:e.jsxs(te,{size:"medium",sx:{minWidth:0},children:[e.jsx(ft,{listItem:m}),e.jsx(yt,{listItem:T,status:d.value?"loading":"finish"})]})})]}),e.jsx(je,{dense:!1,page:n,count:i,rowsPerPage:h,rowsPerPageOptions:[5],onPageChange:l,onRowsPerPageChange:H})]})})})}),e.jsx(he,{children:e.jsx(M,{onClick:b,variant:"contained",disabled:s.length===0,children:"Save"})})]})}const Z=[{id:"order_id",label:"Order ID",width:100},{id:"customer",label:"Customer",width:100},{id:"address",label:"Alamat",width:100},{id:"type_pickup",label:"Jenis",width:100},{id:"distance",label:"Jarak",width:100}];function ft({listItem:a}){const{selectedOrderImport:t,updateSelectedOrderImport:s}=y();return e.jsx(ge,{headLabel:Z,rowCount:a.length,numSelected:t.length,onSelectAllRows:n=>{s(n?a:[])}})}function jt({listItem:a}){const{selectedOrderImport:t,updateSelectedOrderImport:s}=y();return e.jsx(Ue,{rowCount:a.length,numSelected:t.length,onSelectAllRows:n=>{s(n?a:[])}})}function yt({listItem:a,status:t}){const{selectedOrderImport:s,updateSelectedOrderImport:n}=y(),u=i=>{if(s.some(d=>d.order_id===i)){const d=s.filter(h=>h.order_id!==i);n(d)}else{const d=a.find(h=>h.order_id===i);d&&n([...s,d])}};return e.jsx(ae,{children:t==="loading"?e.jsx($,{text:"loading ..",colspan:Z.length+1}):a.length===0?e.jsx($,{text:"data not found",colspan:Z.length+1}):a.map((i,p)=>e.jsx(_t,{item:i,onSelectRow:()=>u(i.order_id),selected:s.some(d=>d.order_id===i.order_id)},p))})}function _t({no:a,item:t,selected:s,onSelectRow:n}){return e.jsxs(W,{hover:!0,children:[e.jsx(c,{padding:"checkbox",children:e.jsx(Re,{checked:s,onClick:n,inputProps:{id:`row-checkbox-${t.order_id}`,"aria-label":"Row checkbox"}})}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.order_no}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.customer.name}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.pickup_address.text}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:Fe(t.pickup_type)}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.distance})]})}function bt(){const{isDialogPaymentFormOpen:a}=y();return e.jsxs(Q,{open:a.value,fullWidth:!0,maxWidth:"sm",children:[e.jsx(gt,{}),e.jsx(lt,{})]})}function wt(){const a=o.useRef(null),t=E(!1),s=E(!1),n=E(!1),{triggerRefresh:u,updateToolbarSearchValue:i}=y(),p=de({resolver:ce(rt),defaultValues:it}),{watch:d,reset:h,handleSubmit:_,formState:{errors:T}}=p,P=async l=>{i(l),u()},m=async l=>{l.start_date?.message&&J.warning(l.start_date?.message,{position:"top-center"})},R=async l=>{s.onTrue(),await re({start_date:Y(l.start_date,"YYYY-M-D")??"",end_date:Y(l.end_date,"YYYY-M-D")??"",file_type:"pdf"}).finally(()=>{s.onFalse()})},S=async l=>{n.onTrue(),await re({start_date:Y(l.start_date,"YYYY-M-D")??"",end_date:Y(l.end_date,"YYYY-M-D")??"",file_type:"xlsx"}).finally(()=>{n.onFalse()})};return e.jsxs(e.Fragment,{children:[e.jsx(ne,{sx:{p:2.5},children:e.jsx(me,{methods:p,children:e.jsxs(g,{container:!0,spacing:2,children:[e.jsx(g,{xs:12,lg:4,children:e.jsx(q,{size:"medium",name:"keyword",placeholder:"Search payment...",InputProps:{startAdornment:e.jsx(Oe,{position:"start",children:e.jsx(k,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(g,{xs:12,lg:3,children:e.jsx(ie,{name:"start_date",label:"Start Date",hideErrorMessage:!0})}),e.jsx(g,{xs:12,lg:3,children:e.jsx(ie,{name:"end_date",label:"End Date"})}),e.jsx(g,{xs:12,lg:2,children:e.jsxs(ne,{spacing:1,direction:"row",sx:{height:"100%",alignItems:"stretch"},children:[e.jsx(ke,{title:"search",arrow:!0,children:e.jsx("span",{style:{display:"flex",flex:1},children:e.jsx(M,{fullWidth:!0,color:"info",variant:"outlined",sx:{height:"100%"},onClick:_(P,m),children:e.jsx(k,{icon:"material-symbols:search-rounded"})})})}),e.jsxs(et,{variant:"outlined","aria-label":"Print actions",color:"primary",ref:a,onClick:t.onToggle,children:[e.jsx(M,{size:"medium",startIcon:e.jsx(k,{icon:"hugeicons:printer"}),children:"Print"}),e.jsx(M,{size:"medium",children:e.jsx(k,{icon:"ion:md-arrow-dropdown"})})]})]})})]})})}),e.jsxs(Ye,{open:t.value,anchorEl:a.current,onClose:t.onFalse,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{mt:1,borderRadius:1,minWidth:a.current?.offsetWidth||160}}},children:[e.jsx(oe,{sx:{p:0},children:e.jsx(X,{disabled:!0,fullWidth:!0,size:"medium",type:"submit",color:"info",variant:"contained",sx:{height:"100%"},loading:s.value,startIcon:e.jsx(k,{icon:"mingcute:pdf-fill"}),onClick:_(R,m),children:e.jsx(I,{variant:"subtitle2",children:"Pdf"})})}),e.jsx(oe,{sx:{p:0},children:e.jsx(X,{fullWidth:!0,size:"medium",type:"submit",color:"info",variant:"contained",sx:{height:"100%"},loading:n.value,startIcon:e.jsx(k,{icon:"ri:file-excel-2-fill"}),onClick:_(S,m),children:e.jsx(I,{variant:"subtitle2",children:"Excel"})})})]})]})}const K=[{id:"no_kwitansi",label:"Receipt number",width:"10%"},{id:"payment_received",label:"Received Date",width:"10%"},{id:"amount",label:"Amount",width:"10%"},{id:"deposit",label:"Deposit",width:"10%"},{id:"point",label:"Point",width:"10%"},{id:"total",label:"Total",width:"10%"},{id:"payment_method",label:"Payment Method"},{id:"status",label:"Status",width:"10%"}];function Pt(){return e.jsx(Ke,{children:e.jsx(W,{children:K.map(a=>e.jsx(c,{align:a.align||"left",sortDirection:!1,sx:{width:a.width,minWidth:0},children:a.label},a.id))})})}function St({no:a,row:t}){const s=Ee();return o.useCallback(n=>{s.push(`${Be.dashboard.transaction.shipping.details(n)}`)},[s]),e.jsxs(W,{hover:!0,children:[e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.no_kwitansi}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:Y(t.paid_at,xe.dateTime)}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:`Rp. ${D(t.amount)}`}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:`Rp. ${D(t.deposit_amount)}`}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:`Rp. ${D(t.point_amount)}`}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:`Rp. ${D(Number(t.amount)+Number(t.deposit_amount)+Number(t.point_amount))}`}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:t.payment_method}),e.jsx(c,{sx:{whiteSpace:"nowrap"},children:e.jsx(He,{variant:"soft",color:t.status===L.success&&"success"||t.status===L.pending&&"warning"||t.status===L.expired&&"error"||t.status===L.cancel&&"default"||t.status===L.cancel&&"error"||"default",children:t.status})})]})}function vt({rows:a,status:t}){const{page:s,rowsPerPage:n}=y();return e.jsx(ae,{children:t==="loading"?e.jsx($,{text:"loading ..",colspan:K.length}):a.length===0?e.jsx($,{text:"data not found",colspan:K.length}):a.map((u,i)=>e.jsx(St,{row:u,no:(s-1)*n+i+1},i))})}function It(){const{refreshFlag:a,updatePage:t,updateRowsPerPage:s,toolbarSearchValue:n}=y(),u=le(b=>b.activeStore),i=E(),[p,d]=o.useState(0),[h,_]=o.useState(0),[T,P]=o.useState(15),[m,R]=o.useState([]),S=async()=>{i.onTrue();const b=n?Y(n?.start_date,"YYYY-MM-DD")??"":"",x=n?Y(n?.end_date,"YYYY-MM-DD")??"":"",C=n?n.keyword:"";await Je({page:p+1,start_date:b,end_date:x,keyword:C}).then(F=>{R(F.data),_(F.total),d(F.current_page-1),t(F.current_page),s(T)}).finally(()=>{i.onFalse()})};o.useEffect(()=>{S()},[a,p,u]);const l=(b,x)=>{d(x)},H=b=>{P(parseInt(b.target.value,10)),d(0)};return e.jsxs(tt,{children:[e.jsx(wt,{}),e.jsx(B,{sx:{position:"relative"},children:e.jsx(ee,{children:e.jsxs(te,{size:"medium",sx:{minWidth:0},children:[e.jsx(Pt,{}),e.jsx(vt,{rows:m,status:i.value?"loading":"finish"})]})})}),e.jsx(je,{dense:!1,page:p,count:h,rowsPerPage:T,rowsPerPageOptions:[15,25,100],onPageChange:l,onRowsPerPageChange:H})]})}const Tt={title:`Transaction - Payment - ${A.site.name}`};function sa(){return e.jsxs(e.Fragment,{children:[e.jsx(Me,{children:e.jsxs("title",{children:[" ",Tt.title]})}),e.jsx(Ae,{maxWidth:"xl",children:e.jsxs(at,{children:[e.jsx(st,{}),e.jsx(It,{}),e.jsx(bt,{})]})})]})}export{sa as default};
