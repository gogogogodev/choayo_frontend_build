import{r as l,cP as B,k as e,aw as x,aL as V,ci as H,dg as se,ag as f,n,cQ as $,cd as K,cc as I,as as O,c6 as Q,dj as Y,bE as N,I as ne,az as Z,bZ as q,f as y,S as c,m as D,bB as re,bC as ae,aK as ie,dG as te,l as z,dH as le,aY as G,ch as ce,R as de,c8 as he,dC as xe,C as pe,dD as ue,bH as me}from"./index-CtazL8yi.js";import{u as je}from"./use-copy-to-clipboard-BquONGgg.js";import{a as J}from"./format-number-CSJE7oq6.js";import{C as ge}from"./confirm-dialog-CEcgDmma.js";import{U as ve}from"./upload-B6rOCRw-.js";import{A as fe}from"./AvatarGroup-KAyacIty.js";function X({person:r}){const[o,i]=l.useState(r.permission),s=B(),d=l.useCallback(h=>{i(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(x,{component:"li",sx:{display:"flex",alignItems:"center",py:1},children:[e.jsx(V,{alt:r.name,src:r.avatarUrl,sx:{mr:2}}),e.jsx(H,{primary:r.name,secondary:e.jsx(se,{title:r.email,children:e.jsx("span",{children:r.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(f,{size:"small",color:"inherit",endIcon:e.jsx(n,{width:16,icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-.5}}),onClick:s.onOpen,sx:{flexShrink:0,fontSize:h=>h.typography.pxToRem(12),...s.open&&{bgcolor:"action.selected"}},children:["Can ",o]})]}),e.jsx($,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsxs(K,{children:[e.jsxs(I,{selected:o==="view",onClick:()=>{s.onClose(),d("view")},children:[e.jsx(n,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(I,{selected:o==="edit",onClick:()=>{s.onClose(),d("edit")},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsxs(I,{onClick:()=>{s.onClose()},sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}function _({open:r,shared:o,onClose:i,onCopyLink:s,inviteEmail:d,onChangeInvite:h,...p}){const u=o&&!!o.length;return e.jsxs(Q,{fullWidth:!0,maxWidth:"xs",open:r,onClose:i,...p,children:[e.jsx(Y,{children:" Invite "}),e.jsx(x,{sx:{px:3},children:h&&e.jsx(N,{fullWidth:!0,value:d,placeholder:"Email",onChange:h,InputProps:{endAdornment:e.jsx(ne,{position:"end",children:e.jsx(f,{color:"inherit",variant:"contained",disabled:!d,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}})}),u&&e.jsx(Z,{sx:{height:300,px:3},children:e.jsx(x,{component:"ul",children:o.map(a=>e.jsx(X,{person:a},a.id))})}),e.jsxs(q,{sx:{justifyContent:"space-between"},children:[s&&e.jsx(f,{startIcon:e.jsx(n,{icon:"eva:link-2-fill"}),onClick:s,children:"Copy link"}),i&&e.jsx(f,{variant:"outlined",color:"inherit",onClick:i,children:"Close"})]})]})}function Ce({item:r,open:o,onClose:i,onDelete:s,favorited:d,onFavorite:h,onCopyLink:p,...u}){const{name:a,size:g,url:w,type:v,shared:m,modifiedAt:k}=r,C=m&&!!m.length,F=y(!0),b=y(),T=y(!0),[A,E]=l.useState(""),[P,R]=l.useState(r.tags.slice(0,3)),M=l.useCallback(t=>{E(t.target.value)},[]),W=l.useCallback(t=>{R(t)},[]),L=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(D,{size:"small",onClick:F.onToggle,children:e.jsx(n,{icon:F.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),F.value&&e.jsx(re,{multiple:!0,freeSolo:!0,options:r.tags.map(t=>t),getOptionLabel:t=>t,defaultValue:r.tags.slice(0,3),value:P,onChange:(t,S)=>{W(S)},renderOption:(t,S)=>l.createElement("li",{...t,key:S},S),renderTags:(t,S)=>t.map((U,oe)=>l.createElement(ae,{...S({index:oe}),size:"small",variant:"soft",label:U,key:U})),renderInput:t=>e.jsx(N,{...t,placeholder:"#Add a tags"})})]}),j=e.jsxs(c,{spacing:1.5,children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(D,{size:"small",onClick:T.onToggle,children:e.jsx(n,{icon:T.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),T.value&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),J(g)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),ie(k)]}),e.jsxs(c,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(x,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),te(v)]})]})]}),ee=e.jsxs(e.Fragment,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(z,{variant:"subtitle2",children:" Share with "}),e.jsx(D,{size:"small",color:"primary",onClick:b.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{icon:"mingcute:add-line"})})]}),C&&e.jsx(x,{component:"ul",sx:{pl:2,pr:1},children:m.map(t=>e.jsx(X,{person:t},t.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(le,{open:o,onClose:i,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...u,children:[e.jsxs(Z,{children:[e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(z,{variant:"h6",children:" Info "}),e.jsx(G,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:d,onChange:h})]}),e.jsxs(c,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(ce,{imageView:!0,file:v==="folder"?v:w,sx:{width:"auto",height:"auto",alignSelf:"flex-start"},slotProps:{img:{width:320,height:"auto",aspectRatio:"4/3",objectFit:"cover"},icon:{width:64,height:64}}}),e.jsx(z,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:a}),e.jsx(O,{sx:{borderStyle:"dashed"}}),L,j]}),ee]}),e.jsx(x,{sx:{p:2.5},children:e.jsx(f,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),onClick:s,children:"Delete"})})]}),e.jsx(_,{open:b.value,shared:m,inviteEmail:A,onChangeInvite:M,onCopyLink:p,onClose:()=>{b.onFalse(),E("")}})]})}function Se({sx:r,link:o,title:i,onOpen:s,subtitle:d,collapse:h,onCollapse:p,...u}){return e.jsxs(c,{direction:"row",alignItems:"center",sx:{mb:3,...r},...u,children:[e.jsxs(c,{flexGrow:1,children:[e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(z,{variant:"h6",children:[" ",i," "]}),e.jsx(D,{size:"small",color:"primary",onClick:s,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(n,{icon:"mingcute:add-line"})})]}),e.jsx(x,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:d})]}),o&&e.jsx(f,{href:o,component:de,size:"small",color:"inherit",endIcon:e.jsx(n,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View all"}),p&&e.jsx(D,{onClick:p,children:e.jsx(n,{icon:h?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}function be({open:r,onClose:o,onCreate:i,onUpdate:s,folderName:d,onChangeFolderName:h,title:p="Upload files",...u}){const[a,g]=l.useState([]);l.useEffect(()=>{r||g([])},[r]);const w=l.useCallback(C=>{g([...a,...C])},[a]),v=()=>{o(),console.info("ON UPLOAD")},m=C=>{const F=a.filter(b=>b!==C);g(F)},k=()=>{g([])};return e.jsxs(Q,{fullWidth:!0,maxWidth:"sm",open:r,onClose:o,...u,children:[e.jsxs(Y,{sx:{p:C=>C.spacing(3,3,2,3)},children:[" ",p," "]}),e.jsxs(he,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(i||s)&&e.jsx(N,{fullWidth:!0,label:"Folder name",value:d,onChange:h,sx:{mb:3}}),e.jsx(ve,{multiple:!0,value:a,onDrop:w,onRemove:m})]}),e.jsxs(q,{children:[e.jsx(f,{variant:"contained",startIcon:e.jsx(n,{icon:"eva:cloud-upload-fill"}),onClick:v,children:"Upload"}),!!a.length&&e.jsx(f,{variant:"outlined",color:"inherit",onClick:k,children:"Remove all"}),(i||s)&&e.jsx(c,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(f,{variant:"soft",onClick:i||s,children:s?"Save":"Create"})})]})]})}function De({sx:r,folder:o,selected:i,onSelect:s,onDelete:d,...h}){const{copy:p}=je(),u=y(),a=B(),g=y(),w=y(),v=y(),m=y(),k=y(o.isFavorited),[C,F]=l.useState(""),[b,T]=l.useState(o.name),A=l.useCallback(j=>{F(j.target.value)},[]),E=l.useCallback(j=>{T(j.target.value)},[]),P=l.useCallback(()=>{xe.success("Copied!"),p(o.url)},[p,o.url]),R=e.jsxs(c,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(G,{color:"warning",icon:e.jsx(n,{icon:"eva:star-outline"}),checkedIcon:e.jsx(n,{icon:"eva:star-fill"}),checked:k.value,onChange:k.onToggle,inputProps:{name:"checkbox-favorite","aria-label":"Checkbox favorite"}}),e.jsx(D,{color:a.open?"inherit":"default",onClick:a.onOpen,children:e.jsx(n,{icon:"eva:more-vertical-fill"})})]}),M=e.jsx(x,{onMouseEnter:v.onTrue,onMouseLeave:v.onFalse,sx:{width:36,height:36},children:(v.value||i)&&s?e.jsx(G,{checked:i,onClick:s,icon:e.jsx(n,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(n,{icon:"eva:checkmark-circle-2-fill"}),sx:{width:1,height:1}}):e.jsx(x,{component:"img",src:`${pe.site.basePath}/assets/icons/files/ic-folder.svg`,sx:{width:1,height:1}})}),W=e.jsx(H,{onClick:w.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[J(o.size),e.jsx(x,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),L=e.jsx(fe,{max:3,sx:{[`& .${ue.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:o.shared?.map(j=>e.jsx(V,{alt:j.name,src:j.avatarUrl},j.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(me,{variant:"outlined",sx:{gap:1,p:2.5,maxWidth:222,display:"flex",borderRadius:2,cursor:"pointer",position:"relative",bgcolor:"transparent",flexDirection:"column",alignItems:"flex-start",...(v.value||i)&&{bgcolor:"background.paper",boxShadow:j=>j.customShadows.z20},...r},...h,children:[M,R,W,!!o?.shared?.length&&L]}),e.jsx($,{open:a.open,anchorEl:a.anchorEl,onClose:a.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(K,{children:[e.jsxs(I,{onClick:()=>{a.onClose(),P()},children:[e.jsx(n,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(I,{onClick:()=>{a.onClose(),u.onTrue()},children:[e.jsx(n,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(I,{onClick:()=>{a.onClose(),m.onTrue()},children:[e.jsx(n,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsxs(I,{onClick:()=>{g.onTrue(),a.onClose()},sx:{color:"error.main"},children:[e.jsx(n,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(Ce,{item:o,favorited:k.value,onFavorite:k.onToggle,onCopyLink:P,open:w.value,onClose:w.onFalse,onDelete:()=>{w.onFalse(),d()}}),e.jsx(_,{open:u.value,shared:o.shared,inviteEmail:C,onChangeInvite:A,onCopyLink:P,onClose:()=>{u.onFalse(),F("")}}),e.jsx(be,{open:m.value,onClose:m.onFalse,title:"Edit Folder",onUpdate:()=>{m.onFalse(),T(b),console.info("UPDATE FOLDER",b)},folderName:b,onChangeFolderName:E}),e.jsx(ge,{open:g.value,onClose:g.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(f,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}export{Ce as F,_ as a,Se as b,De as c,be as d};
