import{bv as fe,bu as xe,r,b0 as be,u as he,b1 as V,b3 as Ie,b7 as m,g2 as Ue,b6 as ze,k as e,b8 as M,b9 as W,cn as Be,ba as Z,bb as ge,bf as Ke,dg as Ne,bo as _e,du as qe,aw as ye,cO as He,ax as je,l as I,S as y,aL as Ve,ci as We,aI as Ge,fK as Ze,at as Xe,n as G,bI as ne,c6 as Je,bZ as Qe,ag as ve,o as oe,as as te,az as Ye,c as et,f as tt,g as Ce,t as De,q as we,dC as ot,p as st,aX as re,F as Se,v as E,dX as le,bC as ce,m as ee}from"./index-CtazL8yi.js";import{F as T}from"./fields-DtpCY2Ze.js";import{s as pe}from"./schema-helper-BI0i4TVU.js";import{M as it}from"./markdown-D8DEaCMK.js";import{E as at}from"./empty-content-oGcGfW-8.js";import{Z as nt}from"./Zoom-_GmztGho.js";import{F as Te}from"./Fab-DvdRmwaw.js";import{F as de}from"./FormControlLabel-DFxx6sAy.js";import{C as me}from"./Card-DTCuhoee.js";import{C as ue}from"./CardHeader-DR90Oglq.js";function rt(t){return xe("MuiSpeedDial",t)}const q=fe("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),lt=["ref"],ct=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],pt=["ref"],dt=t=>{const{classes:o,open:i,direction:a}=t,c={root:["root",`direction${Z(a)}`],fab:["fab"],actions:["actions",!i&&"actionsClosed"]};return ge(c,rt,o)};function $(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const F=32,H=16,mt=M("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:i}=t;return[o.root,o[`direction${Z(i.direction)}`]]}})(({theme:t,ownerState:o})=>m({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},o.direction==="up"&&{flexDirection:"column-reverse",[`& .${q.actions}`]:{flexDirection:"column-reverse",marginBottom:-F,paddingBottom:H+F}},o.direction==="down"&&{flexDirection:"column",[`& .${q.actions}`]:{flexDirection:"column",marginTop:-F,paddingTop:H+F}},o.direction==="left"&&{flexDirection:"row-reverse",[`& .${q.actions}`]:{flexDirection:"row-reverse",marginRight:-F,paddingRight:H+F}},o.direction==="right"&&{flexDirection:"row",[`& .${q.actions}`]:{flexDirection:"row",marginLeft:-F,paddingLeft:H+F}})),ut=M(Te,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,o)=>o.fab})(()=>({pointerEvents:"auto"})),ft=M("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,o)=>{const{ownerState:i}=t;return[o.actions,!i.open&&o.actionsClosed]}})(({ownerState:t})=>m({display:"flex",pointerEvents:"auto"},!t.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),xt=r.forwardRef(function(o,i){const a=be({props:o,name:"MuiSpeedDial"}),c=he(),p={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{ariaLabel:d,FabProps:{ref:f}={},children:j,className:u,direction:D="up",hidden:g=!1,icon:v,onBlur:A,onClose:x,onFocus:w,onKeyDown:P,onMouseEnter:n,onMouseLeave:l,onOpen:h,open:k,TransitionComponent:U=nt,transitionDuration:z=p,TransitionProps:Pe}=a,B=V(a.FabProps,lt),Fe=V(a,ct),[C,L]=Ie({controlled:k,default:!1,name:"SpeedDial",state:"open"}),K=m({},a,{open:C,direction:D}),N=dt(K),O=Ue(),X=r.useRef(0),J=r.useRef(),R=r.useRef([]);R.current=[R.current[0]];const Ae=r.useCallback(s=>{R.current[0]=s},[]),ke=ze(f,Ae),Re=(s,b)=>S=>{R.current[s+1]=S,b&&b(S)},Ee=s=>{P&&P(s);const b=s.key.replace("Arrow","").toLowerCase(),{current:S=b}=J;if(s.key==="Escape"){L(!1),R.current[0].focus(),x&&x(s,"escapeKeyDown");return}if($(b)===$(S)&&$(b)!==void 0){s.preventDefault();const Y=b===S?1:-1,_=Ke(X.current+Y,0,R.current.length-1);R.current[_].focus(),X.current=_,J.current=S}};r.useEffect(()=>{C||(X.current=0,J.current=void 0)},[C]);const se=s=>{s.type==="mouseleave"&&l&&l(s),s.type==="blur"&&A&&A(s),O.clear(),s.type==="blur"?O.start(0,()=>{L(!1),x&&x(s,"blur")}):(L(!1),x&&x(s,"mouseLeave"))},Le=s=>{B.onClick&&B.onClick(s),O.clear(),C?(L(!1),x&&x(s,"toggle")):(L(!0),h&&h(s,"toggle"))},ie=s=>{s.type==="mouseenter"&&n&&n(s),s.type==="focus"&&w&&w(s),O.clear(),C||O.start(0,()=>{L(!0),h&&h(s,{focus:"focus",mouseenter:"mouseEnter"}[s.type])})},Q=d.replace(/^[^a-z]+|[^\w:.-]+/gi,""),ae=r.Children.toArray(j).filter(s=>r.isValidElement(s)),Me=ae.map((s,b)=>{const S=s.props,{FabProps:{ref:Y}={},tooltipPlacement:_}=S,Oe=V(S.FabProps,pt),$e=_||($(D)==="vertical"?"left":"top");return r.cloneElement(s,{FabProps:m({},Oe,{ref:Re(b,Y)}),delay:30*(C?b:ae.length-b),open:C,tooltipPlacement:$e,id:`${Q}-action-${b}`})});return e.jsxs(mt,m({className:W(N.root,u),ref:i,role:"presentation",onKeyDown:Ee,onBlur:se,onFocus:ie,onMouseEnter:ie,onMouseLeave:se,ownerState:K},Fe,{children:[e.jsx(U,m({in:!g,timeout:z,unmountOnExit:!0},Pe,{children:e.jsx(ut,m({color:"primary","aria-label":d,"aria-haspopup":"true","aria-expanded":C,"aria-controls":`${Q}-actions`},B,{onClick:Le,className:W(N.fab,B.className),ref:ke,ownerState:K,children:r.isValidElement(v)&&Be(v,["SpeedDialIcon"])?r.cloneElement(v,{open:C}):v}))})),e.jsx(ft,{id:`${Q}-actions`,role:"menu","aria-orientation":$(D),className:W(N.actions,!C&&N.actionsClosed),ownerState:K,children:Me})]}))});function bt(t){return xe("MuiSpeedDialAction",t)}const ht=fe("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),gt=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],yt=t=>{const{open:o,tooltipPlacement:i,classes:a}=t,c={fab:["fab",!o&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Z(i)}`,!o&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ge(c,bt,a)},jt=M(Te,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,o)=>{const{ownerState:i}=t;return[o.fab,!i.open&&o.fabClosed]}})(({theme:t,ownerState:o})=>m({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:_e.emphasize(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!o.open&&{opacity:0,transform:"scale(0)"})),vt=M("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,o)=>{const{ownerState:i}=t;return[o.staticTooltip,!i.open&&o.staticTooltipClosed,o[`tooltipPlacement${Z(i.tooltipPlacement)}`]]}})(({theme:t,ownerState:o})=>({position:"relative",display:"flex",alignItems:"center",[`& .${ht.staticTooltipLabel}`]:m({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},!o.open&&{opacity:0,transform:"scale(0.5)"},o.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},o.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),Ct=M("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,o)=>o.staticTooltipLabel})(({theme:t})=>m({position:"absolute"},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),Dt=r.forwardRef(function(o,i){const a=be({props:o,name:"MuiSpeedDialAction"}),{className:c,delay:p=0,FabProps:d={},icon:f,id:j,open:u,TooltipClasses:D,tooltipOpen:g=!1,tooltipPlacement:v="left",tooltipTitle:A}=a,x=V(a,gt),w=m({},a,{tooltipPlacement:v}),P=yt(w),[n,l]=r.useState(g),h=()=>{l(!1)},k=()=>{l(!0)},U={transitionDelay:`${p}ms`},z=e.jsx(jt,m({size:"small",className:W(P.fab,c),tabIndex:-1,role:"menuitem",ownerState:w},d,{style:m({},U,d.style),children:f}));return g?e.jsxs(vt,m({id:j,ref:i,className:P.staticTooltip,ownerState:w},x,{children:[e.jsx(Ct,{style:U,id:`${j}-label`,className:P.staticTooltipLabel,ownerState:w,children:A}),r.cloneElement(z,{"aria-labelledby":`${j}-label`})]})):(!u&&n&&l(!1),e.jsx(Ne,m({id:j,ref:i,title:A,placement:v,onClose:h,onOpen:k,open:u&&n,classes:D},x,{children:z})))});function wt({title:t,author:o,coverUrl:i,createdAt:a}){const c=he(),p=qe("up","sm");return e.jsx(ye,{sx:{...He({color:`0deg, ${ne(c.vars.palette.grey["900Channel"],.64)}, ${ne(c.vars.palette.grey["900Channel"],.64)}`,imgUrl:i}),height:480,overflow:"hidden"},children:e.jsxs(je,{sx:{height:1,position:"relative"},children:[e.jsx(I,{variant:"h3",component:"h1",sx:{zIndex:9,color:"common.white",position:"absolute",maxWidth:480,pt:{xs:2,md:8}},children:t}),e.jsxs(y,{sx:{left:0,width:1,bottom:0,position:"absolute"},children:[o&&a&&e.jsxs(y,{direction:"row",alignItems:"center",sx:{px:{xs:2,md:3},pb:{xs:3,md:8}},children:[e.jsx(Ve,{alt:o.name,src:o.avatarUrl,sx:{width:64,height:64,mr:2}}),e.jsx(We,{sx:{color:"common.white"},primary:o.name,secondary:Ge(a),primaryTypographyProps:{typography:"subtitle1",mb:.5},secondaryTypographyProps:{color:"inherit",sx:{opacity:.64}}})]}),e.jsx(xt,{direction:p?"left":"up",ariaLabel:"Share post",icon:e.jsx(G,{icon:"solar:share-bold"}),FabProps:{size:"medium"},sx:{position:"absolute",bottom:{xs:32,md:64},right:{xs:16,md:24}},children:Ze.map(d=>e.jsx(Dt,{icon:e.jsx(Xe,{icon:d.name}),tooltipTitle:d.name,tooltipPlacement:"top",FabProps:{color:"default"}},d.name))})]})]})})}function St({open:t,title:o,content:i,isValid:a,onClose:c,coverUrl:p,onSubmit:d,description:f,isSubmitting:j}){let u="";p&&(typeof p=="string"?u=p:u=URL.createObjectURL(p));const D=o||u,g=o||f||i||u;return e.jsxs(Je,{fullScreen:!0,open:t,onClose:c,children:[e.jsxs(Qe,{sx:{py:2,px:3},children:[e.jsx(I,{variant:"h6",sx:{flexGrow:1},children:"Preview"}),e.jsx(ve,{variant:"outlined",color:"inherit",onClick:c,children:"Cancel"}),e.jsx(oe,{type:"submit",variant:"contained",disabled:!a,loading:j,onClick:d,children:"Post"})]}),e.jsx(te,{}),g?e.jsxs(Ye,{children:[(D||u)&&e.jsx(wt,{title:o,coverUrl:u}),e.jsx(je,{sx:{mt:5,mb:10},children:e.jsxs(y,{sx:{mx:"auto",maxWidth:720},children:[e.jsx(I,{variant:"h6",children:f}),e.jsx(it,{children:i})]})})]}):e.jsx(at,{filled:!0,title:"Empty content!"})]})}const Tt=we({title:E().min(1,{message:"Title is required!"}),description:E().min(1,{message:"Description is required!"}),content:pe.editor().min(100,{message:"Content must be at least 100 characters"}),coverUrl:pe.file({message:{required_error:"Cover is required!"}}),tags:E().array().min(2,{message:"Must have at least 2 items!"}),metaKeywords:E().array().nonempty({message:"Meta keywords is required!"}),metaTitle:E(),metaDescription:E()});function Ut({currentPost:t}){const o=et(),i=tt(),a=r.useMemo(()=>({title:t?.title||"",description:t?.description||"",content:t?.content||"",coverUrl:t?.coverUrl||null,tags:t?.tags||[],metaKeywords:t?.metaKeywords||[],metaTitle:t?.metaTitle||"",metaDescription:t?.metaDescription||""}),[t]),c=Ce({mode:"all",resolver:De(Tt),defaultValues:a}),{reset:p,watch:d,setValue:f,handleSubmit:j,formState:{isSubmitting:u,isValid:D}}=c,g=d();r.useEffect(()=>{t&&p(a)},[t,a,p]);const v=j(async n=>{try{await new Promise(l=>setTimeout(l,500)),p(),i.onFalse(),ot.success(t?"Update success!":"Create success!"),o.push(st.dashboard.post.root),console.info("DATA",n)}catch(l){console.error(l)}}),A=r.useCallback(()=>{f("coverUrl",null)},[f]),x=e.jsxs(me,{children:[e.jsx(ue,{title:"Details",subheader:"Title, short description, image...",sx:{mb:3}}),e.jsx(te,{}),e.jsxs(y,{spacing:3,sx:{p:3},children:[e.jsx(T.Text,{name:"title",label:"Post title"}),e.jsx(T.Text,{name:"description",label:"Description",multiline:!0,rows:3}),e.jsxs(y,{spacing:1.5,children:[e.jsx(I,{variant:"subtitle2",children:"Content"}),e.jsx(T.Editor,{name:"content",sx:{maxHeight:480}})]}),e.jsxs(y,{spacing:1.5,children:[e.jsx(I,{variant:"subtitle2",children:"Cover"}),e.jsx(T.Upload,{name:"coverUrl",maxSize:3145728,onDelete:A})]})]})]}),w=e.jsxs(me,{children:[e.jsx(ue,{title:"Properties",subheader:"Additional functions and attributes...",sx:{mb:3}}),e.jsx(te,{}),e.jsxs(y,{spacing:3,sx:{p:3},children:[e.jsx(T.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:le.map(n=>n),getOptionLabel:n=>n,renderOption:(n,l)=>r.createElement("li",{...n,key:l},l),renderTags:(n,l)=>n.map((h,k)=>r.createElement(ce,{...l({index:k}),key:h,label:h,size:"small",color:"info",variant:"soft"}))}),e.jsx(T.Text,{name:"metaTitle",label:"Meta title"}),e.jsx(T.Text,{name:"metaDescription",label:"Meta description",fullWidth:!0,multiline:!0,rows:3}),e.jsx(T.Autocomplete,{name:"metaKeywords",label:"Meta keywords",placeholder:"+ Keywords",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:le.map(n=>n),getOptionLabel:n=>n,renderOption:(n,l)=>r.createElement("li",{...n,key:l},l),renderTags:(n,l)=>n.map((h,k)=>r.createElement(ce,{...l({index:k}),key:h,label:h,size:"small",color:"info",variant:"soft"}))}),e.jsx(de,{control:e.jsx(re,{defaultChecked:!0,inputProps:{id:"comments-switch"}}),label:"Enable comments"})]})]}),P=e.jsxs(ye,{display:"flex",alignItems:"center",flexWrap:"wrap",justifyContent:"flex-end",children:[e.jsx(de,{control:e.jsx(re,{defaultChecked:!0,inputProps:{id:"publish-switch"}}),label:"Publish",sx:{pl:3,flexGrow:1}}),e.jsxs("div",{children:[e.jsx(ve,{color:"inherit",variant:"outlined",size:"large",onClick:i.onTrue,children:"Preview"}),e.jsx(oe,{type:"submit",variant:"contained",size:"large",loading:u,sx:{ml:2},children:t?"Save changes":"Create post"})]})]});return e.jsxs(Se,{methods:c,onSubmit:v,children:[e.jsxs(y,{spacing:5,sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[x,w,P]}),e.jsx(St,{isValid:D,onSubmit:v,title:g.title,open:i.value,content:g.content,onClose:i.onFalse,coverUrl:g.coverUrl,isSubmitting:u,description:g.description})]})}const Pt=we({comment:E().min(1,{message:"Comment is required!"})});function zt(){const t={comment:""},o=Ce({resolver:De(Pt),defaultValues:t}),{reset:i,handleSubmit:a,formState:{isSubmitting:c}}=o,p=a(async d=>{try{await new Promise(f=>setTimeout(f,500)),i(),console.info("DATA",d)}catch(f){console.error(f)}});return e.jsx(Se,{methods:o,onSubmit:p,children:e.jsxs(y,{spacing:3,children:[e.jsx(T.Text,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),e.jsxs(y,{direction:"row",alignItems:"center",children:[e.jsxs(y,{direction:"row",alignItems:"center",flexGrow:1,children:[e.jsx(ee,{children:e.jsx(G,{icon:"solar:gallery-add-bold"})}),e.jsx(ee,{children:e.jsx(G,{icon:"eva:attach-2-fill"})}),e.jsx(ee,{children:e.jsx(G,{icon:"eva:smiling-face-fill"})})]}),e.jsx(oe,{type:"submit",variant:"contained",loading:c,children:"Post comment"})]})]})})}export{wt as P,zt as a,Ut as b};
