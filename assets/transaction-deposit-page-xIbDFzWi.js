import{f as D,r as l,iy as A,iC as K,iD as Y,k as e,a as U,e as G,iE as E,i7 as oe,h as ut,aI as B,aZ as ue,aC as q,iF as Ne,o as L,n as b,iB as mt,fC as Ie,q as O,iG as W,v as f,d_ as ht,cC as Ue,g as me,t as he,S as C,F as pe,aF as y,aU as pt,dg as xt,ag as _,gN as te,cc as N,l as v,dC as Ge,ia as xe,aw as k,az as ge,d as Ye,c6 as Z,dj as J,c8 as Q,C as I,iH as gt,ay as z,iI as ft,bZ as ee,m as fe,aB as bt,iJ as yt,fs as jt,bH as wt,cs as Dt,as as Pt,bK as vt,iK as Ct,aE as qe,bB as _t,I as Tt,bE as Ve,H as St,it as Ft,c9 as Rt}from"./index-DtP58muJ.js";import{T as be}from"./table-pagination-custom-DoMFqUCQ.js";import{a as ye,b as X,c as je,T as we}from"./TableRow-BeGZSEnl.js";import{T as j}from"./TableCell-BYy3h6md.js";import{T as V}from"./table-body-rowinfo-3iCgRhmq.js";import{f as ne}from"./format-number-Ds7vlrjD.js";import{C as ae}from"./errors-wZ747Yys.js";import{R as We}from"./rhf-date-picker-CTkMAX-z.js";import{R as se}from"./rhf-autocomplete-on-enter-DZm-8Fkx.js";import{C as ie}from"./functions-BjzhM4yz.js";import{B as De}from"./ButtonGroup-Bt9CCMsf.js";import{C as $}from"./Card-DhhypByC.js";import{C as Ke}from"./custom-breadcrumbs-C-JLSHAz.js";import{R as kt}from"./rhf-radio-group-BrOd8CM7.js";import{S as Xe}from"./functions-BO07r0AC.js";import{S as re}from"./Skeleton-2yIQyMsS.js";import{a as Ot}from"./RadioGroup-xNsl4cpV.js";import{U as Ht}from"./use-countdown-C1-yVmWp.js";import{T as Et,a as It,b as $e}from"./TabPanel-CcPv7mqK.js";import"./TablePagination-DcwzPYld.js";import"./LastPage-CTPAXkYQ.js";import"./FormControlLabel-aYt4PlDo.js";import"./DatePicker-C3EXuF80.js";import"./ListItem-B8SR2-3G.js";import"./MobileDateTimePicker-CzOngS04.js";import"./getValidReactChildren-BiSV1uXg.js";import"./FormGroup-BxqFH-77.js";const Ze=l.createContext(void 0),F=()=>{const t=l.useContext(Ze);if(t===void 0)throw new Error("useContextPage must be used within a PageContext.Provider");return t},Wt=({children:t})=>{const s=D(),n=D(),o=D(),a=D(),i=D(),c=D(),[r,u]=l.useState({payment_id:"",store_payment_method_id:"",expired_at:0,va_number:"",qris_url:"",status:A.pending,amount:""}),g=D(),m=D(),[h,w]=l.useState({id:"",name:""}),[R,d]=l.useState({type:"combined"}),[T,p]=l.useState(0),[P,x]=l.useState(0),[H,S]=l.useState(15),M=D(),Je=l.useRef(null),ve=D(),Qe=l.useRef(null),[Ce,et]=l.useState({startDate:"",endDate:"",type:{id:Y.combined,name:K(Y.combined)},customer:{id:"",name:""},keyword:""}),[_e,tt]=l.useState(0),[Te,st]=l.useState(0),[Se,ot]=l.useState(15),[Fe,nt]=l.useState(0),[Re,at]=l.useState({customer:null}),[ke,it]=l.useState(0),[Oe,rt]=l.useState(0),[He,lt]=l.useState(0),[Ee,ct]=l.useState(15),dt=l.useMemo(()=>({dialogTopUp:{isOpen:s,loading:n},dialogRefund:{isOpen:o,loading:a},dialogWaitingTopUpPayment:{isOpen:i,loading:c,data:r,setData:u},dialogHistory:{isOpen:g,loading:m,data:h,setData:w,toolbar:R,setToolbar:d,page:T,setPage:p,total:P,setTotal:x,rowsPerPage:H,setRowsPerPage:S},historyDeposit:{toolbar:Ce,setToolbar:et,page:_e,setPage:tt,total:Te,setTotal:st,rowsPerPage:Se,setRowsPerPage:ot,refreshFlag:Fe,setRefreshFlag:nt,buttonGroupForm:{isOpen:M,anchorRef:Je},buttonGroupPrint:{isOpen:ve,anchorRef:Qe}},customerDeposit:{toolbar:Re,setToolbar:at,page:ke,setPage:it,total:Oe,setTotal:rt,rowsPerPage:Ee,setRowsPerPage:ct,refreshFlag:He,setRefreshFlag:lt}}),[r,M,ve,a,o,n,s,c,i,_e,Fe,Se,Ce,Te,ke,He,Ee,Re,Oe,h,R,m,g,T,H,P]);return e.jsx(Ze.Provider,{value:dt,children:t})},le=[{id:"no",label:"No",width:"5%"},{id:"customer",label:"Customer",width:"15%"},{id:"date",label:"Date",width:"15%"},{id:"paymentMethod",label:"Payment Method",width:"15%"},{id:"amount",label:"Amount",width:"15%"},{id:"type",label:"Type",width:"15%"},{id:"status",label:"Status",width:"15%"},{id:"print",label:"Print",width:"5%"}];function $t(){return e.jsx(ye,{children:e.jsx(X,{children:le.map(t=>e.jsx(j,{align:t.align||"left",sortDirection:!1,sx:{width:t.width,minWidth:0},children:t.label},t.id))})})}const Mt=async t=>{try{return(await U.post(`${G.transaction.deposit.topUp}`,t)).data}catch(s){throw s.status===422?s.data&&s.data.errors?new ae(s.data.errors):s:(console.error("DepositTopUpFormSubmit - error : ",s),new Error("Oops, an error occurred while saving data!"))}},At=t=>({depositRequest:"topUp",customerId:t.customer?t.customer.id:"",amount:Number(t.amount.replace(/,/g,"")),storePaymentMethodId:t.payment_method.id}),Bt=async t=>{try{await U.post(`${G.transaction.deposit.refund}`,t)}catch(s){throw s.status===422?s.data&&s.data.errors?new ae(s.data.errors):s:(console.error("DepositRefundFormSubmit - error : ",s),new Error("Oops, an error occurred while saving data!"))}},zt=t=>({depositRequest:"refund",customerId:t.customer?t.customer.id:"",amount:Number(t.amount.replace(/,/g,"")),paymentMethod:t.refund_method,bankId:t.refund_method===E.bank_transfer&&t.bank?t.bank.id:null,bankAccountNumber:t.refund_method===E.bank_transfer?t.bank_account_number:null,bankAccountName:t.refund_method===E.bank_transfer?t.bank_account_name:null,referenceNumber:t.reference_number}),Pe=async(t,{startAt:s,endAt:n,customerId:o,type:a,page:i,perPage:c})=>{try{const r=new URLSearchParams({depositRequest:t,page:i??"1",perPage:c??"15",orderBy:"created_at",orderDirection:"desc",startAt:s??"",endAt:n??"",customerId:o??"",type:a??""});return(await U.get(`${G.transaction.deposit.history_list}?${r.toString()}`)).data}catch(r){throw console.error("DepositHistoryGetList - error : ",r),new Error("unexpected error occurred")}},Lt=async t=>{try{const s=await U.get(`${G.print.web.deposit}?customer_deposit_id=${t}`,{responseType:"blob"}),n=window.URL.createObjectURL(s.data);window.open(n,"__blank"),window.URL.revokeObjectURL(n)}catch(s){console.error("WebPrintDeposit - error : ",s)}},Nt=async t=>{try{return(await U.post(G.print.mobile.deposit,{key:t.key,customer_deposit_id:t.id})).data}catch(s){throw console.error("MobilePrint - error : ",s),new Error("something wrong")}},Me=async({category_id:t,customer_id:s,start_date:n,file_type:o,end_date:a})=>{try{let i="mode=url&depositRequest=history";n&&a&&(i+=`&start_at=${n}&end_at=${a}`),t&&(i+=`&deposit_type=${t}`),s&&(i+=`&customerId=${s}`),o&&(i+=`&type=${o}`);const c=await U.get(`${G.report.deposit}?${i}`);window.open(c.data,"__blank")}catch(i){throw console.error("DepositReportDownload - error : ",i),new Error("something wrong")}},Ae=async({customer_id:t,start_date:s,file_type:n,end_date:o})=>{try{let a="mode=url&depositRequest=customer";s&&o&&(a+=`&start_at=${s}&end_at=${o}`),t&&(a+=`&customerId=${t}`),n&&(a+=`&type=${n}`);const i=await U.get(`${G.report.deposit}?${a}`);window.open(i.data,"__blank")}catch(a){throw console.error("CustomerDepositListReportDownload - error : ",a),new Error("something wrong")}};function Ut({no:t,row:s}){const n=D(),{showSweetDialog:o}=oe(),a=ut("mobile-websocket-key"),i=async()=>{n.onTrue(),mt()?(await Lt(s.customer_deposit_id??""),n.onFalse()):await Nt({key:a,id:s.customer_deposit_id??""}).then(c=>{o({title:"Print Deposit Success!",icon:"success",description:c.message})}).catch(c=>console.error(c)).finally(async()=>{n.onFalse()})};return e.jsxs(X,{hover:!0,children:[e.jsx(j,{sx:{whiteSpace:"nowrap"},children:t}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s.customer}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:B(s.date,ue.date)}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s.paymentMethod}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:`Rp. ${ne(s.amount)}`}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(q,{variant:"soft",color:Ne(s.type),children:K(s.type)})}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(q,{variant:"soft",color:s.status==="Pending"&&"warning"||s.status==="Paid"&&"success"||s.status==="Success"&&"success"||s.status==="Failed"&&"error"||"default",children:s.status})}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(L,{size:"small",color:"inherit",variant:"outlined",onClick:i,loading:n.value,startIcon:e.jsx(b,{icon:"ion:receipt-outline"}),children:"Print"})})]})}function Gt({rows:t,status:s}){const{historyDeposit:n}=F();return e.jsx(je,{children:s==="loading"?e.jsx(V,{text:"loading ..",colspan:le.length}):t.length===0?e.jsx(V,{text:"data not found",colspan:le.length}):t.map((o,a)=>e.jsx(Ut,{row:o,no:n.page*n.rowsPerPage+a+1},a))})}const Yt=O({is_cash:ht(),customer:O({id:f(),name:f()}).nullable(),amount:f(),amount_receive:f(),amount_change:f(),payment_method:O({id:f(),group_code:Ue(Object.values(W),{message:"invalid payment group code!"}),slug:O({slug:f(),name:f()})})}).refine(t=>t.customer&&t.customer.id,{message:"Customer is required",path:["customer"]}).refine(t=>t.payment_method.id?.trim()!=="",{message:"Payment method is required!",path:["payment_method"]}).refine(t=>t.is_cash&&t.amount_receive===""?!1:!(t.is_cash&&Number(t.amount_receive.replace(/,/g,""))<=0),{message:"nominal must be more than 0",path:["amount_receive"]}).refine(t=>!(t.is_cash&&Number(t.amount_receive.replace(/,/g,""))<Number(t.amount.replace(/,/g,""))),{message:"invalid nominal",path:["amount_receive"]}),Be={customer:null,amount:"0",amount_receive:"0",amount_change:"0",payment_method:{id:"",group_code:W.bank_transfer,slug:{slug:"",name:""}}},qt=O({customer:O({id:f(),name:f()}).nullable(),refund_method:Ue(Object.values(E),{message:"Invalid Payment Refund Method"}),amount:f(),bank:O({id:f(),name:f()}).nullable(),bank_account_number:f(),bank_account_name:f(),reference_number:f()}).refine(t=>t.customer&&t.customer.id,{message:"Customer is required",path:["customer"]}).refine(t=>!(t.refund_method===E.bank_transfer&&!t.bank?.id),{message:"Bank is required!",path:["bank"]}).refine(t=>!(t.refund_method===E.bank_transfer&&t.bank_account_number===""),{message:"Account number is required!",path:["bank_account_number"]}).refine(t=>!(t.refund_method===E.bank_transfer&&t.bank_account_name===""),{message:"Account name is required!",path:["bank_account_name"]}).refine(t=>!(t.refund_method===E.bank_transfer&&t.reference_number===""),{message:"Reference number is required!",path:["reference_number"]}),ze={customer:null,refund_method:E.bank_transfer,amount:"0",bank:null,bank_account_number:"",bank_account_name:"",reference_number:""},Vt=O({historyCustomer:O({startDate:f(),endDate:f(),customer:O({id:f(),name:f()}).nullable(),type:O({id:f(),name:f()})}).refine(t=>{const s=new Date(t.startDate),n=new Date(t.endDate);return console.log(!Number.isNaN(s.getTime())&&!Number.isNaN(n.getTime())&&n>=s),!Number.isNaN(s.getTime())&&!Number.isNaN(n.getTime())&&n>=s},{path:["endDate"],message:"End date cannot be before start date"}),depositCustomer:O({customer:O({id:f(),name:f()}).nullable()})}),Kt={historyCustomer:{startDate:`${Ie("YYYY-MM")}-01`,endDate:Ie("YYYY-MM-DD"),customer:null,type:{id:Y.combined,name:K(Y.combined)}},depositCustomer:{customer:null}};function Xt(){const t=l.useRef(null),s=D(!1),n=D(!1),o=D(!1),{historyDeposit:a}=F(),i=me({resolver:he(Vt),defaultValues:Kt}),{watch:c,reset:r,handleSubmit:u,formState:{errors:g}}=i,m=async d=>{a.setToolbar({...a.toolbar,...d.historyCustomer}),a.setRefreshFlag(T=>T+1)},h=async d=>{d.historyCustomer?.startDate?.message&&Ge.warning(d.historyCustomer?.startDate?.message,{position:"top-center"})},w=async d=>{n.onTrue(),await Me({start_date:B(d.historyCustomer?.startDate,"YYYY-M-D")??"",end_date:B(d.historyCustomer?.endDate,"YYYY-M-D")??"",customer_id:d.historyCustomer.customer?.id,category_id:d.historyCustomer.type.id,file_type:"pdf"}).finally(()=>{n.onFalse()})},R=async d=>{o.onTrue(),await Me({start_date:B(d.historyCustomer?.startDate,"YYYY-M-D")??"",end_date:B(d.historyCustomer?.endDate,"YYYY-M-D")??"",customer_id:d.historyCustomer.customer?.id,category_id:d.historyCustomer.type.id,file_type:"xlsx"}).finally(()=>{o.onFalse()})};return e.jsxs(e.Fragment,{children:[e.jsx(C,{sx:{p:2.5},children:e.jsx(pe,{methods:i,children:e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{xs:12,lg:3,children:e.jsx(pt,{label:"Type",name:"historyCustomer.type",getOptionKey:d=>d.id,getOptionLabel:d=>d.name,isOptionEqualToValue:(d,T)=>d.id===T.id,options:Object.values(Y).map(d=>({id:d,name:K(d)}))})}),e.jsx(y,{xs:12,lg:3,children:e.jsx(se,{size:"medium",name:"historyCustomer.customer",debounceSearch:!0,label:"Customer",isOptionEqualToValue:(d,T)=>d?.id===T?.id,getOptionLabel:d=>d.name?`${d.name} ( ${d.phone} )`:"",fetchFunction:async d=>(await ie({keyword:d,page:1})).data})}),e.jsx(y,{xs:12,lg:2,children:e.jsx(We,{name:"historyCustomer.startDate",label:"Start Date",hideErrorMessage:!0})}),e.jsx(y,{xs:12,lg:2,children:e.jsx(We,{name:"historyCustomer.endDate",label:"End Date"})}),e.jsx(y,{xs:12,lg:2,children:e.jsxs(C,{spacing:1,direction:"row",sx:{height:"100%",alignItems:"stretch"},children:[e.jsx(xt,{title:"search",arrow:!0,children:e.jsx("span",{style:{display:"flex",flex:1},children:e.jsx(_,{fullWidth:!0,color:"info",variant:"outlined",sx:{height:"100%"},onClick:u(m,h),children:e.jsx(b,{icon:"material-symbols:search-rounded"})})})}),e.jsxs(De,{variant:"outlined","aria-label":"Print actions",color:"primary",ref:t,onClick:s.onToggle,children:[e.jsx(_,{size:"medium",startIcon:e.jsx(b,{icon:"hugeicons:printer"}),children:"Print"}),e.jsx(_,{size:"medium",children:e.jsx(b,{icon:"ion:md-arrow-dropdown"})})]})]})})]})})}),e.jsxs(te,{open:s.value,anchorEl:t.current,onClose:s.onFalse,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{mt:1,borderRadius:1,minWidth:t.current?.offsetWidth||160}}},children:[e.jsx(N,{sx:{p:0},children:e.jsx(L,{disabled:!0,fullWidth:!0,size:"medium",type:"submit",variant:"contained",color:"info",sx:{height:"100%"},loading:n.value,startIcon:e.jsx(b,{icon:"mingcute:pdf-fill"}),onClick:u(w,h),children:e.jsx(v,{variant:"subtitle2",children:"Pdf"})})}),e.jsx(N,{sx:{p:0},children:e.jsx(L,{fullWidth:!0,size:"medium",type:"submit",variant:"contained",color:"info",sx:{height:"100%"},loading:o.value,startIcon:e.jsx(b,{icon:"ri:file-excel-2-fill"}),onClick:u(R,h),children:e.jsx(v,{variant:"subtitle2",children:"Excel"})})})]})]})}function Zt(){const{historyDeposit:t}=F(),s=xe(u=>u.activeStore),[n,o]=l.useState([]),[a,i]=l.useState(!1);l.useEffect(()=>{(async()=>(i(!0),await Pe("history",{customerId:t.toolbar.customer?t.toolbar.customer.id:"",page:String(t.page+1),perPage:String(t.rowsPerPage),type:t.toolbar.type.id,startAt:t.toolbar.startDate,endAt:t.toolbar.endDate}).then(g=>{o(g.data),t.setTotal(g.total),t.setPage(g.current_page-1)}).catch(()=>{o([])}).finally(()=>{i(!1)})))()},[t.toolbar.customer,t.toolbar.startDate,t.toolbar.endDate,t.toolbar.startDate,t.toolbar.type,t.rowsPerPage,t.refreshFlag,t.page,s]);const c=(u,g)=>{t.setPage(g)},r=u=>{t.setRowsPerPage(parseInt(u.target.value,10)),t.setPage(0)};return e.jsxs($,{children:[e.jsx(Xt,{}),e.jsx(k,{sx:{position:"relative"},children:e.jsx(ge,{children:e.jsxs(we,{size:"medium",sx:{minWidth:0},children:[e.jsx($t,{}),e.jsx(Gt,{rows:n,status:a?"loading":"finish"})]})})}),e.jsx(be,{dense:!1,page:t.page,count:t.total,rowsPerPage:t.rowsPerPage,rowsPerPageOptions:[15,25,100],onPageChange:c,onRowsPerPageChange:r})]})}const Jt=[{label:"Refund",value:"refund",icon:e.jsx(b,{icon:"mingcute:add-line"})}],Qt=[{label:"CSV",icon:e.jsx(b,{icon:"hugeicons:csv-02"})},{label:"PDF",icon:e.jsx(b,{icon:"hugeicons:pdf-02"})}];function es(){const{checkAbilities:t}=Ye(),{dialogTopUp:s,dialogRefund:n,historyDeposit:o}=F(),a=t?.("deposit-history-topup:create")&&t?.("deposit-history-refund:create"),i=t?.("deposit-history-refund:create"),c=t?.("deposit-history-topup:create");return e.jsx(Ke,{heading:"History Deposit",links:[{name:"Deposit",href:"#"},{name:"History Deposit",href:"#"}],action:e.jsxs(e.Fragment,{children:[e.jsx(C,{direction:"row",spacing:1,alignItems:"center",children:e.jsx(k,{ref:o.buttonGroupForm.anchorRef,children:a?e.jsxs(De,{variant:"contained","aria-label":"Top up and refund actions",children:[e.jsx(_,{size:"medium",variant:"contained",onClick:s.isOpen.onTrue,startIcon:e.jsx(b,{icon:"mingcute:add-line"}),children:"Top Up"}),e.jsx(_,{size:"medium",onClick:o.buttonGroupForm.isOpen.onToggle,children:e.jsx(b,{icon:"ion:md-arrow-dropdown"})})]}):c?e.jsx(_,{size:"medium",variant:"contained",onClick:s.isOpen.onTrue,startIcon:e.jsx(b,{icon:"mingcute:add-line"}),children:"Top Up"}):i?e.jsx(_,{size:"medium",variant:"contained",onClick:n.isOpen.onTrue,startIcon:e.jsx(b,{icon:"mingcute:add-line"}),children:"Refund"}):e.jsx(e.Fragment,{})})}),e.jsx(te,{anchorEl:o.buttonGroupPrint.anchorRef.current,open:o.buttonGroupPrint.isOpen.value,onClose:o.buttonGroupPrint.isOpen.onFalse,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{mt:1,borderRadius:1,minWidth:o.buttonGroupPrint.anchorRef.current?.offsetWidth||160}}},children:Qt.map(r=>e.jsx(N,{onClick:()=>{o.buttonGroupPrint.isOpen.onFalse()},children:e.jsxs(k,{display:"flex",alignItems:"center",gap:1,children:[r.icon,e.jsx(v,{variant:"subtitle2",children:r.label})]})},r.label))}),e.jsx(te,{anchorEl:o.buttonGroupForm.anchorRef.current,open:o.buttonGroupForm.isOpen.value,onClose:o.buttonGroupForm.isOpen.onFalse,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{mt:1,borderRadius:1,minWidth:o.buttonGroupForm.anchorRef.current?.offsetWidth||160}}},children:Jt.map(r=>e.jsx(N,{onClick:()=>{r.value==="refund"&&n.isOpen.onTrue(),o.buttonGroupForm.isOpen.onFalse()},children:e.jsxs(k,{display:"flex",alignItems:"center",gap:1,children:[r.icon,e.jsx(v,{variant:"subtitle2",children:r.label})]})},r.label))})]}),sx:{mb:{xs:3,md:5}}})}function ts(){const{showSweetDialog:t}=oe(),{dialogRefund:s,historyDeposit:n}=F(),o=me({resolver:he(qt),defaultValues:ze}),{reset:a,handleSubmit:i,formState:{isSubmitting:c,isDirty:r}}=o,u=()=>{s.isOpen.onFalse(),a(ze)},g=async m=>{const h=zt(m);await Bt(h).then(()=>{t({icon:"success",title:"Data saved successfully",description:"Saved successfully"}),n.setRefreshFlag(w=>w+1),u()}).catch(w=>{w instanceof ae&&Object.keys(w.validationErrors).forEach(R=>{o.setError(R,{type:"manual",message:w.validationErrors[R][0]})})})};return e.jsx(Z,{open:s.isOpen.value,fullWidth:!0,maxWidth:"sm",children:e.jsxs(pe,{methods:o,onSubmit:i(g),children:[e.jsx(J,{children:"Payment"}),e.jsx(Q,{sx:{overflow:"visible"},children:e.jsx(k,{sx:{pt:0,overflowY:"auto",overflowX:"hidden",maxHeight:I.dialog.maxHeight},children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{xs:12,children:e.jsx(kt,{row:!0,label:"Refund Method",name:"refund_method",sx:{pl:.2},options:Object.values(E).map(m=>({value:m,label:gt(m)}))})}),e.jsx(y,{xs:12,children:e.jsx(se,{size:"medium",debounceSearch:!0,name:"customer",label:"Customer",getOptionLabel:m=>m?.name,isOptionEqualToValue:(m,h)=>m?.id===h?.id,fetchFunction:async m=>(await ie({keyword:m,page:1})).data,renderOption:(m,h,{index:w})=>l.createElement("li",{...m,key:h.id??`${h.name}-${w}`},h.name)})}),e.jsx(y,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(z,{inputProps:{inputMode:"numeric"},fullWidth:!0,moneyFormat:!0,size:"medium",name:"amount",label:"Amount"})}),o.watch("refund_method")===E.bank_transfer&&e.jsxs(e.Fragment,{children:[e.jsx(y,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(se,{name:"bank",label:"Bank",size:"medium",debounceSearch:!0,getOptionLabel:m=>m?.name,isOptionEqualToValue:(m,h)=>m?.id===h?.id,fetchFunction:async m=>await ft({keyword:m})})}),e.jsx(y,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(z,{size:"medium",name:"bank_account_number",label:"Account Number"})}),e.jsx(y,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(z,{size:"medium",name:"bank_account_name",label:"Account Name"})}),e.jsx(y,{xs:12,display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsx(z,{size:"medium",name:"reference_number",label:"Reference Number"})})]})]})})}),e.jsxs(ee,{children:[e.jsx(_,{onClick:u,variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(L,{size:"medium",type:"submit",disabled:!r,variant:"contained",loading:c,children:"Process"})]})]})})}function ss(){const{showSweetDialog:t}=oe(),{dialogTopUp:s,dialogWaitingTopUpPayment:n,historyDeposit:o}=F(),a=D(!1),i=me({resolver:he(Yt),defaultValues:Be}),{reset:c,watch:r,setValue:u,getValues:g,handleSubmit:m,formState:{isSubmitting:h,isDirty:w,errors:R}}=i;l.useEffect(()=>{const x=Number(r("amount_receive").replace(/,/g,""))-Number(r("amount").replace(/,/g,""));u("amount_change",x.toString(),{shouldDirty:!0,shouldValidate:!0})},[r("amount_receive"),r("amount")]);const d=()=>{s.isOpen.onFalse(),c(Be)},T=async x=>{const H=At(x);await Mt(H).then(S=>{g("is_cash")===!1?(s.isOpen.onFalse(),n.setData({payment_id:S.id,store_payment_method_id:S.store_payment_method_id,expired_at:S.expired_at,va_number:S.va_number,qris_url:S.qris_url,status:S.status,amount:S.amount}),n.isOpen.onTrue()):(t({icon:"success",title:"Payment success",description:"Payment successfully completed"}),o.setRefreshFlag(M=>M+1)),d()}).catch(S=>{S instanceof ae&&Object.keys(S.validationErrors).forEach(M=>{i.setError(M,{type:"manual",message:S.validationErrors[M][0]})})})},p=x=>{a.onFalse(),x.group_code===W.cash?u("is_cash",!0):u("is_cash",!1),u("payment_method",{id:x.id,slug:{slug:x.slug,name:x.name},group_code:x.group_code},{shouldDirty:!0,shouldValidate:!0})},P=async x=>{x.payment_method?.message&&Ge.warning(x.payment_method?.message,{position:"top-center"})};return e.jsxs(Z,{open:s.isOpen.value,fullWidth:!0,maxWidth:"md",children:[e.jsxs(pe,{methods:i,onSubmit:m(T,P),children:[e.jsx(J,{children:"New Top Up"}),e.jsx(Q,{sx:{overflow:"visible"},children:e.jsxs(C,{spacing:3,sx:{overflowY:"auto",overflowX:"hidden",maxHeight:I.dialog.maxHeight},children:[e.jsx($,{variant:"outlined",sx:{p:2,overflow:"visible"},children:e.jsxs(C,{spacing:2,children:[e.jsx(v,{variant:"body2",sx:{color:"text.disabled"},children:"Select customer"}),e.jsx(se,{label:"Customer",size:"medium",name:"customer",debounceSearch:!0,getOptionLabel:x=>x?.name,isOptionEqualToValue:(x,H)=>x?.id===H?.id,fetchFunction:async x=>(await ie({keyword:x,page:1})).data,renderOption:(x,H,{index:S})=>l.createElement("li",{...x,key:H.id??`${H.name}-${S}`},H.name)})]})}),e.jsx($,{variant:"outlined",sx:{p:2,overflow:"visible"},onClick:a.onTrue,children:e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(C,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(b,{icon:"fluent:payment-28-regular",sx:{color:"text.disabled"}}),e.jsxs(k,{children:[e.jsx(v,{variant:"body2",sx:{color:"text.default"},children:"Payment Method"}),e.jsx(v,{variant:"subtitle1",sx:{color:"text.default"},children:g("payment_method").slug.name})]})]}),e.jsx(fe,{children:e.jsx(b,{icon:"oui:arrow-right",sx:{color:"text.disabled"}})})]})}),e.jsx($,{variant:"outlined",sx:{p:2,overflow:"visible"},children:e.jsxs(y,{container:!0,spacing:2,children:[e.jsx(y,{xs:12,children:e.jsx(v,{variant:"body2",sx:{color:"text.disabled"},children:"Nominal"})}),e.jsx(y,{xs:12,sm:i.watch("is_cash")?4:12,children:e.jsx(z,{inputProps:{inputMode:"numeric"},fullWidth:!0,moneyFormat:!0,size:"medium",name:"amount",label:"Amount"})}),i.watch("is_cash")&&e.jsxs(e.Fragment,{children:[e.jsx(y,{xs:12,sm:4,children:e.jsx(z,{fullWidth:!0,moneyFormat:!0,size:"medium",name:"amount_receive",label:"Amount Received",inputProps:{inputMode:"numeric"}})}),e.jsx(y,{xs:12,sm:4,children:e.jsx(z,{fullWidth:!0,moneyFormat:!0,size:"medium",name:"amount_change",label:"Amount to change",disabled:!0})})]})]})})]})}),e.jsxs(ee,{children:[e.jsx(_,{onClick:d,variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(L,{size:"medium",type:"submit",disabled:!w,variant:"contained",loading:h,children:"Process"})]})]}),e.jsx(os,{open:a.value,selectedData:r("payment_method"),onClose:a.onFalse,onSelect:x=>p(x)})]})}function os({open:t,onClose:s,selectedData:n,onSelect:o}){return e.jsxs(Z,{open:t,fullWidth:!0,maxWidth:"sm",children:[e.jsx(J,{children:"Payment Method"}),e.jsx(Q,{sx:{overflow:"visible"},children:e.jsx(C,{spacing:3,sx:{overflowY:"auto",overflowX:"hidden",maxHeight:I.dialog.maxHeight},children:Object.values(W).map((a,i)=>e.jsx(ns,{group_code:a,selectedData:n,onSelect:o},i))})}),e.jsx(ee,{children:e.jsx(_,{onClick:s,variant:"outlined",color:"inherit",children:"Cancel"})})]})}const ns=({group_code:t,onSelect:s,selectedData:n})=>{const o=xe(m=>m.activeStore),a=D(!0),i=D(!1),[c,r]=l.useState([]),u=()=>{a.onTrue(),Xe(o?.id??"",t).then(m=>{r(m.data)}).finally(()=>{a.onFalse()})};l.useEffect(()=>{u()},[o,t]);const g=m=>{const h=c.find(w=>w.id===m);h&&s(h)};return e.jsx($,{variant:"outlined",sx:{p:2,overflow:"visible",display:c.length===0?"none":""},children:t===W.cash||t===W.qris?e.jsx(Le,{loading:a.value,payment_methods:c,handleChange:g,selectedData:n}):e.jsxs(e.Fragment,{children:[e.jsxs(C,{direction:"row",alignItems:"center",justifyContent:"space-between",onClick:i.onToggle,children:[e.jsx(v,{variant:"subtitle2",color:"text.primary",children:bt(yt(t))}),e.jsx(fe,{children:e.jsx(b,{icon:"oui:arrow-down",sx:{color:"text.disabled"}})})]}),e.jsx(jt,{in:i.value,timeout:"auto",unmountOnExit:!0,children:e.jsx(Le,{loading:a.value,payment_methods:c,handleChange:g,selectedData:n})})]})})};function Le({loading:t,payment_methods:s,handleChange:n,selectedData:o}){return t?Array.from({length:2}).map((a,i)=>e.jsx(y,{xs:12,children:e.jsx(re,{variant:"rounded",sx:{width:"100%",height:40}})},i)):s.map((a,i)=>e.jsxs(wt,{variant:"outlined",sx:{p:1,mt:s.length>1?2:0,display:"flex",alignItems:"center"},onClick:()=>n(a.id),children:[e.jsx(Ot,{sx:{mr:1},value:a.id,checked:o?.id===a.id}),e.jsx(v,{variant:"subtitle1",children:a.name})]},i))}function as(){const t=xe(p=>p.activeStore),{showSweetDialog:s}=oe(),{historyDeposit:n,dialogWaitingTopUpPayment:o}=F(),a=D(!0),[i,c]=l.useState(I.site.intervalCheckPayment),[r,u]=l.useState(null),{countdownObj:g,setCountdown:m,startCountdown:h,stopCountDown:w}=Ht(0),R=async()=>{a.onTrue(),await Xe(t?.id??"","").then(p=>{const P=p.data.find(x=>x.id===o.data.store_payment_method_id);P&&u(P)}).finally(()=>{a.onFalse()})};l.useEffect(()=>{if(!o.isOpen.value)return;const p=o.data.expired_at-Math.floor(Date.now()/1e3);m(Math.max(0,p)),h(),R()},[o.isOpen.value,t]);const d=async()=>{await Ct(o.data.payment_id??"").then(p=>{o&&p.status===A.success&&(o.setData({...o.data,status:p.status}),s({icon:"success",title:"Payment success",description:"Payment successfully completed"}),n.setRefreshFlag(P=>P+1),w())}).finally(()=>{})};l.useEffect(()=>{o.data?.status===A.pending&&(c(i-1),i===0&&(c(I.site.intervalCheckPayment),d()))},[o.data,g.seconds]);const T=()=>{o.isOpen.onFalse()};return e.jsxs(Z,{open:o.isOpen.value,fullWidth:!0,maxWidth:"md",children:[e.jsx(J,{children:"Payment Top Up"}),e.jsx(Q,{sx:{overflow:"visible"},children:e.jsx(k,{sx:{overflowY:"auto",overflowX:"hidden",maxHeight:I.dialog.maxHeight},children:e.jsx(C,{spacing:3,children:a.value?e.jsxs(e.Fragment,{children:[e.jsx(re,{variant:"rounded",sx:{width:"100%",height:100}}),e.jsx(re,{variant:"rounded",sx:{width:"100%",height:200}})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{sx:{p:3},children:e.jsxs(C,{justifyContent:"space-between",alignItems:"start",direction:"row",children:[e.jsxs(k,{children:[e.jsx(q,{variant:"soft",sx:{mb:2},color:o.data.status===A.success&&"success"||o.data.status===A.pending&&"warning"||"default",children:o.data.status??"-"}),e.jsx(v,{variant:"body2",gutterBottom:!0,sx:{color:"text.secondary"},children:"Batas Akhir Pembayaran"}),e.jsx(v,{variant:"subtitle1",children:B(o.data.expired_at,ue.dateTime)})]}),o.data.status===A.pending&&e.jsxs(q,{variant:"soft",color:o.data.status===A.pending?"error":"info",children:[e.jsx(Dt,{sx:{width:14.67,height:14.67,mr:.5},src:`${I.site.basePath}/assets/icons/common/ic-loading-one.svg`}),`${Number(g.days)*24+Number(g.hours)}:${g.minutes}:${g.seconds}`]})]})}),e.jsx($,{sx:{p:3},children:e.jsxs(C,{spacing:3,children:[e.jsx(C,{justifyContent:"space-between",alignItems:"center",direction:"row",children:e.jsx(v,{variant:"subtitle1",children:r?.name})}),r?.group_code===W.va&&e.jsxs(k,{children:[e.jsx(v,{variant:"body2",gutterBottom:!0,sx:{color:"text.secondary"},children:"Nomor Virtual Account"}),e.jsx(v,{variant:"subtitle1",children:o.data.va_number})]}),e.jsx(Pt,{sx:{borderStyle:"dashed",bgcolor:"grey.200"}}),e.jsxs(C,{spacing:2,direction:"row",children:[r?.group_code===W.qris&&e.jsx(k,{width:"40%",children:e.jsx(vt,{width:"100%",src:o.data.qris_url??`${I.site.basePath}/assets/images/qrcode.png`})}),e.jsxs(k,{flex:1,children:[e.jsx(v,{variant:"body2",gutterBottom:!0,sx:{color:"text.secondary"},children:"Total Pembayaran"}),e.jsx(v,{variant:"subtitle1",children:`Rp. ${ne(Number(o.data.amount??"0"))}`})]})]}),r?.group_name===W.bank_transfer&&e.jsxs(C,{spacing:2,direction:"row",children:[e.jsx(_,{fullWidth:!0,size:"medium",variant:"contained",startIcon:e.jsx(b,{icon:"ic:baseline-whatsapp"}),children:"Share Via Whatsapp"}),e.jsx(_,{fullWidth:!0,size:"medium",variant:"contained",startIcon:e.jsx(b,{icon:"ic:baseline-qrcode"}),children:"Show Bracode"})]})]})})]})})})}),e.jsx(ee,{children:e.jsx(_,{onClick:T,variant:"outlined",color:"inherit",children:"Close"})})]})}function is(){return e.jsxs(qe,{maxWidth:"xl",children:[e.jsx(es,{}),e.jsx(Zt,{}),e.jsx(as,{}),e.jsx(ss,{}),e.jsx(ts,{})]})}function rs(){return e.jsx(Ke,{heading:"Customer Deposit",links:[{name:"Deposit",href:"#"},{name:"Customer Deposit",href:"#"}],sx:{mb:{xs:3,md:5}}})}const ce=[{id:"no",label:"No",width:"5%"},{id:"customer",label:"Customer",width:"55%"},{id:"balance",label:"Balance",width:"20%"},{id:"history",label:"History",width:"20%"}];function ls(){return e.jsx(ye,{children:e.jsx(X,{children:ce.map(t=>e.jsx(j,{align:t.align||"left",sortDirection:!1,sx:{width:t.width,minWidth:0},children:t.label},t.id))})})}function cs({no:t,row:s}){const{dialogHistory:n}=F();return e.jsxs(X,{hover:!0,children:[e.jsx(j,{sx:{whiteSpace:"nowrap"},children:t}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s.customer}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:`Rp. ${ne(s.balance)}`}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(fe,{onClick:()=>{n.isOpen.onTrue(),n.setData({id:s.id,name:s.customer})},children:e.jsx(b,{icon:"mdi:clipboard-text-history-outline"})})})]})}function ds({rows:t,status:s}){const{customerDeposit:n}=F();return e.jsx(je,{children:s==="loading"?e.jsx(V,{text:"loading ..",colspan:ce.length}):t.length===0?e.jsx(V,{text:"data not found",colspan:ce.length}):t.map((o,a)=>e.jsx(cs,{row:o,no:n.page*n.rowsPerPage+a+1},a))})}function us(){const{customerDeposit:t}=F(),s=(p,P)=>{t.setToolbar({...t.toolbar,[p]:P})},n=l.useRef(""),[o,a]=l.useState([]),[i,c]=l.useState(!1),r=async()=>{c(!0),await ie({keyword:n.current,page:1}).then(p=>a(p.data)).finally(()=>c(!1))},u=l.useCallback(p=>{p.key==="Enter"&&(p.preventDefault(),p.stopPropagation(),r())},[]),g=(p,P)=>{n.current=P,P===""&&r()};l.useEffect(()=>{r()},[]);const m=l.useRef(null),h=D(!1),w=D(!1),R=D(!1),d=async()=>{w.onTrue(),await Ae({file_type:"pdf"}).finally(()=>{w.onFalse()})},T=async()=>{R.onTrue(),await Ae({file_type:"xlsx"}).finally(()=>{R.onFalse()})};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{sx:{p:2.5},direction:"row",gap:2,children:[e.jsx(_t,{onChange:(p,P)=>{s("customer",P?{id:P.id,name:P.name}:null)},disableClearable:!1,isOptionEqualToValue:(p,P)=>p?.id===P?.id,getOptionLabel:p=>p?.name,renderInput:p=>e.jsx(Ve,{...p,label:"Customer",inputProps:{...p.inputProps,autoComplete:"off"},autoComplete:"off"}),options:o,loading:i,loadingText:"Sedang Mengambil Data...",popupIcon:i?e.jsx(Tt,{position:"end",children:e.jsx(b,{icon:"svg-spinners:8-dots-rotate",sx:{color:"text.disabled"}})}):"",onKeyDown:u,onInputChange:g,fullWidth:!0}),e.jsxs(De,{variant:"outlined","aria-label":"Print actions",color:"primary",ref:m,onClick:h.onToggle,children:[e.jsx(_,{size:"medium",startIcon:e.jsx(b,{icon:"hugeicons:printer"}),children:"Print"}),e.jsx(_,{size:"medium",children:e.jsx(b,{icon:"ion:md-arrow-dropdown"})})]})]}),e.jsxs(te,{open:h.value,anchorEl:m.current,onClose:h.onFalse,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{paper:{sx:{mt:1,borderRadius:1,minWidth:m.current?.offsetWidth||160}}},children:[e.jsx(N,{sx:{p:0},children:e.jsx(L,{disabled:!0,fullWidth:!0,size:"medium",type:"submit",variant:"contained",color:"info",sx:{height:"100%"},loading:w.value,startIcon:e.jsx(b,{icon:"mingcute:pdf-fill"}),onClick:d,children:e.jsx(v,{variant:"subtitle2",children:"Pdf"})})}),e.jsx(N,{sx:{p:0},children:e.jsx(L,{fullWidth:!0,size:"medium",type:"submit",variant:"contained",color:"info",sx:{height:"100%"},loading:R.value,startIcon:e.jsx(b,{icon:"ri:file-excel-2-fill"}),onClick:T,children:e.jsx(v,{variant:"subtitle2",children:"Excel"})})})]})]})}function ms(){const{customerDeposit:t}=F(),[s,n]=l.useState([]),[o,a]=l.useState(!1);l.useEffect(()=>{(async()=>(a(!0),await Pe("customer",{customerId:t.toolbar.customer?t.toolbar.customer.id:"",page:String(t.page+1),perPage:String(t.rowsPerPage)}).then(u=>{n(u.data),t.setTotal(u.total),t.setPage(u.current_page-1)}).catch(()=>{n([])}).finally(()=>{a(!1)})))()},[t.toolbar.customer,t.page,t.rowsPerPage,t.refreshFlag]);const i=(r,u)=>{t.setPage(u)},c=r=>{t.setRowsPerPage(parseInt(r.target.value,10)),t.setPage(0)};return e.jsxs($,{children:[e.jsx(us,{}),e.jsx(k,{sx:{position:"relative"},children:e.jsx(ge,{children:e.jsxs(we,{size:"medium",sx:{minWidth:0},children:[e.jsx(ls,{}),e.jsx(ds,{rows:s,status:o?"loading":"finish"})]})})}),e.jsx(be,{dense:!1,page:t.page,count:t.total,rowsPerPage:t.rowsPerPage,rowsPerPageOptions:[15,25,100],onPageChange:i,onRowsPerPageChange:c})]})}function hs({no:t,row:s}){return e.jsxs(X,{hover:!0,children:[e.jsx(j,{sx:{whiteSpace:"nowrap"},children:t}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s.customer}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:B(s.date,ue.date)}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s.paymentMethod}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:`Rp. ${ne(s.amount)}`}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(q,{variant:"soft",color:Ne(s.type),children:K(s.type)})}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:e.jsx(q,{variant:"soft",color:s.status==="Pending"&&"warning"||s.status==="Paid"&&"success"||s.status==="Success"&&"success"||s.status==="Failed"&&"error"||"default",children:s.status})})]})}const de=[{id:"no",label:"No",width:"10%"},{id:"customer",label:"Customer",width:"25%"},{id:"date",label:"Date",width:"15%"},{id:"paymentMethod",label:"Payment Method",width:"15%"},{id:"amount",label:"Amount",width:"15%"},{id:"type",label:"Type",width:"10%"},{id:"status",label:"Status",width:"10%"}];function ps(){return e.jsx(ye,{children:e.jsx(X,{children:de.map(t=>e.jsx(j,{align:t.align||"left",sortDirection:!1,sx:{width:t.width,minWidth:0},children:t.label},t.id))})})}function xs({rows:t,status:s}){const{dialogHistory:n}=F();return e.jsx(je,{children:s==="loading"?e.jsx(V,{text:"loading ..",colspan:de.length}):t.length===0?e.jsx(V,{text:"data not found",colspan:de.length}):t.map((o,a)=>e.jsx(hs,{row:o,no:n.page*n.rowsPerPage+a+1},a))})}function gs(){const{dialogHistory:t}=F(),s=(n,o)=>{t.setToolbar({...t.toolbar,[n]:o})};return e.jsx(C,{sx:{pb:2.5},children:e.jsx(y,{container:!0,spacing:3,children:e.jsx(y,{xs:12,sm:3,children:e.jsx(Ve,{select:!0,fullWidth:!0,onChange:n=>s("type",n.target.value),SelectProps:{native:!1,MenuProps:{PaperProps:{sx:{maxHeight:220}}},sx:{textTransform:"capitalize"}},label:"Deposit Type",value:t.toolbar.type,children:Object.values(Y).map((n,o)=>e.jsx(N,{value:n,children:K(n)},o))})})})})}function fs(){const{dialogHistory:t}=F(),[s,n]=l.useState([]),[o,a]=l.useState(!1);l.useEffect(()=>{(async()=>(a(!0),await Pe("history",{customerId:t.data.id,page:String(t.page+1),perPage:String(t.rowsPerPage),type:t.toolbar.type}).then(u=>{n(u.data),t.setTotal(u.total),t.setPage(u.current_page-1)}).catch(()=>{n([])}).finally(()=>{a(!1)})))()},[t.toolbar.type,t.page,t.rowsPerPage]);const i=(r,u)=>{t.setPage(u)},c=r=>{t.setRowsPerPage(parseInt(r.target.value,10)),t.setPage(0)};return e.jsxs($,{sx:{paddingTop:3},children:[e.jsx(gs,{}),e.jsx(k,{sx:{position:"relative"},children:e.jsx(ge,{children:e.jsxs(we,{size:"medium",sx:{minWidth:0},children:[e.jsx(ps,{}),e.jsx(xs,{rows:s,status:o?"loading":"finish"})]})})}),e.jsx(be,{dense:!1,page:t.page,count:t.total,rowsPerPage:t.rowsPerPage,rowsPerPageOptions:[15,25,100],onPageChange:i,onRowsPerPageChange:c})]})}function bs(){const{dialogHistory:t}=F();return e.jsxs(Z,{open:t.isOpen.value,fullWidth:!0,maxWidth:"md",children:[e.jsxs(J,{children:["Deposit History - ",t.data.name]}),e.jsx(Q,{sx:{overflow:"visible"},children:e.jsx(k,{sx:{pt:1,overflowY:"auto",overflowX:"hidden",maxHeight:I.dialog.maxHeight},children:e.jsx(fs,{})})}),e.jsx(ee,{children:e.jsx(_,{onClick:t.isOpen.onFalse,variant:"outlined",color:"inherit",children:"Close"})})]})}function ys(){return e.jsxs(qe,{maxWidth:"xl",children:[e.jsx(rs,{}),e.jsx(ms,{}),e.jsx(bs,{})]})}const js={title:`Transaction - Deposit - ${I.site.name}`};function Vs(){const{checkAbilities:t}=Ye(),s=[{value:"history-deposit",label:"History Deposit",show:t?.("deposit-history:view")},{value:"customer-deposit",label:"Customer Deposit",show:t?.("deposit-customer:view")}],n=s.find(c=>c.show),[o,a]=l.useState(n?.value??""),i=(c,r)=>{a(r)};return e.jsxs(e.Fragment,{children:[e.jsx(St,{children:e.jsxs("title",{children:[" ",js.title]})}),e.jsx(Wt,{children:e.jsxs(Et,{value:o,children:[e.jsx(Ft,{maxWidth:"xl",children:e.jsx(It,{onChange:i,children:s.map(c=>c.show&&e.jsx(Rt,{value:c.value,label:c.label},c.value))})}),e.jsx($e,{value:"history-deposit",sx:{p:0},children:e.jsx(is,{})}),e.jsx($e,{value:"customer-deposit",sx:{p:0},children:e.jsx(ys,{})})]})})]})}export{Vs as default};
