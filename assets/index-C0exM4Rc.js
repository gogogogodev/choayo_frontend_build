import{r as c,k as e,b8 as $,S as j,m as I,n as w,aw as k,bI as x,d2 as O,ag as N,gm as z,p as E,H as T,C as F}from"./index-DtP58muJ.js";import{C as W}from"./custom-breadcrumbs-C-JLSHAz.js";import{C as H}from"./component-hero-DU3aFnmA.js";import{b as G,e as b,s as L,k as V,T as X,l as K,h as Y,M as q,f as J,S as Q,m as U,n as Z,o as P,j as ee,D as ae,a as te,u as re,d as ne}from"./sortable.esm-CviT0FvC.js";import{S as se}from"./component-template-CnF69zjQ.js";import"./Card-DhhypByC.js";import"./CardHeader-DrP1HthL.js";import"./CardContent-CY1uG8Vi.js";const n={item:"dnd__item",itemWrap:"dnd__item__wrap",removeBtn:"dnd__remove__btn",state:{sorting:"state-sorting",dragging:"state-dragging",dragOverlay:"state-drag-overlay"}},oe=$(k)(()=>({flexShrink:0,display:"flex",transform:"translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1))",transformOrigin:"0 0",touchAction:"manipulation",[`&.${n.state.dragOverlay}`]:{zIndex:999}})),ie=$(j)(({theme:a})=>({...a.typography.h2,width:"100%",outline:"none",overflow:"hidden",textAlign:"center",position:"relative",padding:a.spacing(5),transformOrigin:"50% 50%",touchAction:"manipulation",WebkitTapHighlightColor:"transparent",borderRadius:a.shape.borderRadius*2,backgroundColor:a.vars.palette.common.white,transition:a.transitions.create(["box-shadow"]),color:x(a.vars.palette.text.disabledChannel,.24),border:`solid 1px ${x(a.vars.palette.grey["500Channel"],.16)}`,[O.dark]:{backgroundColor:a.vars.palette.grey[900]},"&:hover":{[`& .${n.removeBtn}`]:{opacity:.48}},[`& .${n.removeBtn}`]:{opacity:0,transition:a.transitions.create(["opacity"])},[`&.${n.state.dragOverlay}`]:{backdropFilter:"blur(6px)",boxShadow:a.customShadows.z20,color:a.vars.palette.text.primary,backgroundColor:x(a.vars.palette.common.whiteChannel,.48),[O.dark]:{backgroundColor:x(a.vars.palette.grey["900Channel"],.48)}},[`&.${n.state.dragging}`]:{opacity:.24,backgroundColor:x(a.vars.palette.grey["500Channel"],.12)}})),le=c.forwardRef(({item:a,stateProps:t,onRemove:i,sx:m,...s},l)=>{c.useEffect(()=>{if(t?.dragOverlay)return document.body.style.cursor="grabbing",()=>{document.body.style.cursor=""}},[t?.dragOverlay]);const g=n.itemWrap.concat(t?.dragOverlay&&` ${n.state.dragging}`||t?.dragOverlay&&` ${n.state.sorting}`||t?.dragOverlay&&` ${n.state.dragOverlay}`||""),u=n.item.concat(t?.dragging&&` ${n.state.dragging}`||t?.sorting&&` ${n.state.sorting}`||t?.dragOverlay&&` ${n.state.dragOverlay}`||"");return e.jsx(oe,{ref:l,component:"li",className:g,sx:{...!!t?.transition&&{transition:t.transition},...!!t?.transform&&{"--translate-x":`${Math.round(t.transform.x)}px`,"--translate-y":`${Math.round(t.transform.y)}px`,"--scale-x":`${t.transform.scaleX}`,"--scale-y":`${t.transform.scaleY}`}},children:e.jsxs(ie,{className:u,"data-cypress":"draggable-item",sx:m,...s,children:[a,e.jsxs(j,{direction:"row",sx:{top:6,right:6,zIndex:9,position:"absolute"},children:[e.jsx(I,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,size:"small",onClick:i,className:n.removeBtn,children:e.jsx(w,{icon:"solar:close-circle-bold"})}),e.jsx(I,{disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0,...t?.handleProps,...t?.listeners,size:"small",children:e.jsx(w,{icon:"nimbus:drag-dots"})})]})]})})}),D=c.memo(le),de={sideEffects:te({styles:{active:{opacity:"0.5"}}})};function C({itemCount:a=12,swap:t=!1,layout:i="grid"}){const m=[...Array(a)].map((r,o)=>o+1),[s,l]=c.useState(m),g=G(b(K),b(X),b(V,{coordinateGetter:L})),u=c.useRef(!0),f=Math.floor(Math.random()*200),[d,y]=c.useState(null),h=r=>s.indexOf(r),v=d?h(d):-1,A=t?U:Z,S=t?P:ee,R=t?({id:r,items:o,activeIndex:p,overIndex:M})=>S(o,p,M).indexOf(r):void 0;c.useEffect(()=>{d||(u.current=!0)},[d]);const _=()=>{l([...s,f])},B=r=>{const o=s.filter(p=>p!==r);l(o)};return e.jsxs(j,{alignItems:"flex-end",children:[e.jsx(N,{variant:"contained",onClick:_,children:"+ Add item"}),e.jsxs(Y,{id:"dnd-grid",sensors:g,collisionDetection:J,measuring:{droppable:{strategy:q.Always}},onDragStart:({active:r})=>{r&&y(r.id)},onDragEnd:({over:r})=>{if(y(null),r){const o=h(r.id);v!==o&&l(p=>S(p,v,o))}},children:[e.jsx(Q,{items:s,strategy:A,children:e.jsx(k,{component:"ul",sx:{py:3,gap:2,width:1,...i==="grid"&&{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"}},...i==="vertical"&&{display:"flex",flexDirection:"column"},...i==="horizontal"&&{display:"flex",overflowX:"auto",flexDirection:"row",[`& .${n.itemWrap}`]:{maxWidth:180}}},children:s.map((r,o)=>e.jsx(me,{id:r,index:o,getNewIndex:R,onRemove:()=>B(r)},r))})}),e.jsx(z,{children:e.jsx(ae,{dropAnimation:de,children:d?e.jsx(D,{item:s[v],stateProps:{dragOverlay:!0}}):null})})]})]})}const ce=a=>ne({...a,wasDragging:!0});function me({id:a,index:t,onRemove:i,getNewIndex:m}){const{isSorting:s,transform:l,listeners:g,attributes:u,isDragging:f,setNodeRef:d,transition:y,setActivatorNodeRef:h}=re({id:a,getNewIndex:m,animateLayoutChanges:ce});return e.jsx(D,{ref:d,item:a,"data-id":a,"data-index":t,onRemove:i,stateProps:{listeners:g,transform:l,transition:y,sorting:s,dragging:f,dragOverlay:f,handleProps:{ref:h}},...u})}function ge(){const a=[{name:"Grid",component:e.jsx(C,{swap:!0})},{name:"Vertical",component:e.jsx(C,{layout:"vertical",itemCount:4})},{name:"Horizontal",component:e.jsx(C,{layout:"horizontal",itemCount:3})}];return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx(W,{heading:"Dnd",links:[{name:"Components",href:E.components},{name:"Dnd"}],moreLink:["https://docs.dndkit.com/"]})}),e.jsx(se,{data:a})]})}const ue={title:`Dnd | Components - ${F.site.name}`};function je(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsxs("title",{children:[" ",ue.title]})}),e.jsx(ge,{})]})}export{je as default};
