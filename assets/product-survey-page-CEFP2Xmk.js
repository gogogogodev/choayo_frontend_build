import{c as B,f as oe,k as e,c6 as ne,dj as re,c8 as ie,aw as x,C as H,bZ as le,ag as O,p as A,g as V,t as W,i9 as I,r as i,cG as g,S as f,F as z,aF as k,aU as ce,cB as de,ay as G,I as N,n as F,L as ue,aI as Q,aC as U,cH as Y,ia as q,az as K,aE as $,H as he,it as xe,c9 as pe}from"./index-DtP58muJ.js";import{u as p,T as M,a as X,P as me,b as je,c as ge}from"./schemas-7iZHoANT.js";import{k as Se}from"./index.esm-DW6kxK9G.js";import{T as Z}from"./table-pagination-custom-DoMFqUCQ.js";import{a as J,b as y,c as ee,T as te}from"./TableRow-BeGZSEnl.js";import{T as u}from"./TableCell-BYy3h6md.js";import{T as S}from"./table-body-rowinfo-3iCgRhmq.js";import{C as se}from"./Card-DhhypByC.js";import{C as ae}from"./custom-breadcrumbs-C-JLSHAz.js";import{T as fe,a as ye,b as L}from"./TabPanel-CcPv7mqK.js";import"./errors-wZ747Yys.js";import"./TablePagination-DcwzPYld.js";import"./LastPage-CTPAXkYQ.js";import"./FormControlLabel-aYt4PlDo.js";function be(){const s=B(),{openDialogQR:t}=p(),o=oe(!1),n=()=>{t.onFalse()},r=async a=>{a.length>0&&(o.onTrue(),s.push(A.dashboard.survey.product_survey+"/"+a[0].rawValue),n())};return e.jsxs(ne,{open:t.value,fullWidth:!0,maxWidth:"sm",children:[e.jsx(re,{children:"Scan QR"}),e.jsx(ie,{sx:{overflow:"visible"},children:e.jsx(x,{sx:{pt:1,overflowY:"auto",overflowX:"hidden",maxHeight:H.dialog.maxHeight},children:e.jsx(Se,{allowMultiple:!0,paused:o.value,onScan:a=>r(a)})})}),e.jsx(le,{children:e.jsx(O,{onClick:n,variant:"outlined",color:"inherit",children:"Cancel"})})]})}function ve(){const{productToSurveySearch:s,updateProductToSurveySearch:t}=p(),o=V({resolver:W(X),defaultValues:M}),{control:n,reset:r,handleSubmit:a}=o,c=I({control:n,name:"status"}),m=I({control:n,name:"keyword"});i.useEffect(()=>{r({keyword:s?.keyword,status:{id:s.status,name:g(s.status)}})},[s]),i.useEffect(()=>{s.status!==c.id&&t({...s,status:c.id})},[c,s]),i.useEffect(()=>{const d=setTimeout(()=>{m===""&&t({...s,keyword:""})},300);return()=>clearTimeout(d)},[m]);const h=async d=>{t({...s,keyword:d.keyword})};return e.jsx(f,{sx:{p:2.5},children:e.jsxs(z,{methods:o,onSubmit:a(h),children:[e.jsx("button",{style:{display:"none"},type:"submit"}),e.jsxs(k,{container:!0,spacing:2,children:[e.jsx(k,{xs:12,lg:3,children:e.jsx(ce,{label:"Status",name:"status",getOptionKey:d=>d.id,getOptionLabel:d=>d.name,isOptionEqualToValue:(d,b)=>d.id===b.id,options:Object.values(de).map(d=>({id:d,name:g(d)}))})}),e.jsx(k,{xs:12,lg:9,children:e.jsx(G,{size:"medium",name:"keyword",tooltipTitle:"press enter",placeholder:"Search...",InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(F,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})]})]})})}const E=[{id:"order_no",label:"Order No",width:"10%"},{id:"order_date",label:"Date",width:"10%"},{id:"customer",label:"Customer",width:"20%"},{id:"product_name",label:"Product",width:"15%"},{id:"brand",label:"Brand",width:"15%"},{id:"color",label:"Color",width:"15%"},{id:"status",label:"Status",width:"15%"}];function we(){return e.jsx(J,{children:e.jsx(y,{children:E.map(s=>e.jsx(u,{align:s.align||"left",sortDirection:!1,sx:{width:s.width,minWidth:0},children:s.label},s.id))})})}function Te({no:s,row:t}){const o=B(),n=r=>{o.push(A.dashboard.survey.product_survey+"/"+r)};return e.jsxs(y,{hover:!0,onClick:()=>n(t.order_product_id),sx:{cursor:"pointer"},children:[e.jsx(u,{sx:{whiteSpace:"nowrap"},children:e.jsx(ue,{color:"inherit",underline:"always",children:t.order_no})}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:Q(t.order_date)}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:e.jsxs(f,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(x,{component:"span",sx:{color:"text.default"},children:t.customer_name}),e.jsx(x,{component:"span",sx:{color:"text.disabled"},children:t.customer_email}),e.jsx(x,{component:"span",sx:{color:"text.disabled"},children:t.customer_phone})]})}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.product_name}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.brand===""?"-":t.brand}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.color===""?"-":t.color}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:e.jsx(U,{variant:"soft",color:Y(t.status),children:g(t.status)})})]})}function Pe({rows:s,status:t}){const{page:o,rowsPerPage:n}=p();return e.jsx(ee,{children:t==="loading"?e.jsx(S,{colspan:E.length,text:"loading .."}):s.length===0?e.jsx(S,{colspan:E.length,text:"data not found"}):s.map((r,a)=>e.jsx(Te,{row:r,no:(o-1)*n+a+1},a))})}function Ce(){const{productToSurveySearch:s,refreshFlag:t,updatePage:o,updateRowsPerPage:n}=p(),r=q(l=>l.activeStore),[a,c]=i.useState(0),[m,h]=i.useState(0),[d,b]=i.useState(15),[v,w]=i.useState([]),[T,j]=i.useState(!1),P=async()=>{j(!0),await me({keyword:s.keyword,status:s.status,page:a+1}).then(l=>{w(l.data),h(l.total),c(l.current_page-1),o(l.current_page),n(d)}).finally(()=>{j(!1)})};i.useEffect(()=>{P()},[s.keyword,s.status,r,t,a]);const C=(l,R)=>{c(R)},_=l=>{c(0)};return e.jsxs(se,{children:[e.jsx(ve,{}),e.jsx(x,{sx:{position:"relative"},children:e.jsx(K,{children:e.jsxs(te,{size:"medium",sx:{minWidth:0},children:[e.jsx(we,{}),e.jsx(Pe,{rows:v,status:T?"loading":"finish"})]})})}),e.jsx(Z,{dense:!1,page:a,count:m,rowsPerPage:15,rowsPerPageOptions:[15,25,100],onPageChange:C,onRowsPerPageChange:_})]})}function _e(){const{openDialogQR:s}=p();return e.jsx(ae,{heading:"Product To Surveyy",links:[{name:"Survey",href:"#"},{name:"Product To Survey",href:"#"}],action:e.jsx(O,{size:"medium",variant:"contained",onClick:s.onTrue,startIcon:e.jsx(F,{icon:"streamline-sharp:qr-code"}),children:"Scan"}),sx:{mb:{xs:3,md:5}}})}function Re(){return e.jsxs($,{maxWidth:"xl",children:[e.jsx(_e,{}),e.jsx(Ce,{}),e.jsx(be,{})]})}function ke(){const{openDialogQR:s}=p();return e.jsx(ae,{heading:"Recent Surveyed Product",links:[{name:"Survey",href:"#"},{name:"Recent Surveyed Product",href:"#"}],sx:{mb:{xs:3,md:5}}})}function Ee(){const{keyword:s,updateKeyword:t}=p(),o=V({resolver:W(X),defaultValues:M}),{watch:n,reset:r,handleSubmit:a}=o;i.useEffect(()=>{r({keyword:s})},[s,r]);const c=n();i.useEffect(()=>{const h=setTimeout(()=>{c.keyword===""&&t("")},300);return()=>clearTimeout(h)},[c.keyword,t]);const m=async h=>{t(h.keyword)};return e.jsx(f,{sx:{p:2.5},children:e.jsx(z,{methods:o,onSubmit:a(m),children:e.jsx(G,{size:"medium",name:"keyword",tooltipTitle:"press enter",placeholder:"Search color...",InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(F,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})})}const D=[{id:"order_no",label:"Order No",width:"10%"},{id:"order_date",label:"Date",width:"10%"},{id:"customer",label:"Customer",width:"20%"},{id:"product_name",label:"Product",width:"15%"},{id:"brand",label:"Brand",width:"15%"},{id:"color",label:"Color",width:"15%"},{id:"status",label:"Status",width:"15%"}];function De(){return e.jsx(J,{children:e.jsx(y,{children:D.map(s=>e.jsx(u,{align:s.align||"left",sortDirection:!1,sx:{width:s.width,minWidth:0},children:s.label},s.id))})})}function Be({no:s,row:t}){B();const o=n=>{};return e.jsxs(y,{hover:!0,onClick:()=>o(t.order_product_id),sx:{cursor:"pointer"},children:[e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.order_no}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:Q(t.order_date)}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:e.jsxs(f,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(x,{component:"span",sx:{color:"text.default"},children:t.customer_name}),e.jsx(x,{component:"span",sx:{color:"text.disabled"},children:t.customer_email}),e.jsx(x,{component:"span",sx:{color:"text.disabled"},children:t.customer_phone})]})}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.product_name}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.brand===""?"-":t.brand}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:t.color===""?"-":t.color}),e.jsx(u,{sx:{whiteSpace:"nowrap"},children:e.jsx(U,{variant:"soft",color:Y(t.status),children:g(t.status)})})]})}function Fe({rows:s,status:t}){const{page:o,rowsPerPage:n}=p();return e.jsx(ee,{children:t==="loading"?e.jsx(S,{colspan:D.length,text:"loading .."}):s.length===0?e.jsx(S,{colspan:D.length,text:"data not found"}):s.map((r,a)=>e.jsx(Be,{row:r,no:(o-1)*n+a+1},a))})}function Ie(){const{keyword:s,refreshFlag:t,updatePage:o,updateRowsPerPage:n}=p(),r=q(l=>l.activeStore),[a,c]=i.useState(0),[m,h]=i.useState(0),[d,b]=i.useState(15),[v,w]=i.useState([]),[T,j]=i.useState(!1),P=async()=>{j(!0),await je({keyword:s,page:a+1}).then(l=>{w(l.data),h(l.total),c(l.current_page-1),o(l.current_page),n(d)}).finally(()=>{j(!1)})};i.useEffect(()=>{P()},[s,t,r,a]);const C=(l,R)=>{c(R)},_=l=>{c(0)};return e.jsxs(se,{children:[e.jsx(Ee,{}),e.jsx(x,{sx:{position:"relative"},children:e.jsx(K,{children:e.jsxs(te,{size:"medium",sx:{minWidth:0},children:[e.jsx(De,{}),e.jsx(Fe,{rows:v,status:T?"loading":"finish"})]})})}),e.jsx(Z,{dense:!1,page:a,count:m,rowsPerPage:15,rowsPerPageOptions:[15,25,100],onPageChange:C,onRowsPerPageChange:_})]})}function Le(){return e.jsxs($,{maxWidth:"xl",children:[e.jsx(ke,{}),e.jsx(Ie,{})]})}const He={title:`Survey - Product Survey - ${H.site.name}`};function Xe(){const s=[{value:"to-survey",label:"Product to survey",show:!0},{value:"recent-survey",label:"Recent surveyed product",show:!0}],t=s.find(a=>a.show),[o,n]=i.useState(t?.value??""),r=(a,c)=>{n(c)};return e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsxs("title",{children:[" ",He.title]})}),e.jsx(ge,{children:e.jsxs(fe,{value:o,children:[e.jsx(xe,{maxWidth:"xl",children:e.jsx(ye,{onChange:r,children:s.map(a=>a.show&&e.jsx(pe,{value:a.value,label:a.label},a.value))})}),e.jsx(L,{value:"to-survey",sx:{p:0},children:e.jsx(Re,{})}),e.jsx(L,{value:"recent-survey",sx:{p:0},children:e.jsx(Le,{})})]})})]})}export{Xe as default};
