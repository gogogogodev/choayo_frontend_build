import{aM as D,r as e,k as s,aU as R,I as E,o as A,n as k}from"./index-CtazL8yi.js";function K(l){const{showEnter:n,refreshTrigger:u,debounceSearch:f,fetchFunction:y,name:g,firstInit:h,onSelect:m,loading:c,dependencyArray:i,...a}=l,{setValue:C,formState:{defaultValues:F}}=D(),[x,P]=e.useState([]),[p,S]=e.useState(""),[d,I]=e.useState(!1),[T,b]=e.useState([]),o=t=>{I(!0),y(t??p).then(r=>b(r)).finally(()=>I(!1))};e.useEffect(()=>{i&&P(t=>t!==i?i:t)},[i]),e.useEffect(()=>{if(f){const t=setTimeout(()=>{o()},500);return()=>clearTimeout(t)}},[p]),e.useEffect(()=>{u&&u>0&&o()},[u]),e.useEffect(()=>{x&&o()},[...x]),e.useEffect(()=>{h&&o()},[h]);const j=e.useCallback(t=>{t.key==="Enter"&&(t.stopPropagation(),t.preventDefault(),o())},[p]),v=t=>{t.stopPropagation(),t.preventDefault(),o()};return s.jsx(R,{...a,options:T,onInputChange:t=>{t?.target?.value===""&&!f&&o(""),S(t?.target?.value||"")},onChange:a.onChange?a.onChange:(t,r)=>{C(g,r,{shouldValidate:!0,shouldDirty:!0}),m&&m(r)},name:g,onKeyDown:j,loading:d||c,loadingText:"Sedang Mengambil Data...",noOptionsText:"Tidak Ada Data | Ketik Kemudian Tekan Enter",sx:n?{"& .MuiAutocomplete-popupIndicator":{transform:"none"}}:{...a.sx},slotProps:{...l.slotProps,popupIndicator:{disableRipple:n,disableFocusRipple:n,disableTouchRipple:n,...l.slotProps?.popupIndicator}},popupIcon:d||c||n?n?s.jsx(E,{position:"end",children:s.jsx(A,{size:"small",variant:"soft",color:"inherit",loadingPosition:"start",onClick:v,loading:d||c,startIcon:s.jsx(k,{icon:"eva:search-fill"}),children:"search"})}):s.jsx(E,{position:"end",children:s.jsx(k,{icon:"svg-spinners:8-dots-rotate",sx:{color:"text.disabled"}})}):a.popupIcon})}export{K as R};
