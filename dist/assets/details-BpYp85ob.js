import{f as w,k as t,aw as p,aL as k,S as d,l as m,aI as I,bE as L,ag as v,n as a,cP as y,R as u,dg as g,m as P,o as E,cQ as F,cd as B,cc as $,r as f,aE as b,p as h,ax as D,bC as T,aY as U,dD as G,as as S,H as W,C as A}from"./index-DL1FC2Xw.js";import{u as O}from"./use-params-Ck7vsunK.js";import{b as R}from"./blog-BVUlPylH.js";import{P as H,a as M}from"./post-comment-form-CRt2unnc.js";import{c as z}from"./format-number-CnUv9gu0.js";import{b as N,c as _}from"./post-skeleton-DGYW-BLY.js";import{M as Q}from"./markdown-CHRWPvcH.js";import{E as V}from"./empty-content-Cjr2GcXL.js";import{P as Y}from"./Pagination-BhlVSDxW.js";import{F as q}from"./FormControlLabel-RF8C1zCS.js";import{A as J}from"./AvatarGroup-DHkVtgj9.js";import"./html-to-markdown-C60JWNql.js";import"./index-DCopXJUS.js";import"./index-CYenwyVg.js";import"./fields-CF4iu1MC.js";import"./Rating-B4A3Yvck.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-CeFV86ab.js";import"./rhf-radio-group-c3xmrwMe.js";import"./RadioGroup-DjJiUtpj.js";import"./FormGroup-dr7_GDnD.js";import"./country-select-C_VDc9o1.js";import"./rhf-switch-D1cE4SqJ.js";import"./rhf-checkbox-DHrzNFCH.js";import"./rhf-upload-CDPkY_M8.js";import"./upload-zFEN7YNi.js";import"./index-Buzb-ijE.js";import"./placeholder-CUueKP83.js";import"./preview-multi-file-IiDRFFAI.js";import"./upload-avatar-DX55zYUp.js";import"./rhf-date-picker-CcRSy6lj.js";import"./DatePicker-x3rEWLr9.js";import"./ListItem-ByRhTH_M.js";import"./MobileDateTimePicker-DRzd3izO.js";import"./schema-helper-CLblsXWr.js";import"./Zoom-_X9IkYnu.js";import"./Fab-BOYn_fVU.js";import"./Card-x9v4l8Wx.js";import"./CardHeader-bsWkR9QZ.js";import"./Skeleton-M-yixhCy.js";import"./LastPage-CNSkhtZT.js";function C({name:s,avatarUrl:r,message:i,tagUser:o,postedAt:n,hasReply:l}){const e=w();return t.jsxs(p,{sx:{pt:3,display:"flex",position:"relative",...l&&{pl:8}},children:[t.jsx(k,{alt:s,src:r,sx:{mr:2,width:48,height:48}}),t.jsxs(d,{flexGrow:1,sx:{pb:3,borderBottom:j=>`solid 1px ${j.vars.palette.divider}`},children:[t.jsx(m,{variant:"subtitle2",sx:{mb:.5},children:s}),t.jsx(m,{variant:"caption",sx:{color:"text.disabled"},children:I(n)}),t.jsxs(m,{variant:"body2",sx:{mt:1},children:[o&&t.jsxs(p,{component:"strong",sx:{mr:.5},children:["@",o]}),i]}),e.value&&t.jsx(p,{sx:{mt:2},children:t.jsx(L,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment..."})})]}),!l&&t.jsx(v,{size:"small",color:e.value?"primary":"inherit",startIcon:t.jsx(a,{icon:"solar:pen-bold",width:16}),onClick:e.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}function K({comments:s=[]}){return t.jsxs(t.Fragment,{children:[s.map(r=>{const i=!!r.replyComment.length;return t.jsxs(p,{children:[t.jsx(C,{name:r.name,message:r.message,postedAt:r.postedAt,avatarUrl:r.avatarUrl}),i&&r.replyComment.map(o=>{const n=r.users.find(l=>l.id===o.userId);return t.jsx(C,{name:n?.name||"",message:o.message,postedAt:o.postedAt,avatarUrl:n?.avatarUrl||"",tagUser:o.tagUser,hasReply:!0},o.id)})]},r.id)}),t.jsx(Y,{count:8,sx:{my:{xs:5,md:8},mx:"auto"}})]})}function X({publish:s,backLink:r,editLink:i,liveLink:o,publishOptions:n,onChangePublish:l,sx:e,...j}){const x=y();return t.jsxs(t.Fragment,{children:[t.jsxs(d,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...e},...j,children:[t.jsx(v,{component:u,href:r,startIcon:t.jsx(a,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),t.jsx(p,{sx:{flexGrow:1}}),s==="published"&&t.jsx(g,{title:"Go Live",children:t.jsx(P,{component:u,href:o,children:t.jsx(a,{icon:"eva:external-link-fill"})})}),t.jsx(g,{title:"Edit",children:t.jsx(P,{component:u,href:i,children:t.jsx(a,{icon:"solar:pen-bold"})})}),t.jsx(E,{color:"inherit",variant:"contained",loading:!s,loadingIndicator:"Loadingâ€¦",endIcon:t.jsx(a,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:s})]}),t.jsx(F,{open:x.open,anchorEl:x.anchorEl,onClose:x.onClose,slotProps:{arrow:{placement:"top-right"}},children:t.jsx(B,{children:n.map(c=>t.jsxs($,{selected:c.value===s,onClick:()=>{x.onClose(),l(c.value)},children:[c.value==="published"&&t.jsx(a,{icon:"eva:cloud-upload-fill"}),c.value==="draft"&&t.jsx(a,{icon:"solar:file-text-bold"}),c.label]},c.value))})})]})}function Z({post:s,loading:r,error:i}){const[o,n]=f.useState(""),l=f.useCallback(e=>{n(e)},[]);return f.useEffect(()=>{s&&n(s?.publish)},[s]),r?t.jsx(b,{maxWidth:!1,disablePadding:!0,children:t.jsx(N,{})}):i?t.jsx(b,{maxWidth:!1,children:t.jsx(V,{filled:!0,title:"Post not found!",action:t.jsx(v,{component:u,href:h.dashboard.post.root,startIcon:t.jsx(a,{width:16,icon:"eva:arrow-ios-back-fill"}),sx:{mt:3},children:"Back to list"}),sx:{py:10,height:"auto",flexGrow:"unset"}})}):t.jsxs(b,{maxWidth:!1,disablePadding:!0,children:[t.jsx(D,{maxWidth:!1,sx:{px:{sm:5}},children:t.jsx(X,{backLink:h.dashboard.post.root,editLink:h.dashboard.post.edit(`${s?.title}`),liveLink:h.post.details(`${s?.title}`),publish:`${o}`,onChangePublish:l,publishOptions:_})}),t.jsx(H,{title:`${s?.title}`,coverUrl:`${s?.coverUrl}`}),t.jsxs(d,{sx:{pb:5,mx:"auto",maxWidth:720,mt:{xs:5,md:10},px:{xs:2,sm:3}},children:[t.jsx(m,{variant:"subtitle1",children:s?.description}),t.jsx(Q,{children:s?.content}),t.jsxs(d,{spacing:3,sx:{py:3,borderTop:e=>`dashed 1px ${e.vars.palette.divider}`,borderBottom:e=>`dashed 1px ${e.vars.palette.divider}`},children:[t.jsx(d,{direction:"row",flexWrap:"wrap",spacing:1,children:s?.tags.map(e=>t.jsx(T,{label:e,variant:"soft"},e))}),t.jsxs(d,{direction:"row",alignItems:"center",children:[t.jsx(q,{control:t.jsx(U,{defaultChecked:!0,size:"small",color:"error",icon:t.jsx(a,{icon:"solar:heart-bold"}),checkedIcon:t.jsx(a,{icon:"solar:heart-bold"}),inputProps:{id:"favorite-checkbox","aria-label":"Favorite checkbox"}}),label:z(s?.totalFavorites),sx:{mr:1}}),t.jsx(J,{sx:{[`& .${G.avatar}`]:{width:32,height:32}},children:s?.favoritePerson.map(e=>t.jsx(k,{alt:e.name,src:e.avatarUrl},e.name))})]})]}),t.jsxs(d,{direction:"row",sx:{mb:3,mt:5},children:[t.jsx(m,{variant:"h4",children:"Comments"}),t.jsxs(m,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",s?.comments.length,")"]})]}),t.jsx(M,{}),t.jsx(S,{sx:{mt:5,mb:2}}),t.jsx(K,{comments:s?.comments??[]})]})]})}const tt={title:`Post details | Dashboard - ${A.site.name}`};function Mt(){const{title:s=""}=O(),{post:r,postLoading:i,postError:o}=R(s);return t.jsxs(t.Fragment,{children:[t.jsx(W,{children:t.jsxs("title",{children:[" ",tt.title]})}),t.jsx(Z,{post:r,loading:i,error:o})]})}export{Mt as default};
