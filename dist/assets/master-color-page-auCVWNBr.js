import{f as z,r as a,k as e,d as R,ag as B,n as P,q as V,v as F,i7 as M,g as A,t as I,c6 as N,F as H,dj as L,c8 as _,aF as y,ay as T,bZ as q,o as G,S as K,I as W,cP as X,cD as $,m as Q,cQ as Z,cd as J,cc as D,aw as U,az as Y,H as ee,C as oe,aE as se}from"./index-DL1FC2Xw.js";import{C as te}from"./custom-breadcrumbs-nJImJlyu.js";import{C as ae}from"./errors-wZ747Yys.js";import{F as ne}from"./form-caption-DFg98poz.js";import{C as re,a as ie,b as le}from"./functions-DtJQT_hg.js";import{T as ce}from"./table-pagination-custom-D4L-eNU7.js";import{a as de,b as v,c as ue,T as me}from"./TableRow-Dnp-F93Q.js";import{T as j}from"./TableCell--CDe426o.js";import{C as he}from"./Card-x9v4l8Wx.js";import"./TablePagination-Cu0e8Dmj.js";import"./LastPage-CNSkhtZT.js";import"./FormControlLabel-RF8C1zCS.js";const O=a.createContext(void 0),w=()=>{const s=a.useContext(O);if(s===void 0)throw new Error("useContextPage must be used within a PageContext.Provider");return s},xe=({children:s})=>{const o=z(),[t,l]=a.useState(0),n=()=>l(u=>u+1),[r,c]=a.useState(""),d=u=>{c(u)},[i,S]=a.useState(null),b=u=>{S(u)},[x,g]=a.useState(0),p=u=>{g(u)},[f,h]=a.useState(0),C=u=>{h(u)},m=a.useMemo(()=>({isDialogFormOpen:o,refreshFlag:t,triggerRefresh:n,keyword:r,updateKeyword:d,colorFormValues:i,updateColorFormValues:b,page:x,updatePage:p,rowsPerPage:f,updateRowsPerPage:C}),[o,t,r,i,x,f]);return e.jsx(O.Provider,{value:m,children:s})};function ge(){const{checkAbilities:s}=R(),{isDialogFormOpen:o}=w();return e.jsx(te,{heading:"Color",links:[{name:"Master",href:"#"},{name:"Color",href:"#"}],action:s?.("color:create")&&e.jsx(B,{size:"medium",variant:"contained",onClick:o.onTrue,startIcon:e.jsx(P,{icon:"mingcute:add-line"}),children:"New Color"}),sx:{mb:{xs:3,md:5}}})}const pe=V({id:F().nullable(),name:F().min(1,{message:"Name is required!"}),hex:F().min(1,{message:"HEX is required!"})}),k={id:null,name:"",hex:""},fe=V({keyword:F()}),Ce={keyword:""};function je(){const{showSweetDialog:s}=M(),{isDialogFormOpen:o,colorFormValues:t,updateColorFormValues:l,triggerRefresh:n}=w(),[r,c]=a.useState("New Color"),d=A({resolver:I(pe),defaultValues:k}),{reset:i,handleSubmit:S,formState:{isSubmitting:b,isDirty:x}}=d;a.useEffect(()=>{t?(c("Edit Color"),i({id:t.id,name:t.name,hex:t.hex})):c("New Color")},[t]);const g=()=>{i(k),l(null),o.onFalse()},p=async f=>{await re(f).then(()=>{g(),n(),s({icon:"success",title:"Data saved successfully",description:"Saved successfully"})}).catch(h=>{h instanceof ae&&Object.keys(h.validationErrors).forEach(C=>{d.setError(C,{type:"manual",message:h.validationErrors[C][0]})})})};return e.jsx(N,{open:o.value,children:e.jsxs(H,{methods:d,onSubmit:S(p),children:[e.jsx(L,{children:r}),e.jsx(_,{sx:{overflow:"visible"},children:e.jsxs(y,{container:!0,spacing:3,children:[e.jsx(y,{xs:12,children:e.jsx(T,{name:"name",label:"Name",size:"medium"})}),e.jsx(y,{xs:12,children:e.jsx(T,{name:"hex",label:"HEX",size:"medium"})}),e.jsx(y,{xs:12,children:e.jsx(ne,{caption:"Fill in the form above and correct it again correctly"})})]})}),e.jsxs(q,{children:[e.jsx(B,{onClick:g,variant:"outlined",color:"inherit",children:"Cancel"}),e.jsx(G,{size:"medium",type:"submit",disabled:!x,variant:"contained",loading:b,children:"Save"})]})]})})}function we(){const{keyword:s,updateKeyword:o}=w(),t=A({resolver:I(fe),defaultValues:Ce}),{watch:l,reset:n,handleSubmit:r}=t;a.useEffect(()=>{n({keyword:s})},[s,n]);const c=l();a.useEffect(()=>{const i=setTimeout(()=>{c.keyword===""&&o("")},300);return()=>clearTimeout(i)},[c.keyword,o]);const d=async i=>{o(i.keyword)};return e.jsx(K,{sx:{p:2.5},children:e.jsx(H,{methods:t,onSubmit:r(d),children:e.jsx(T,{size:"medium",name:"keyword",tooltipTitle:"press enter",placeholder:"Search color...",InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(P,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})})}function be(){const s=[{id:"no",label:"No",width:10},{id:"color",label:"Color",width:100},{id:"hex",label:"HEX",width:200},{id:"",width:10}];return e.jsx(de,{children:e.jsx(v,{children:s.map(o=>e.jsx(j,{align:o.align||"left",sortDirection:!1,sx:{width:o.width,minWidth:0},children:o.label},o.id))})})}function Pe({no:s,row:o}){const t=X(),{showConfirmDialog:l}=$(),{checkAbilities:n,checkAbilitiesMultiple:r}=R(),{isDialogFormOpen:c,updateColorFormValues:d,triggerRefresh:i}=w();return e.jsxs(v,{hover:!0,children:[e.jsx(j,{sx:{whiteSpace:"nowrap"},children:s}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:o.name}),e.jsx(j,{sx:{whiteSpace:"nowrap"},children:`${o.hex} - ${o.name}`}),e.jsxs(j,{sx:{whiteSpace:"nowrap"},align:"right",children:[r?.(["color:delete","color:edit"])&&e.jsx(Q,{color:t.open?"inherit":"default",onClick:t.onOpen,children:e.jsx(P,{icon:"eva:more-vertical-fill"})}),e.jsx(Z,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(J,{children:[n?.("color:delete")&&e.jsxs(D,{onClick:()=>{t.onClose(),l({title:"Delete Color",description:"Anda yakin? Data akan dihapus permanent.",confirmBtnText:"Delete",onConfirm:async()=>{await ie(o.id),i()}})},sx:{color:"error.main"},children:[e.jsx(P,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),n?.("color:edit")&&e.jsxs(D,{onClick:()=>{t.onClose(),c.onTrue(),d(o)},children:[e.jsx(P,{icon:"solar:pen-bold"}),"Edit"]})]})})]})]})}function E({text:s}){return e.jsx(v,{hover:!0,children:e.jsx(j,{sx:{whiteSpace:"nowrap"},align:"center",colSpan:4,children:s})})}function Se({rows:s,status:o}){const{page:t,rowsPerPage:l}=w();return e.jsx(ue,{children:o==="loading"?e.jsx(E,{text:"loading .."}):s.length===0?e.jsx(E,{text:"data not found"}):s.map((n,r)=>e.jsx(Pe,{row:n,no:(t-1)*l+r+1},n.id))})}function ye(){const{keyword:s,refreshFlag:o,updatePage:t,updateRowsPerPage:l}=w(),[n,r]=a.useState(0),[c,d]=a.useState(0),[i,S]=a.useState(15),[b,x]=a.useState([]),[g,p]=a.useState(!1),f=async()=>{p(!0),await le({keyword:s,page:n+1}).then(m=>{x(m.data),d(m.total),r(m.current_page-1),t(m.current_page),l(i)}).finally(()=>{p(!1)})};a.useEffect(()=>{f()},[s,o,n]);const h=(m,u)=>{r(u)},C=m=>{r(0)};return e.jsxs(he,{children:[e.jsx(we,{}),e.jsx(U,{sx:{position:"relative"},children:e.jsx(Y,{children:e.jsxs(me,{size:"medium",sx:{minWidth:0},children:[e.jsx(be,{}),e.jsx(Se,{rows:b,status:g?"loading":"finish"})]})})}),e.jsx(ce,{dense:!1,page:n,count:c,rowsPerPage:15,rowsPerPageOptions:[15,25,100],onPageChange:h,onRowsPerPageChange:C})]})}const Fe={title:`Master - Color - ${oe.site.name}`};function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsxs("title",{children:[" ",Fe.title]})}),e.jsx(se,{maxWidth:"xl",children:e.jsxs(xe,{children:[e.jsx(ge,{}),e.jsx(ye,{}),e.jsx(je,{})]})})]})}export{ze as default};
