import{iV as v,a as s,e as c,aI as _,ib as n,aZ as h,aA as l,iW as u,iX as i}from"./index-DL1FC2Xw.js";import{C as m}from"./errors-wZ747Yys.js";const y=async({keyword:e,page:r})=>{try{return(await s.get(`${c.other.voucher.main}?search=${e}&page=${r}&order_by=created_at&order_direction=desc`)).data}catch(t){throw console.error("VoucherGetList - error : ",t),new Error("unexpected error occurred")}},d=async(e,r)=>{try{return(await s.get(`${c.other.voucher.available}?customer_id=${e}&order_id=${r}`)).data.vouchers}catch(t){throw console.error("VoucherAvailableGetList - error : ",t),new Error("unexpected error occurred")}},w=async e=>{try{return(await s.get(`${c.other.voucher.main}/${e}`)).data}catch(r){throw r.status===404?r:(console.error("VoucherGetOne - error : ",r),new Error("unexpected error occurred"))}},x=async e=>{try{await s.post(`${c.other.voucher.main}/${e}?_method=DELETE`)}catch(r){throw console.error("VoucherDelete - error : ",r),new Error("Oops, an error occurred while delete data!")}},b=async e=>{try{await s.post(`${c.other.voucher.main}/activate/${e}`)}catch(r){throw console.error("VoucherActivate - error : ",r),new Error("Oops, an error occurred while delete data!")}},$=async e=>{try{e.id?await s.post(`${c.other.voucher.main}/${e.id}?_method=PUT`,e):await s.post(`${c.other.voucher.main}`,e)}catch(r){throw r.status===422?r.data&&r.data.errors?new m(r.data.errors):r:(console.error("VoucherFormSubmit - error : ",r),new Error("Oops, an error occurred while saving data!"))}},E=e=>{const r=n(`${_(e.start_at,h.date)} 00:00:01`),t=n(`${_(e.end_at,h.date)} 23:59:59`);return{id:e.id,name:e.name,code:e.code,start_at:String(r),end_at:String(t),qty:e.is_unlimited_qty?"-1":e.qty.replace(/,/g,""),type:e.type,description:e.description,has_usage_limit:e.has_usage_limit,usage_limit:e.has_usage_limit?e.usage.limit.replace(/,/g,""):"",usage_duration:e.has_usage_limit?e.usage.duration.replace(/,/g,""):"",usage_unit:e.has_usage_limit?e.usage.unit:"",has_min_transaction:e.has_min_transaction,min_transaction_type:e.has_min_transaction?e.min_transaction.type:l.percentage,min_transaction_value:e.has_min_transaction?e.min_transaction.value.replace(/,/g,""):"0",all_stores:e.all_stores,voucher_stores:e.all_stores?[]:e.voucher_stores,all_customers:e.all_customers,customers:e.customers.map(o=>o.id),voucher_items:e.voucher_items.map(o=>({id:o.id,voucher_id:o.voucher_id,type:o.type,voucher_type:o.voucher_type,voucher_value:o.voucher_value.replace(/,/g,""),has_voucher_max:o.has_voucher_max,voucher_max_type:o.has_voucher_max?o.voucher_max_type:l.percentage,voucher_max_value:o.has_voucher_max?o.voucher_max_value.replace(/,/g,""):"0",voucher_item_targets:o.all_item_targets?[]:o.voucher_item_targets.map(a=>({id:a.id,voucher_item_id:o.id,targetable_id:a.targetable_data.id,targetable_type:o.type===i.product?u.product:o.type===i.add_ons?u.add_ons:o.type===i.category?u.category:u.shipping,targetable_data:{id:a.targetable_data.id,name:a.targetable_data.name}}))}))}},V=e=>({id:e.id,all_stores:e.all_stores!==void 0?e.all_stores:!1,voucher_stores:e.voucher_stores,name:e.name,code:e.code,start_at:String(_(Number(e.start_at),"YYYY/MM/DD")),end_at:String(_(Number(e.end_at),"YYYY/MM/DD")),is_unlimited_qty:!!(e.qty&&Number(e.qty)<0),qty:e.qty&&Number(e.qty)<0?"":e.qty,type:e.type,description:e.description,has_usage_limit:e.has_usage_limit,usage:{limit:e.usage_limit??"0",duration:e.usage_duration??"1",unit:e.usage_unit??v.day},has_min_transaction:e.has_min_transaction,min_transaction:{value:e.min_transaction_value,type:e.min_transaction_type},all_customers:e.all_customers!==void 0?e.all_customers:!1,customers:e.customers!==void 0?e.customers:[],voucher_items:e.voucher_items.map(r=>({id:r.id,voucher_id:r.voucher_id,type:r.type,voucher_type:r.voucher_type,voucher_value:r.voucher_value,has_voucher_max:r.has_voucher_max,voucher_max_type:r.voucher_max_type,voucher_max_value:r.voucher_max_value,all_item_targets:r.voucher_item_targets.length===0,voucher_item_targets:r.voucher_item_targets.length>0?r.voucher_item_targets:[]}))});export{d as V,x as a,y as b,w as c,V as d,E as e,$ as f,b as v};
