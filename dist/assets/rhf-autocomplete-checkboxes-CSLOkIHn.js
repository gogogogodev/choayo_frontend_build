import{r as o,aM as k,k as s,aN as E,aU as v,I as y,n as R,aY as S}from"./index-CtazL8yi.js";function O({name:p,loadingProp:c,fetchFunction:r,refreshTrigger:l,...n}){const[d,x]=o.useState(!1),{setValue:m,control:f}=k(),[g,I]=o.useState([]),[a,j]=o.useState(""),u=e=>{r&&(x(!0),r(e??a).then(t=>I(t)).finally(()=>x(!1)))};return o.useEffect(()=>{if(a!==""&&a!=="on"){const e=setTimeout(()=>{u()},500);return()=>clearTimeout(e)}},[a]),o.useEffect(()=>{l&&l>0&&u("")},[l]),o.useEffect(()=>{u()},[]),s.jsx(E,{name:p,control:f,render:({field:e})=>s.jsx(v,{...e,multiple:!0,onInputChange:t=>{t?.target?.value===""&&u(""),j(t?.target?.value||"")},onChange:(t,i)=>{m(p,i,{shouldValidate:!0,shouldDirty:!0}),e.onChange(i)},renderOption:(t,i,{selected:C})=>{const{key:b,...h}=t;return s.jsxs("li",{...h,children:[s.jsx(S,{size:"small",checked:C}),n?.getOptionLabel?.(i)]},b)},...n,loading:d||c,loadingText:"Sedang Mengambil Data...",options:[...g,...n.options??[]],popupIcon:d||c?s.jsx(y,{position:"end",children:s.jsx(R,{icon:"svg-spinners:8-dots-rotate",sx:{color:"text.disabled"}})}):n.popupIcon})})}export{O as R};
