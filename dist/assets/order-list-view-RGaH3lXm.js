import{f as T,cP as O,k as e,aY as Q,L as $,S as b,aL as P,aw as w,ci as k,dn as V,aI as K,aC as L,m as f,n as m,fs as M,bH as q,cQ as E,cd as B,cc as C,ag as N,r as h,dQ as G,bE as Y,I as J,bC as y,ft as X,c as Z,fu as ee,f6 as te,fv as se,dC as R,p as v,aE as ae,ca as oe,fw as ne,bI as le,c9 as re,dg as ce,az as ie,fx as de}from"./index-DL1FC2Xw.js";import{C as W}from"./confirm-dialog-CwRLZCM0.js";import{C as he}from"./custom-breadcrumbs-nJImJlyu.js";import{u as ue,r as xe,e as me,g as pe}from"./use-table-CPCa2v8E.js";import{T as ge}from"./table-no-data-vIKvA8e8.js";import{T as je}from"./table-empty-rows-BYzRLWZo.js";import{T as be}from"./table-head-custom-eUb1cVu_.js";import{T as Ce}from"./table-selected-action-fIOkUq1a.js";import{T as we}from"./table-pagination-custom-D4L-eNU7.js";import{f as A}from"./format-number-CnUv9gu0.js";import{b as I,T as fe,c as ye}from"./TableRow-Dnp-F93Q.js";import{T as g}from"./TableCell--CDe426o.js";import{D as F}from"./DatePicker-x3rEWLr9.js";import{F as ve,a as D,c as S}from"./filters-result-axCMPXQZ.js";import{C as De}from"./Card-x9v4l8Wx.js";function Se({row:t,selected:c,onViewRow:n,onSelectRow:l,onDeleteRow:u}){const o=T(),i=T(),s=O(),p=e.jsxs(I,{hover:!0,selected:c,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(Q,{checked:c,onClick:l,inputProps:{id:`row-checkbox-${t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(g,{children:e.jsx($,{color:"inherit",onClick:n,underline:"always",sx:{cursor:"pointer"},children:t.orderNumber})}),e.jsx(g,{children:e.jsxs(b,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(P,{alt:t.customer.name,src:t.customer.avatarUrl}),e.jsxs(b,{sx:{typography:"body2",flex:"1 1 auto",alignItems:"flex-start"},children:[e.jsx(w,{component:"span",children:t.customer.name}),e.jsx(w,{component:"span",sx:{color:"text.disabled"},children:t.customer.email})]})]})}),e.jsx(g,{children:e.jsx(k,{primary:K(t.createdAt),secondary:V(t.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(g,{align:"center",children:[" ",t.totalQuantity," "]}),e.jsxs(g,{children:[" ",A(t.subtotal)," "]}),e.jsx(g,{children:e.jsx(L,{variant:"soft",color:t.status==="completed"&&"success"||t.status==="pending"&&"warning"||t.status==="cancelled"&&"error"||"default",children:t.status})}),e.jsxs(g,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(f,{color:i.value?"inherit":"default",onClick:i.onToggle,sx:{...i.value&&{bgcolor:"action.hover"}},children:e.jsx(m,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(f,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]})]}),r=e.jsx(I,{children:e.jsx(g,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(M,{in:i.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(q,{sx:{m:1.5},children:t.items.map(d=>e.jsxs(b,{direction:"row",alignItems:"center",sx:{p:j=>j.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:j=>`solid 2px ${j.vars.palette.background.neutral}`}},children:[e.jsx(P,{src:d.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(k,{primary:d.name,secondary:d.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs("div",{children:["x",d.quantity," "]}),e.jsx(w,{sx:{width:110,textAlign:"right"},children:A(d.price)})]},d.id))})})})});return e.jsxs(e.Fragment,{children:[p,r,e.jsx(E,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(C,{onClick:()=>{o.onTrue(),s.onClose()},sx:{color:"error.main"},children:[e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(C,{onClick:()=>{n(),s.onClose()},children:[e.jsx(m,{icon:"solar:eye-bold"}),"View"]})]})}),e.jsx(W,{open:o.value,onClose:o.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(N,{variant:"contained",color:"error",onClick:u,children:"Delete"})})]})}function Te({filters:t,onResetPage:c,dateError:n}){const l=O(),u=h.useCallback(s=>{c(),t.setState({name:s.target.value})},[t,c]),o=h.useCallback(s=>{c(),t.setState({startDate:s})},[t,c]),i=h.useCallback(s=>{c(),t.setState({endDate:s})},[t,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(F,{label:"Start date",value:t.state.startDate,onChange:o,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(F,{label:"End date",value:t.state.endDate,onChange:i,slotProps:{textField:{fullWidth:!0,error:n,helperText:n?"End date must be later than start date":null}},sx:{maxWidth:{md:200},[`& .${G.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(Y,{fullWidth:!0,value:t.state.name,onChange:u,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(J,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(f,{onClick:l.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(E,{open:l.open,anchorEl:l.anchorEl,onClose:l.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(B,{children:[e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(m,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{l.onClose()},children:[e.jsx(m,{icon:"solar:export-bold"}),"Export"]})]})})]})}function Pe({filters:t,totalResults:c,onResetPage:n,sx:l}){const u=h.useCallback(()=>{n(),t.setState({name:""})},[t,n]),o=h.useCallback(()=>{n(),t.setState({status:"all"})},[t,n]),i=h.useCallback(()=>{n(),t.setState({startDate:null,endDate:null})},[t,n]),s=h.useCallback(()=>{n(),t.onResetState()},[t,n]);return e.jsxs(ve,{totalResults:c,onReset:s,sx:l,children:[e.jsx(D,{label:"Status:",isShow:t.state.status!=="all",children:e.jsx(y,{...S,label:t.state.status,onDelete:o,sx:{textTransform:"capitalize"}})}),e.jsx(D,{label:"Date:",isShow:!!(t.state.startDate&&t.state.endDate),children:e.jsx(y,{...S,label:X(t.state.startDate,t.state.endDate),onDelete:i})}),e.jsx(D,{label:"Keyword:",isShow:!!t.state.name,children:e.jsx(y,{...S,label:t.state.name,onDelete:u})})]})}const ke=[{value:"all",label:"All"},...ne],Re=[{id:"orderNumber",label:"Order",width:88},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}];function Ke(){const t=ue({defaultOrderBy:"orderNumber"}),c=Z(),n=T(),[l,u]=h.useState(ee),o=te({name:"",status:"all",startDate:null,endDate:null}),i=se(o.state.startDate,o.state.endDate),s=Ae({inputData:l,comparator:pe(t.order,t.orderBy),filters:o.state,dateError:i}),p=xe(s,t.page,t.rowsPerPage),r=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!s.length&&r||!s.length,j=h.useCallback(a=>{const x=l.filter(z=>z.id!==a);R.success("Delete success!"),u(x),t.onUpdatePageDeleteRow(p.length)},[p.length,t,l]),U=h.useCallback(()=>{const a=l.filter(x=>!t.selected.includes(x.id));R.success("Delete success!"),u(a),t.onUpdatePageDeleteRows({totalRowsInPage:p.length,totalRowsFiltered:s.length})},[s.length,p.length,t,l]),H=h.useCallback(a=>{c.push(v.dashboard.order.details(a))},[c]),_=h.useCallback((a,x)=>{t.onResetPage(),o.setState({status:x})},[o,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(he,{heading:"List",links:[{name:"Dashboard",href:v.dashboard.root},{name:"Order",href:v.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(De,{children:[e.jsx(oe,{value:o.state.status,onChange:_,sx:{px:2.5,boxShadow:a=>`inset 0 -2px 0 0 ${le(a.vars.palette.grey["500Channel"],.08)}`},children:ke.map(a=>e.jsx(re,{iconPosition:"end",value:a.value,label:a.label,icon:e.jsx(L,{variant:(a.value==="all"||a.value===o.state.status)&&"filled"||"soft",color:a.value==="completed"&&"success"||a.value==="pending"&&"warning"||a.value==="cancelled"&&"error"||"default",children:["completed","pending","cancelled","refunded"].includes(a.value)?l.filter(x=>x.status===a.value).length:l.length})},a.value))}),e.jsx(Te,{filters:o,onResetPage:t.onResetPage,dateError:i}),r&&e.jsx(Pe,{filters:o,totalResults:s.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(w,{sx:{position:"relative"},children:[e.jsx(Ce,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(x=>x.id)),action:e.jsx(ce,{title:"Delete",children:e.jsx(f,{color:"primary",onClick:n.onTrue,children:e.jsx(m,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(ie,{sx:{minHeight:444},children:e.jsxs(fe,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(be,{order:t.order,orderBy:t.orderBy,headLabel:Re,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:a=>t.onSelectAllRows(a,s.map(x=>x.id))}),e.jsxs(ye,{children:[s.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>e.jsx(Se,{row:a,selected:t.selected.includes(a.id),onSelectRow:()=>t.onSelectRow(a.id),onDeleteRow:()=>j(a.id),onViewRow:()=>H(a.id)},a.id)),e.jsx(je,{height:t.dense?56:76,emptyRows:me(t.page,t.rowsPerPage,s.length)}),e.jsx(ge,{notFound:d})]})]})})]}),e.jsx(we,{page:t.page,dense:t.dense,count:s.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]}),e.jsx(W,{open:n.value,onClose:n.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(N,{variant:"contained",color:"error",onClick:()=>{U(),n.onFalse()},children:"Delete"})})]})}function Ae({inputData:t,comparator:c,filters:n,dateError:l}){const{status:u,name:o,startDate:i,endDate:s}=n,p=t.map((r,d)=>[r,d]);return p.sort((r,d)=>{const j=c(r[0],d[0]);return j!==0?j:r[1]-d[1]}),t=p.map(r=>r[0]),o&&(t=t.filter(r=>r.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||r.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||r.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),u!=="all"&&(t=t.filter(r=>r.status===u)),l||i&&s&&(t=t.filter(r=>de(r.createdAt,i,s))),t}export{Ke as O};
