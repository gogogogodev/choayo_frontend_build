import{k as e,S as v,n as m,fj as L,bI as _,l as F,aw as $,f as U,cP as G,aY as K,aL as ne,ci as R,L as re,dn as B,aI as O,aC as M,m as f,cQ as Q,cd as A,cc as C,as as Y,ag as E,r as u,aV as le,c1 as ie,f7 as ce,f8 as de,dQ as pe,bE as he,I as ue,bC as T,ft as me,u as xe,c as je,fy as be,f6 as ge,fv as ve,dC as W,p as y,aE as Ce,R as fe,az as N,dt as z,ca as ye,c9 as we,fz as De,dg as k,fx as Se,H as Te,C as ke}from"./index-DL1FC2Xw.js";import{C as q}from"./confirm-dialog-CwRLZCM0.js";import{C as Pe}from"./custom-breadcrumbs-nJImJlyu.js";import{u as Ie,g as Re,r as Fe,e as Ae}from"./use-table-CPCa2v8E.js";import{T as Ee}from"./table-no-data-vIKvA8e8.js";import{T as Le}from"./table-empty-rows-BYzRLWZo.js";import{T as Be}from"./table-head-custom-eUb1cVu_.js";import{T as Oe}from"./table-selected-action-fIOkUq1a.js";import{T as We}from"./table-pagination-custom-D4L-eNU7.js";import{c as Ne,f as J}from"./format-number-CnUv9gu0.js";import{b as ze,T as Ve,c as He}from"./TableRow-Dnp-F93Q.js";import{T as g}from"./TableCell--CDe426o.js";import{D as V}from"./DatePicker-x3rEWLr9.js";import{F as _e,a as P,c as I}from"./filters-result-axCMPXQZ.js";import{C as H}from"./Card-x9v4l8Wx.js";import"./invoice-details-BH2eHtOB.js";import"./empty-content-Cjr2GcXL.js";import"./TablePagination-Cu0e8Dmj.js";import"./LastPage-CNSkhtZT.js";import"./FormControlLabel-RF8C1zCS.js";import"./ListItem-ByRhTH_M.js";import"./schema-helper-CLblsXWr.js";import"./fields-CF4iu1MC.js";import"./Rating-B4A3Yvck.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-CeFV86ab.js";import"./rhf-radio-group-c3xmrwMe.js";import"./RadioGroup-DjJiUtpj.js";import"./FormGroup-dr7_GDnD.js";import"./country-select-C_VDc9o1.js";import"./rhf-switch-D1cE4SqJ.js";import"./rhf-checkbox-DHrzNFCH.js";import"./rhf-upload-CDPkY_M8.js";import"./upload-zFEN7YNi.js";import"./index-Buzb-ijE.js";import"./placeholder-CUueKP83.js";import"./preview-multi-file-IiDRFFAI.js";import"./upload-avatar-DX55zYUp.js";import"./rhf-date-picker-CcRSy6lj.js";import"./MobileDateTimePicker-DRzd3izO.js";import"./address-list-dialog-C9K8Fnvj.js";function w({title:t,total:p,icon:s,color:c,percent:o,price:x}){return e.jsxs(v,{spacing:2.5,direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:200},children:[e.jsxs(v,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[e.jsx(m,{icon:s,width:32,sx:{color:c,position:"absolute"}}),e.jsx(L,{size:56,thickness:2,value:o,variant:"determinate",sx:{color:c,opacity:.48}}),e.jsx(L,{size:56,value:100,thickness:3,variant:"determinate",sx:{top:0,left:0,opacity:.48,position:"absolute",color:n=>_(n.vars.palette.grey["500Channel"],.16)}})]}),e.jsxs(v,{spacing:.5,children:[e.jsx(F,{variant:"subtitle1",children:t}),e.jsxs($,{component:"span",sx:{color:"text.disabled",typography:"body2"},children:[Ne(p)," invoices"]}),e.jsx(F,{variant:"subtitle2",children:J(x)})]})]})}function $e({row:t,selected:p,onSelectRow:s,onViewRow:c,onEditRow:o,onDeleteRow:x}){const n=U(),d=G();return e.jsxs(e.Fragment,{children:[e.jsxs(ze,{hover:!0,selected:p,children:[e.jsx(g,{padding:"checkbox",children:e.jsx(K,{checked:p,onClick:s,inputProps:{id:`row-checkbox-${t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(g,{children:e.jsxs(v,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(ne,{alt:t.invoiceTo.name,children:t.invoiceTo.name.charAt(0).toUpperCase()}),e.jsx(R,{disableTypography:!0,primary:e.jsx(F,{variant:"body2",noWrap:!0,children:t.invoiceTo.name}),secondary:e.jsx(re,{noWrap:!0,variant:"body2",onClick:c,sx:{color:"text.disabled",cursor:"pointer"},children:t.invoiceNumber})})]})}),e.jsx(g,{children:e.jsx(R,{primary:O(t.createDate),secondary:B(t.createDate),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(g,{children:e.jsx(R,{primary:O(t.dueDate),secondary:B(t.dueDate),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(g,{children:J(t.totalAmount)}),e.jsx(g,{align:"center",children:t.sent}),e.jsx(g,{children:e.jsx(M,{variant:"soft",color:t.status==="paid"&&"success"||t.status==="pending"&&"warning"||t.status==="overdue"&&"error"||"default",children:t.status})}),e.jsx(g,{align:"right",sx:{px:1},children:e.jsx(f,{color:d.open?"inherit":"default",onClick:d.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(Q,{open:d.open,anchorEl:d.anchorEl,onClose:d.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(A,{children:[e.jsxs(C,{onClick:()=>{c(),d.onClose()},children:[e.jsx(m,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(C,{onClick:()=>{o(),d.onClose()},children:[e.jsx(m,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(Y,{sx:{borderStyle:"dashed"}}),e.jsxs(C,{onClick:()=>{n.onTrue(),d.onClose()},sx:{color:"error.main"},children:[e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(q,{open:n.value,onClose:n.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(E,{variant:"contained",color:"error",onClick:x,children:"Delete"})})]})}function Ue({filters:t,options:p,dateError:s,onResetPage:c}){const o=G(),x=u.useCallback(r=>{c(),t.setState({name:r.target.value})},[t,c]),n=u.useCallback(r=>{const i=typeof r.target.value=="string"?r.target.value.split(","):r.target.value;c(),t.setState({service:i})},[t,c]),d=u.useCallback(r=>{c(),t.setState({startDate:r})},[t,c]),l=u.useCallback(r=>{c(),t.setState({endDate:r})},[t,c]);return e.jsxs(e.Fragment,{children:[e.jsxs(v,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(le,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(ie,{htmlFor:"invoice-filter-service-select-label",children:"Service"}),e.jsx(ce,{multiple:!0,value:t.state.service,onChange:n,input:e.jsx(de,{label:"Service"}),renderValue:r=>r.map(i=>i).join(", "),inputProps:{id:"invoice-filter-service-select-label"},sx:{textTransform:"capitalize"},children:p.services.map(r=>e.jsxs(C,{value:r,children:[e.jsx(K,{disableRipple:!0,size:"small",checked:t.state.service.includes(r)}),r]},r))})]}),e.jsx(V,{label:"Start date",value:t.state.endDate,onChange:d,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(V,{label:"End date",value:t.state.endDate,onChange:l,slotProps:{textField:{fullWidth:!0,error:s,helperText:s?"End date must be later than start date":null}},sx:{maxWidth:{md:180},[`& .${pe.root}`]:{bottom:{md:-40},position:{md:"absolute"}}}}),e.jsxs(v,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(he,{fullWidth:!0,value:t.state.name,onChange:x,placeholder:"Search customer or invoice number...",InputProps:{startAdornment:e.jsx(ue,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(f,{onClick:o.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(Q,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsx(A,{children:e.jsxs(A,{children:[e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(m,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{o.onClose()},children:[e.jsx(m,{icon:"solar:export-bold"}),"Export"]})]})})})]})}function Ge({filters:t,totalResults:p,onResetPage:s,sx:c}){const o=u.useCallback(()=>{s(),t.setState({name:""})},[t,s]),x=u.useCallback(l=>{const r=t.state.service.filter(i=>i!==l);s(),t.setState({service:r})},[t,s]),n=u.useCallback(()=>{s(),t.setState({status:"all"})},[t,s]),d=u.useCallback(()=>{s(),t.setState({startDate:null,endDate:null})},[t,s]);return e.jsxs(_e,{totalResults:p,onReset:t.onResetState,sx:c,children:[e.jsx(P,{label:"Service:",isShow:!!t.state.service.length,children:t.state.service.map(l=>u.createElement(T,{...I,key:l,label:l,onDelete:()=>x(l)}))}),e.jsx(P,{label:"Status:",isShow:t.state.status!=="all",children:e.jsx(T,{...I,label:t.state.status,onDelete:n,sx:{textTransform:"capitalize"}})}),e.jsx(P,{label:"Date:",isShow:!!(t.state.startDate&&t.state.endDate),children:e.jsx(T,{...I,label:me(t.state.startDate,t.state.endDate),onDelete:d})}),e.jsx(P,{label:"Keyword:",isShow:!!t.state.name,children:e.jsx(T,{...I,label:t.state.name,onDelete:o})})]})}const Ke=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}];function Me(){const t=xe(),p=je(),s=Ie({defaultOrderBy:"createDate"}),c=U(),[o,x]=u.useState(be),n=ge({name:"",service:[],status:"all",startDate:null,endDate:null}),d=ve(n.state.startDate,n.state.endDate),l=Qe({inputData:o,comparator:Re(s.order,s.orderBy),filters:n.state,dateError:d}),r=Fe(l,s.page,s.rowsPerPage),i=!!n.state.name||n.state.service.length>0||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,b=!l.length&&i||!l.length,j=a=>o.filter(h=>h.status===a).length,D=a=>z(o.filter(h=>h.status===a),h=>h.totalAmount),S=a=>j(a)/o.length*100,X=[{value:"all",label:"All",color:"default",count:o.length},{value:"paid",label:"Paid",color:"success",count:j("paid")},{value:"pending",label:"Pending",color:"warning",count:j("pending")},{value:"overdue",label:"Overdue",color:"error",count:j("overdue")},{value:"draft",label:"Draft",color:"default",count:j("draft")}],Z=u.useCallback(a=>{const h=o.filter(oe=>oe.id!==a);W.success("Delete success!"),x(h),s.onUpdatePageDeleteRow(r.length)},[r.length,s,o]),ee=u.useCallback(()=>{const a=o.filter(h=>!s.selected.includes(h.id));W.success("Delete success!"),x(a),s.onUpdatePageDeleteRows({totalRowsInPage:r.length,totalRowsFiltered:l.length})},[l.length,r.length,s,o]),te=u.useCallback(a=>{p.push(y.dashboard.invoice.edit(a))},[p]),se=u.useCallback(a=>{p.push(y.dashboard.invoice.details(a))},[p]),ae=u.useCallback((a,h)=>{s.onResetPage(),n.setState({status:h})},[n,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{children:[e.jsx(Pe,{heading:"List",links:[{name:"Dashboard",href:y.dashboard.root},{name:"Invoice",href:y.dashboard.invoice.root},{name:"List"}],action:e.jsx(E,{component:fe,href:y.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(m,{icon:"mingcute:add-line"}),children:"New invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(H,{sx:{mb:{xs:3,md:5}},children:e.jsx(N,{sx:{minHeight:108},children:e.jsxs(v,{direction:"row",divider:e.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(w,{title:"Total",total:o.length,percent:100,price:z(o,a=>a.totalAmount),icon:"solar:bill-list-bold-duotone",color:t.vars.palette.info.main}),e.jsx(w,{title:"Paid",total:j("paid"),percent:S("paid"),price:D("paid"),icon:"solar:file-check-bold-duotone",color:t.vars.palette.success.main}),e.jsx(w,{title:"Pending",total:j("pending"),percent:S("pending"),price:D("pending"),icon:"solar:sort-by-time-bold-duotone",color:t.vars.palette.warning.main}),e.jsx(w,{title:"Overdue",total:j("overdue"),percent:S("overdue"),price:D("overdue"),icon:"solar:bell-bing-bold-duotone",color:t.vars.palette.error.main}),e.jsx(w,{title:"Draft",total:j("draft"),percent:S("draft"),price:D("draft"),icon:"solar:file-corrupted-bold-duotone",color:t.vars.palette.text.secondary})]})})}),e.jsxs(H,{children:[e.jsx(ye,{value:n.state.status,onChange:ae,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${_(t.vars.palette.grey["500Channel"],.08)}`},children:X.map(a=>e.jsx(we,{value:a.value,label:a.label,iconPosition:"end",icon:e.jsx(M,{variant:(a.value==="all"||a.value===n.state.status)&&"filled"||"soft",color:a.color,children:a.count})},a.value))}),e.jsx(Ue,{filters:n,dateError:d,onResetPage:s.onResetPage,options:{services:De.map(a=>a.name)}}),i&&e.jsx(Ge,{filters:n,onResetPage:s.onResetPage,totalResults:l.length,sx:{p:2.5,pt:0}}),e.jsxs($,{sx:{position:"relative"},children:[e.jsx(Oe,{dense:s.dense,numSelected:s.selected.length,rowCount:l.length,onSelectAllRows:a=>{s.onSelectAllRows(a,l.map(h=>h.id))},action:e.jsxs(v,{direction:"row",children:[e.jsx(k,{title:"Sent",children:e.jsx(f,{color:"primary",children:e.jsx(m,{icon:"iconamoon:send-fill"})})}),e.jsx(k,{title:"Download",children:e.jsx(f,{color:"primary",children:e.jsx(m,{icon:"eva:download-outline"})})}),e.jsx(k,{title:"Print",children:e.jsx(f,{color:"primary",children:e.jsx(m,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(k,{title:"Delete",children:e.jsx(f,{color:"primary",onClick:c.onTrue,children:e.jsx(m,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(N,{sx:{minHeight:444},children:e.jsxs(Ve,{size:s.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Be,{order:s.order,orderBy:s.orderBy,headLabel:Ke,rowCount:l.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:a=>s.onSelectAllRows(a,l.map(h=>h.id))}),e.jsxs(He,{children:[l.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx($e,{row:a,selected:s.selected.includes(a.id),onSelectRow:()=>s.onSelectRow(a.id),onViewRow:()=>se(a.id),onEditRow:()=>te(a.id),onDeleteRow:()=>Z(a.id)},a.id)),e.jsx(Le,{height:s.dense?56:76,emptyRows:Ae(s.page,s.rowsPerPage,l.length)}),e.jsx(Ee,{notFound:b})]})]})})]}),e.jsx(We,{page:s.page,dense:s.dense,count:l.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]}),e.jsx(q,{open:c.value,onClose:c.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(E,{variant:"contained",color:"error",onClick:()=>{ee(),c.onFalse()},children:"Delete"})})]})}function Qe({inputData:t,comparator:p,filters:s,dateError:c}){const{name:o,status:x,service:n,startDate:d,endDate:l}=s,r=t.map((i,b)=>[i,b]);return r.sort((i,b)=>{const j=p(i[0],b[0]);return j!==0?j:i[1]-b[1]}),t=r.map(i=>i[0]),o&&(t=t.filter(i=>i.invoiceNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||i.invoiceTo.name.toLowerCase().indexOf(o.toLowerCase())!==-1)),x!=="all"&&(t=t.filter(i=>i.status===x)),n.length&&(t=t.filter(i=>i.items.some(b=>n.includes(b.service)))),c||d&&l&&(t=t.filter(i=>Se(i.createDate,d,l))),t}const Ye={title:`Invoice list | Dashboard - ${ke.site.name}`};function Wt(){return e.jsxs(e.Fragment,{children:[e.jsx(Te,{children:e.jsxs("title",{children:[" ",Ye.title]})}),e.jsx(Me,{})]})}export{Wt as default};
