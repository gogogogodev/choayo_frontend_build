import{cP as W,k as e,m as O,n as x,S as g,aL as Y,ci as K,aI as U,L as Q,p as f,R as _,as as q,aw as y,l as j,cQ as A,cd as D,cc as T,c as H,r as d,ag as P,bB as M,f$ as X,g0 as Z,bE as V,I as ee,fJ as se,dg as te,dl as L,aY as B,bC as S,dH as ne,az as oe,f as le,f6 as J,g8 as N,ga as ae,g9 as re,gd as ie,fW as ce,ge as de,aE as pe,cR as R,H as me,C as xe}from"./index-DL1FC2Xw.js";import{E as he}from"./empty-content-Cjr2GcXL.js";import{C as ue}from"./custom-breadcrumbs-nJImJlyu.js";import{f as be}from"./format-number-CnUv9gu0.js";import{C as ye}from"./Card-x9v4l8Wx.js";import{P as je,p as ge}from"./Pagination-BhlVSDxW.js";import{C as fe}from"./country-select-C_VDc9o1.js";import{F as I}from"./FormControlLabel-RF8C1zCS.js";import{a as Ce}from"./RadioGroup-DjJiUtpj.js";import{F as Se,a as E,c as v}from"./filters-result-axCMPXQZ.js";import"./job-new-edit-form-3JlRKU5q.js";import"./html-to-markdown-C60JWNql.js";import"./LastPage-CNSkhtZT.js";import"./FormGroup-dr7_GDnD.js";import"./fields-CF4iu1MC.js";import"./Rating-B4A3Yvck.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-CeFV86ab.js";import"./rhf-radio-group-c3xmrwMe.js";import"./rhf-switch-D1cE4SqJ.js";import"./rhf-checkbox-DHrzNFCH.js";import"./rhf-upload-CDPkY_M8.js";import"./upload-zFEN7YNi.js";import"./index-Buzb-ijE.js";import"./placeholder-CUueKP83.js";import"./preview-multi-file-IiDRFFAI.js";import"./upload-avatar-DX55zYUp.js";import"./rhf-date-picker-CcRSy6lj.js";import"./DatePicker-x3rEWLr9.js";import"./ListItem-ByRhTH_M.js";import"./MobileDateTimePicker-DRzd3izO.js";import"./schema-helper-CLblsXWr.js";import"./CardHeader-bsWkR9QZ.js";function ke({job:s,onView:i,onEdit:p,onDelete:a}){const t=W();return e.jsxs(e.Fragment,{children:[e.jsxs(ye,{children:[e.jsx(O,{onClick:t.onOpen,sx:{position:"absolute",top:8,right:8},children:e.jsx(x,{icon:"eva:more-vertical-fill"})}),e.jsxs(g,{sx:{p:3,pb:2},children:[e.jsx(Y,{alt:s.company.name,src:s.company.logo,variant:"rounded",sx:{width:48,height:48,mb:2}}),e.jsx(K,{sx:{mb:1},primary:e.jsx(Q,{component:_,href:f.dashboard.job.details(s.id),color:"inherit",children:s.title}),secondary:`Posted date: ${U(s.createdAt)}`,primaryTypographyProps:{typography:"subtitle1"},secondaryTypographyProps:{mt:1,component:"span",typography:"caption",color:"text.disabled"}}),e.jsxs(g,{spacing:.5,direction:"row",alignItems:"center",sx:{color:"primary.main",typography:"caption"},children:[e.jsx(x,{width:16,icon:"solar:users-group-rounded-bold"}),s.candidates.length," candidates"]})]}),e.jsx(q,{sx:{borderStyle:"dashed"}}),e.jsx(y,{rowGap:1.5,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",sx:{p:3},children:[{label:s.experience,icon:e.jsx(x,{width:16,icon:"carbon:skill-level-basic",sx:{flexShrink:0}})},{label:s.employmentTypes.join(", "),icon:e.jsx(x,{width:16,icon:"solar:clock-circle-bold",sx:{flexShrink:0}})},{label:s.salary.negotiable?"Negotiable":be(s.salary.price),icon:e.jsx(x,{width:16,icon:"solar:wad-of-money-bold",sx:{flexShrink:0}})},{label:s.role,icon:e.jsx(x,{width:16,icon:"solar:user-rounded-bold",sx:{flexShrink:0}})}].map(n=>e.jsxs(g,{spacing:.5,flexShrink:0,direction:"row",alignItems:"center",sx:{color:"text.disabled",minWidth:0},children:[n.icon,e.jsx(j,{variant:"caption",noWrap:!0,children:n.label})]},n.label))})]}),e.jsx(A,{open:t.open,anchorEl:t.anchorEl,onClose:t.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(D,{children:[e.jsxs(T,{onClick:()=>{t.onClose(),i()},children:[e.jsx(x,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(T,{onClick:()=>{t.onClose(),p()},children:[e.jsx(x,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(T,{onClick:()=>{t.onClose(),a()},sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})})]})}function Ee({jobs:s}){const i=H(),p=d.useCallback(n=>{i.push(f.dashboard.job.details(n))},[i]),a=d.useCallback(n=>{i.push(f.dashboard.job.edit(n))},[i]),t=d.useCallback(n=>{console.info("DELETE",n)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:s.map(n=>e.jsx(ke,{job:n,onView:()=>p(n.id),onEdit:()=>a(n.id),onDelete:()=>t(n.id)},n.id))}),s.length>8&&e.jsx(je,{count:8,sx:{mt:{xs:8,md:8},[`& .${ge.ul}`]:{justifyContent:"center"}}})]})}function ve({sort:s,onSort:i,sortOptions:p}){const a=W();return e.jsxs(e.Fragment,{children:[e.jsxs(P,{disableRipple:!0,color:"inherit",onClick:a.onOpen,endIcon:e.jsx(x,{icon:a.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort by:",e.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold",textTransform:"capitalize"},children:s})]}),e.jsx(A,{open:a.open,anchorEl:a.anchorEl,onClose:a.onClose,children:e.jsx(D,{children:p.map(t=>e.jsx(T,{selected:t.value===s,onClick:()=>{a.onClose(),i(t.value)},children:t.label},t.value))})})]})}function Te({search:s,onSearch:i}){const p=H(),a=n=>{p.push(f.dashboard.job.details(n))},t=n=>{if(s.state.query&&n.key==="Enter"){const r=s.state.results.filter(h=>h.title===s.state.query)[0];a(r.id)}};return e.jsx(M,{sx:{width:{xs:1,sm:260}},autoHighlight:!0,popupIcon:null,options:s.state.results,onInputChange:(n,r)=>i(r),getOptionLabel:n=>n.title,noOptionsText:e.jsx(se,{query:s.state.query}),isOptionEqualToValue:(n,r)=>n.id===r.id,renderInput:n=>e.jsx(V,{...n,placeholder:"Search...",onKeyUp:t,InputProps:{...n.InputProps,startAdornment:e.jsx(ee,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})})}}),renderOption:(n,r,{inputValue:h})=>{const l=X(r.title,h),c=Z(r.title,l);return d.createElement(y,{component:"li",...n,onClick:()=>a(r.id),key:r.id},e.jsx("div",{children:c.map((m,k)=>e.jsx(j,{component:"span",color:m.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:m.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:m.text},k))}))}})}function we({open:s,canReset:i,onOpen:p,onClose:a,filters:t,options:n}){const r=d.useCallback(o=>{const b=t.state.employmentTypes.includes(o)?t.state.employmentTypes.filter(C=>C!==o):[...t.state.employmentTypes,o];t.setState({employmentTypes:b})},[t]),h=d.useCallback(o=>{t.setState({experience:o})},[t]),l=d.useCallback(o=>{t.setState({roles:o})},[t]),c=d.useCallback(o=>{t.setState({locations:o})},[t]),m=d.useCallback(o=>{const b=t.state.benefits.includes(o)?t.state.benefits.filter(C=>C!==o):[...t.state.benefits,o];t.setState({benefits:b})},[t]),k=e.jsxs(e.Fragment,{children:[e.jsxs(y,{display:"flex",alignItems:"center",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(j,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(te,{title:"Reset",children:e.jsx(O,{onClick:t.onResetState,children:e.jsx(L,{color:"error",variant:"dot",invisible:!i,children:e.jsx(x,{icon:"solar:restart-bold"})})})}),e.jsx(O,{onClick:a,children:e.jsx(x,{icon:"mingcute:close-line"})})]}),e.jsx(q,{sx:{borderStyle:"dashed"}})]}),u=e.jsxs(y,{display:"flex",flexDirection:"column",children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Employment types"}),n.employmentTypes.map(o=>e.jsx(I,{control:e.jsx(B,{checked:t.state.employmentTypes.includes(o),onClick:()=>r(o)}),label:o},o))]}),w=e.jsxs(y,{display:"flex",flexDirection:"column",children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Experience"}),n.experiences.map(o=>e.jsx(I,{control:e.jsx(Ce,{checked:o===t.state.experience,onClick:()=>h(o)}),label:o,sx:{...o==="all"&&{textTransform:"capitalize"}}},o))]}),F=e.jsxs(y,{display:"flex",flexDirection:"column",children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Roles"}),e.jsx(M,{multiple:!0,disableCloseOnSelect:!0,options:n.roles.map(o=>o),getOptionLabel:o=>o,value:t.state.roles,onChange:(o,b)=>l(b),renderInput:o=>e.jsx(V,{placeholder:"Select Roles",...o}),renderOption:(o,b)=>d.createElement("li",{...o,key:b},b),renderTags:(o,b)=>o.map((C,G)=>d.createElement(S,{...b({index:G}),key:C,label:C,size:"small",variant:"soft"}))})]}),z=e.jsxs(y,{display:"flex",flexDirection:"column",children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1.5},children:"Locations"}),e.jsx(fe,{id:"multiple-locations",multiple:!0,fullWidth:!0,placeholder:t.state.locations.length?"+ Locations":"Select Locations",value:t.state.locations,onChange:(o,b)=>c(b)})]}),$=e.jsxs(y,{display:"flex",flexDirection:"column",children:[e.jsx(j,{variant:"subtitle2",sx:{mb:1},children:"Benefits"}),n.benefits.map(o=>e.jsx(I,{control:e.jsx(B,{checked:t.state.benefits.includes(o),onClick:()=>m(o)}),label:o},o))]});return e.jsxs(e.Fragment,{children:[e.jsx(P,{disableRipple:!0,color:"inherit",endIcon:e.jsx(L,{color:"error",variant:"dot",invisible:!i,children:e.jsx(x,{icon:"ic:round-filter-list"})}),onClick:p,children:"Filters"}),e.jsxs(ne,{anchor:"right",open:s,onClose:a,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},children:[k,e.jsx(oe,{sx:{px:2.5,py:3},children:e.jsxs(g,{spacing:3,children:[u,w,F,z,$]})})]})]})}function Fe({filters:s,totalResults:i,sx:p}){const a=l=>{const c=s.state.employmentTypes.filter(m=>m!==l);s.setState({employmentTypes:c})},t=()=>{s.setState({experience:"all"})},n=l=>{const c=s.state.roles.filter(m=>m!==l);s.setState({roles:c})},r=l=>{const c=s.state.locations.filter(m=>m!==l);s.setState({locations:c})},h=l=>{const c=s.state.benefits.filter(m=>m!==l);s.setState({benefits:c})};return e.jsxs(Se,{totalResults:i,onReset:s.onResetState,sx:p,children:[e.jsx(E,{label:"Employment types:",isShow:!!s.state.employmentTypes.length,children:s.state.employmentTypes.map(l=>d.createElement(S,{...v,key:l,label:l,onDelete:()=>a(l)}))}),e.jsx(E,{label:"Experience:",isShow:s.state.experience!=="all",children:e.jsx(S,{...v,label:s.state.experience,onDelete:t})}),e.jsx(E,{label:"Roles:",isShow:!!s.state.roles.length,children:s.state.roles.map(l=>d.createElement(S,{...v,key:l,label:l,onDelete:()=>n(l)}))}),e.jsx(E,{label:"Locations:",isShow:!!s.state.locations.length,children:s.state.locations.map(l=>d.createElement(S,{...v,key:l,label:l,onDelete:()=>r(l)}))}),e.jsx(E,{label:"Benefits:",isShow:!!s.state.benefits.length,children:s.state.benefits.map(l=>d.createElement(S,{...v,key:l,label:l,onDelete:()=>h(l)}))})]})}function Re(){const s=le(),[i,p]=d.useState("latest"),a=J({query:"",results:[]}),t=J({roles:[],locations:[],benefits:[],experience:"all",employmentTypes:[]}),n=Ie({inputData:N,filters:t.state,sortBy:i}),r=t.state.roles.length>0||t.state.locations.length>0||t.state.benefits.length>0||t.state.employmentTypes.length>0||t.state.experience!=="all",h=!n.length&&r,l=d.useCallback(u=>{p(u)},[]),c=d.useCallback(u=>{if(a.setState({query:u}),u){const w=N.filter(F=>F.title.toLowerCase().indexOf(a.state.query.toLowerCase())!==-1);a.setState({results:w})}},[a]),m=e.jsxs(g,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(Te,{search:a,onSearch:c}),e.jsxs(g,{direction:"row",spacing:1,flexShrink:0,children:[e.jsx(we,{filters:t,canReset:r,open:s.value,onOpen:s.onTrue,onClose:s.onFalse,options:{roles:ce,benefits:ie.map(u=>u.label),employmentTypes:re.map(u=>u.label),experiences:["all",...ae.map(u=>u.label)]}}),e.jsx(ve,{sort:i,onSort:l,sortOptions:de})]})]}),k=e.jsx(Fe,{filters:t,totalResults:n.length});return e.jsxs(pe,{children:[e.jsx(ue,{heading:"List",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Job",href:f.dashboard.job.root},{name:"List"}],action:e.jsx(P,{component:_,href:f.dashboard.job.new,variant:"contained",startIcon:e.jsx(x,{icon:"mingcute:add-line"}),children:"New job"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(g,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[m,r&&k]}),h&&e.jsx(he,{filled:!0,sx:{py:10}}),e.jsx(Ee,{jobs:n})]})}const Ie=({inputData:s,filters:i,sortBy:p})=>{const{employmentTypes:a,experience:t,roles:n,locations:r,benefits:h}=i;return p==="latest"&&(s=R(s,["createdAt"],["desc"])),p==="oldest"&&(s=R(s,["createdAt"],["asc"])),p==="popular"&&(s=R(s,["totalViews"],["desc"])),a.length&&(s=s.filter(l=>l.employmentTypes.some(c=>a.includes(c)))),t!=="all"&&(s=s.filter(l=>l.experience===t)),n.length&&(s=s.filter(l=>n.includes(l.role))),r.length&&(s=s.filter(l=>l.locations.some(c=>r.includes(c)))),h.length&&(s=s.filter(l=>l.benefits.some(c=>h.includes(c)))),s},Oe={title:`Job list | Dashboard - ${xe.site.name}`};function ps(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsxs("title",{children:[" ",Oe.title]})}),e.jsx(Re,{})]})}export{ps as default};
