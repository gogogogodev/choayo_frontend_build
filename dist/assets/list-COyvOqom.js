import{cP as K,f6 as N,r as a,k as e,aV as S,c1 as R,f7 as P,cc as m,aY as T,f8 as D,bI as I,cQ as Y,cd as J,n as p,bC as F,f9 as E,S as b,aL as X,ci as Z,aw as j,L as ee,aI as te,dn as se,da as oe,aC as le,f as re,c as ne,dC as L,p as x,aE as ae,ag as g,R as ie,fa as A,H as ce,C as de}from"./index-DL1FC2Xw.js";import"./incrementer-button-BQVpjfsb.js";import"./color-preview-dB99BTtB.js";import{a as ue}from"./product-VrR4OnKG.js";import{E as O}from"./empty-content-Cjr2GcXL.js";import{C as he}from"./confirm-dialog-CwRLZCM0.js";import{C as pe}from"./custom-breadcrumbs-nJImJlyu.js";import{F as me,a as G,c as M}from"./filters-result-axCMPXQZ.js";import{f as xe}from"./format-number-CnUv9gu0.js";import{C as be}from"./Card-x9v4l8Wx.js";import{D as Ce,g as fe,G as je,a as ge,b as we,c as ke,d as ye,e as f}from"./DataGrid-QtBuO2Hz.js";import"./carousel-progress-bar-CpKh2Fk3.js";import"./html-to-markdown-C60JWNql.js";import"./fields-CF4iu1MC.js";import"./Rating-B4A3Yvck.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-CeFV86ab.js";import"./rhf-radio-group-c3xmrwMe.js";import"./RadioGroup-DjJiUtpj.js";import"./FormGroup-dr7_GDnD.js";import"./FormControlLabel-RF8C1zCS.js";import"./country-select-C_VDc9o1.js";import"./rhf-switch-D1cE4SqJ.js";import"./rhf-checkbox-DHrzNFCH.js";import"./rhf-upload-CDPkY_M8.js";import"./upload-zFEN7YNi.js";import"./index-Buzb-ijE.js";import"./placeholder-CUueKP83.js";import"./preview-multi-file-IiDRFFAI.js";import"./upload-avatar-DX55zYUp.js";import"./rhf-date-picker-CcRSy6lj.js";import"./DatePicker-x3rEWLr9.js";import"./ListItem-ByRhTH_M.js";import"./MobileDateTimePicker-DRzd3izO.js";import"./schema-helper-CLblsXWr.js";import"./CardHeader-bsWkR9QZ.js";import"./index-DCopXJUS.js";import"./index-CYenwyVg.js";import"./ListItemIcon-B2Wt7Pq2.js";import"./EventManager-Cp9YrV-m.js";import"./ClickAwayListener-Be-wU_Ih.js";import"./TablePagination-Cu0e8Dmj.js";import"./LastPage-CNSkhtZT.js";import"./TableCell--CDe426o.js";import"./Skeleton-M-yixhCy.js";function ve({filters:t,options:i}){const n=K(),l=N({stock:t.state.stock,publish:t.state.publish}),c=a.useCallback(o=>{const{target:{value:d}}=o;l.setState({stock:typeof d=="string"?d.split(","):d})},[l]),r=a.useCallback(o=>{const{target:{value:d}}=o;l.setState({publish:typeof d=="string"?d.split(","):d})},[l]),h=a.useCallback(()=>{t.setState({stock:l.state.stock})},[t,l.state.stock]),u=a.useCallback(()=>{t.setState({publish:l.state.publish})},[t,l.state.publish]);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(R,{htmlFor:"product-filter-stock-select-label",children:"Stock"}),e.jsx(P,{multiple:!0,value:l.state.stock,onChange:c,onClose:h,input:e.jsx(D,{label:"Stock"}),renderValue:o=>o.map(d=>d).join(", "),inputProps:{id:"product-filter-stock-select-label"},sx:{textTransform:"capitalize"},children:i.stocks.map(o=>e.jsxs(m,{value:o.value,children:[e.jsx(T,{disableRipple:!0,size:"small",checked:l.state.stock.includes(o.value)}),o.label]},o.value))})]}),e.jsxs(S,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(R,{htmlFor:"product-filter-publish-select-label",children:"Publish"}),e.jsxs(P,{multiple:!0,value:l.state.publish,onChange:r,onClose:u,input:e.jsx(D,{label:"Publish"}),renderValue:o=>o.map(d=>d).join(", "),inputProps:{id:"product-filter-publish-select-label"},sx:{textTransform:"capitalize"},children:[i.publishs.map(o=>e.jsxs(m,{value:o.value,children:[e.jsx(T,{disableRipple:!0,size:"small",checked:l.state.publish.includes(o.value)}),o.label]},o.value)),e.jsx(m,{disableGutters:!0,disableTouchRipple:!0,onClick:u,sx:{justifyContent:"center",fontWeight:o=>o.typography.button,border:o=>`solid 1px ${I(o.vars.palette.grey["500Channel"],.16)}`,bgcolor:o=>I(o.vars.palette.grey["500Channel"],.08)},children:"Apply"})]})]}),e.jsx(Y,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(J,{children:[e.jsxs(m,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(m,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(m,{onClick:()=>{n.onClose()},children:[e.jsx(p,{icon:"solar:export-bold"}),"Export"]})]})})]})}function Se({filters:t,totalResults:i,sx:n}){const l=a.useCallback(r=>{const h=t.state.stock.filter(u=>u!==r);t.setState({stock:h})},[t]),c=a.useCallback(r=>{const h=t.state.publish.filter(u=>u!==r);t.setState({publish:h})},[t]);return e.jsxs(me,{totalResults:i,onReset:t.onResetState,sx:n,children:[e.jsx(G,{label:"Stock:",isShow:!!t.state.stock.length,children:t.state.stock.map(r=>a.createElement(F,{...M,key:r,label:E(r),onDelete:()=>l(r)}))}),e.jsx(G,{label:"Publish:",isShow:!!t.state.publish.length,children:t.state.publish.map(r=>a.createElement(F,{...M,key:r,label:E(r),onDelete:()=>c(r)}))})]})}function Re({params:t}){return xe(t.row.price)}function Pe({params:t}){return e.jsx(le,{variant:"soft",color:t.row.publish==="published"&&"info"||"default",children:t.row.publish})}function Te({params:t}){return e.jsxs(b,{spacing:.5,children:[e.jsx(j,{component:"span",children:te(t.row.createdAt)}),e.jsx(j,{component:"span",sx:{typography:"caption",color:"text.secondary"},children:se(t.row.createdAt)})]})}function De({params:t}){return e.jsxs(b,{justifyContent:"center",sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(oe,{value:t.row.available*100/t.row.quantity,variant:"determinate",color:t.row.inventoryType==="out of stock"&&"error"||t.row.inventoryType==="low stock"&&"warning"||"success",sx:{mb:1,width:1,height:6,maxWidth:80}}),!!t.row.available&&t.row.available," ",t.row.inventoryType]})}function Ie({params:t,onViewRow:i}){return e.jsxs(b,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(X,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(Z,{disableTypography:!0,primary:e.jsx(ee,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:i,sx:{cursor:"pointer"},children:t.row.name}),secondary:e.jsx(j,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:t.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const V=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Fe={category:!1},Ee=["category","actions"];function Le(){const t=re(),i=ne(),{products:n,productsLoading:l}=ue(),c=N({publish:[],stock:[]}),[r,h]=a.useState([]),[u,o]=a.useState([]),[d,w]=a.useState(null),[B,z]=a.useState(Fe);a.useEffect(()=>{n.length&&h(n)},[n]);const H=c.state.publish.length>0||c.state.stock.length>0,k=Ge({inputData:r,filters:c.state}),_=a.useCallback(s=>{const C=r.filter(q=>q.id!==s);L.success("Delete success!"),h(C)},[r]),U=a.useCallback(()=>{const s=r.filter(C=>!u.includes(C.id));L.success("Delete success!"),h(s)},[u,r]),W=a.useCallback(s=>{i.push(x.dashboard.product.edit(s))},[i]),y=a.useCallback(s=>{i.push(x.dashboard.product.details(s))},[i]),$=a.useCallback(()=>e.jsx(Oe,{filters:c,canReset:H,selectedRowIds:u,setFilterButtonEl:w,filteredResults:k.length,onOpenConfirmDeleteRows:t.onTrue}),[c.state,u]),v=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:s=>e.jsx(Ie,{params:s,onViewRow:()=>y(s.row.id)})},{field:"createdAt",headerName:"Create at",width:160,renderCell:s=>e.jsx(Te,{params:s})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:A,renderCell:s=>e.jsx(De,{params:s})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:s=>e.jsx(Re,{params:s})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:V,renderCell:s=>e.jsx(Pe,{params:s})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:s=>[e.jsx(f,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:eye-bold"}),label:"View",onClick:()=>y(s.row.id)}),e.jsx(f,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>W(s.row.id)}),e.jsx(f,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{_(s.row.id)},sx:{color:"error.main"}})]}],Q=()=>v.filter(s=>!Ee.includes(s.field)).map(s=>s.field);return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(pe,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Product",href:x.dashboard.product.root},{name:"List"}],action:e.jsx(g,{component:ie,href:x.dashboard.product.new,variant:"contained",startIcon:e.jsx(p,{icon:"mingcute:add-line"}),children:"New product"}),sx:{mb:{xs:3,md:5}}}),e.jsx(be,{sx:{flexGrow:{md:1},display:{md:"flex"},height:{xs:800,md:2},flexDirection:{md:"column"}},children:e.jsx(Ce,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:k,columns:v,loading:l,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:s=>o(s),columnVisibilityModel:B,onColumnVisibilityModelChange:s=>z(s),slots:{toolbar:$,noRowsOverlay:()=>e.jsx(O,{}),noResultsOverlay:()=>e.jsx(O,{title:"No results found"})},slotProps:{panel:{anchorEl:d},toolbar:{setFilterButtonEl:w},columnsManagement:{getTogglableColumns:Q}},sx:{[`& .${fe.cell}`]:{alignItems:"center",display:"inline-flex"}}})})]}),e.jsx(he,{open:t.value,onClose:t.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",u.length," "]})," items?"]}),action:e.jsx(g,{variant:"contained",color:"error",onClick:()=>{U(),t.onFalse()},children:"Delete"})})]})}function Oe({filters:t,canReset:i,selectedRowIds:n,filteredResults:l,setFilterButtonEl:c,onOpenConfirmDeleteRows:r}){return e.jsxs(e.Fragment,{children:[e.jsxs(je,{children:[e.jsx(ve,{filters:t,options:{stocks:A,publishs:V}}),e.jsx(ge,{}),e.jsxs(b,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!n.length&&e.jsxs(g,{size:"small",color:"error",startIcon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),onClick:r,children:["Delete (",n.length,")"]}),e.jsx(we,{}),e.jsx(ke,{ref:c}),e.jsx(ye,{})]})]}),i&&e.jsx(Se,{filters:t,totalResults:l,sx:{p:2.5,pt:0}})]})}function Ge({inputData:t,filters:i}){const{stock:n,publish:l}=i;return n.length&&(t=t.filter(c=>n.includes(c.inventoryType))),l.length&&(t=t.filter(c=>l.includes(c.publish))),t}const Me={title:`Product list | Dashboard - ${de.site.name}`};function Tt(){return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:e.jsxs("title",{children:[" ",Me.title]})}),e.jsx(Le,{})]})}export{Tt as default};
