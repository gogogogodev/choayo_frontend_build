import{g as A,t as S,q as v,k as e,c6 as f,F as N,dj as F,c8 as L,S as x,aw as b,bZ as k,ag as D,o as I,v as l,d_ as q,fI as $,r as y,az as O,c3 as z,l as u,aC as B,bE as G,I as H,n as P,fJ as W}from"./index-CtazL8yi.js";import{F as t}from"./fields-DtpCY2Ze.js";import{s as j}from"./schema-helper-BI0i4TVU.js";const E=v({city:l().min(1,{message:"City is required!"}),state:l().min(1,{message:"State is required!"}),name:l().min(1,{message:"Name is required!"}),address:l().min(1,{message:"Address is required!"}),zipCode:l().min(1,{message:"Zip code is required!"}),phoneNumber:j.phoneNumber({isValidPhoneNumber:$}),country:j.objectOrNull({message:{required_error:"Country is required!"}}),primary:q(),addressType:l()});function J({open:i,onClose:a,onCreate:n}){const d={name:"",city:"",state:"",address:"",zipCode:"",country:"",primary:!0,phoneNumber:"",addressType:"Home"},c=A({mode:"all",resolver:S(E),defaultValues:d}),{handleSubmit:m,formState:{isSubmitting:h}}=c,o=m(async r=>{try{n({name:r.name,phoneNumber:r.phoneNumber,fullAddress:`${r.address}, ${r.city}, ${r.state}, ${r.country}, ${r.zipCode}`,addressType:r.addressType,primary:r.primary}),a()}catch(p){console.error(p)}});return e.jsx(f,{fullWidth:!0,maxWidth:"sm",open:i,onClose:a,children:e.jsxs(N,{methods:c,onSubmit:o,children:[e.jsx(F,{children:"New address"}),e.jsx(L,{dividers:!0,children:e.jsxs(x,{spacing:3,children:[e.jsx(t.RadioGroup,{row:!0,name:"addressType",options:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}]}),e.jsxs(b,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(t.Text,{name:"name",label:"Full name"}),e.jsx(t.Phone,{name:"phoneNumber",label:"Phone number"})]}),e.jsx(t.Text,{name:"address",label:"Address"}),e.jsxs(b,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[e.jsx(t.Text,{name:"city",label:"Town/city"}),e.jsx(t.Text,{name:"state",label:"State"}),e.jsx(t.Text,{name:"zipCode",label:"Zip/code"})]}),e.jsx(t.CountrySelect,{name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(t.Checkbox,{name:"primary",label:"Use this address as default."})]})}),e.jsxs(k,{children:[e.jsx(D,{color:"inherit",variant:"outlined",onClick:a,children:"Cancel"}),e.jsx(I,{type:"submit",variant:"contained",loading:h,children:"Deliver to this address"})]})]})})}function U({list:i,open:a,action:n,onClose:d,selected:c,onSelect:m,title:h="Address book"}){const[o,r]=y.useState(""),p=R({inputData:i,query:o}),g=!p.length&&!!o,C=y.useCallback(s=>{r(s.target.value)},[]),T=y.useCallback(s=>{m(s),r(""),d()},[d,m]),w=e.jsx(O,{sx:{p:.5,maxHeight:480},children:p.map(s=>e.jsxs(z,{onClick:()=>T(s),sx:{py:1,my:.5,px:1.5,gap:.5,width:1,borderRadius:1,display:"flex",flexDirection:"column",alignItems:"flex-start",...c(`${s.id}`)&&{bgcolor:"action.selected"}},children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(u,{variant:"subtitle2",children:s.name}),s.primary&&e.jsx(B,{color:"info",children:"Default"})]}),s.company&&e.jsx(b,{sx:{color:"primary.main",typography:"caption"},children:s.company}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:s.fullAddress}),s.phoneNumber&&e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:s.phoneNumber})]},s.id))});return e.jsxs(f,{fullWidth:!0,maxWidth:"xs",open:a,onClose:d,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:3,pr:1.5},children:[e.jsxs(u,{variant:"h6",children:[" ",h," "]}),n&&n]}),e.jsx(x,{sx:{p:2,pt:0},children:e.jsx(G,{value:o,onChange:C,placeholder:"Search...",InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(P,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),g?e.jsx(W,{query:o,sx:{px:3,pt:5,pb:10}}):w]})}function R({inputData:i,query:a}){return a?i.filter(n=>n.name.toLowerCase().indexOf(a.toLowerCase())!==-1||n.fullAddress.toLowerCase().indexOf(a.toLowerCase())!==-1||`${n.company}`.toLowerCase().indexOf(a.toLowerCase())!==-1):i}export{U as A,J as a};
