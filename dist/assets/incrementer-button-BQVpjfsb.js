import{c as Y,r as o,dU as R,g as P,t as N,q as T,dC as Z,p as Q,k as e,as as w,S as r,aw as y,dV as X,dW as K,dX as J,bC as ee,l as S,dY as se,F as _,dZ as j,v as n,d_ as L,I as v,aX as O,o as F,c6 as ae,dj as ie,c8 as te,bZ as ne,ag as le,bI as re,m as D,n as A}from"./index-DL1FC2Xw.js";import{F as a}from"./fields-CF4iu1MC.js";import{s as q}from"./schema-helper-CLblsXWr.js";import{C as k}from"./Card-x9v4l8Wx.js";import{C as I}from"./CardHeader-bsWkR9QZ.js";import{F as E}from"./FormControlLabel-RF8C1zCS.js";const oe=T({name:n().min(1,{message:"Name is required!"}),description:q.editor({message:{required_error:"Description is required!"}}),images:q.files({message:{required_error:"Images is required!"}}),code:n().min(1,{message:"Product code is required!"}),sku:n().min(1,{message:"Product sku is required!"}),quantity:j().min(1,{message:"Quantity is required!"}),colors:n().array().nonempty({message:"Choose at least one option!"}),sizes:n().array().nonempty({message:"Choose at least one option!"}),tags:n().array().min(2,{message:"Must have at least 2 items!"}),gender:n().array().nonempty({message:"Choose at least one option!"}),price:j().min(1,{message:"Price should not be $0.00"}),category:n(),priceSale:j(),subDescription:n(),taxes:j(),saleLabel:T({enabled:L(),content:n()}),newLabel:T({enabled:L(),content:n()})});function he({currentProduct:s}){const u=Y(),[c,x]=o.useState(!1),d=o.useMemo(()=>({name:s?.name||"",description:s?.description||"",subDescription:s?.subDescription||"",images:s?.images||[],code:s?.code||"",sku:s?.sku||"",price:s?.price||0,quantity:s?.quantity||0,priceSale:s?.priceSale||0,tags:s?.tags||[],taxes:s?.taxes||0,gender:s?.gender||[],category:s?.category||R[0].classify[1],colors:s?.colors||[],sizes:s?.sizes||[],newLabel:s?.newLabel||{enabled:!1,content:""},saleLabel:s?.saleLabel||{enabled:!1,content:""}}),[s]),p=P({resolver:N(oe),defaultValues:d}),{reset:m,watch:b,setValue:l,handleSubmit:C,formState:{isSubmitting:h}}=p,g=b();o.useEffect(()=>{s&&m(d)},[s,d,m]),o.useEffect(()=>{c?l("taxes",0):l("taxes",s?.taxes||0)},[s?.taxes,c,l]);const U=C(async i=>{try{await new Promise(t=>setTimeout(t,500)),m(),Z.success(s?"Update success!":"Create success!"),u.push(Q.dashboard.product.root),console.info("DATA",i)}catch(t){console.error(t)}}),z=o.useCallback(i=>{const t=g.images&&g.images?.filter(f=>f!==i);l("images",t)},[l,g.images]),G=o.useCallback(()=>{l("images",[],{shouldValidate:!0})},[l]),M=o.useCallback(i=>{x(i.target.checked)},[]),B=e.jsxs(k,{children:[e.jsx(I,{title:"Details",subheader:"Title, short description, image...",sx:{mb:3}}),e.jsx(w,{}),e.jsxs(r,{spacing:3,sx:{p:3},children:[e.jsx(a.Text,{name:"name",label:"Product name"}),e.jsx(a.Text,{name:"subDescription",label:"Sub description",multiline:!0,rows:4}),e.jsxs(r,{spacing:1.5,children:[e.jsx(S,{variant:"subtitle2",children:"Content"}),e.jsx(a.Editor,{name:"description",sx:{maxHeight:480}})]}),e.jsxs(r,{spacing:1.5,children:[e.jsx(S,{variant:"subtitle2",children:"Images"}),e.jsx(a.Upload,{multiple:!0,thumbnail:!0,name:"images",maxSize:3145728,onRemove:z,onRemoveAll:G,onUpload:()=>console.info("ON UPLOAD")})]})]})]}),V=e.jsxs(k,{children:[e.jsx(I,{title:"Properties",subheader:"Additional functions and attributes...",sx:{mb:3}}),e.jsx(w,{}),e.jsxs(r,{spacing:3,sx:{p:3},children:[e.jsxs(y,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(a.Text,{name:"code",label:"Product code"}),e.jsx(a.Text,{name:"sku",label:"Product SKU"}),e.jsx(a.Text,{name:"quantity",label:"Quantity",placeholder:"0",type:"number",InputLabelProps:{shrink:!0}}),e.jsx(a.Select,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:R.map(i=>e.jsx("optgroup",{label:i.group,children:i.classify.map(t=>e.jsx("option",{value:t,children:t},t))},i.group))}),e.jsx(a.MultiSelect,{checkbox:!0,name:"colors",label:"Colors",options:X}),e.jsx(a.MultiSelect,{checkbox:!0,name:"sizes",label:"Sizes",options:K})]}),e.jsx(a.Autocomplete,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:J.map(i=>i),getOptionLabel:i=>i,renderOption:(i,t)=>o.createElement("li",{...i,key:t},t),renderTags:(i,t)=>i.map((f,H)=>o.createElement(ee,{...t({index:H}),key:f,label:f,size:"small",color:"info",variant:"soft"}))}),e.jsxs(r,{spacing:1,children:[e.jsx(S,{variant:"subtitle2",children:"Gender"}),e.jsx(a.MultiCheckbox,{row:!0,name:"gender",options:se,sx:{gap:2}})]}),e.jsx(w,{sx:{borderStyle:"dashed"}}),e.jsxs(r,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(a.Switch,{name:"saleLabel.enabled",label:null,sx:{m:0}}),e.jsx(a.Text,{name:"saleLabel.content",label:"Sale label",fullWidth:!0,disabled:!g.saleLabel.enabled})]}),e.jsxs(r,{direction:"row",alignItems:"center",spacing:3,children:[e.jsx(a.Switch,{name:"newLabel.enabled",label:null,sx:{m:0}}),e.jsx(a.Text,{name:"newLabel.content",label:"New label",fullWidth:!0,disabled:!g.newLabel.enabled})]})]})]}),W=e.jsxs(k,{children:[e.jsx(I,{title:"Pricing",subheader:"Price related inputs",sx:{mb:3}}),e.jsx(w,{}),e.jsxs(r,{spacing:3,sx:{p:3},children:[e.jsx(a.Text,{name:"price",label:"Regular price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(y,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(a.Text,{name:"priceSale",label:"Sale price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(y,{component:"span",sx:{color:"text.disabled"},children:"$"})})}}),e.jsx(E,{control:e.jsx(O,{id:"toggle-taxes",checked:c,onChange:M}),label:"Price includes taxes"}),!c&&e.jsx(a.Text,{name:"taxes",label:"Tax (%)",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(v,{position:"start",children:e.jsx(y,{component:"span",sx:{color:"text.disabled"},children:"%"})})}})]})]}),$=e.jsxs(r,{spacing:3,direction:"row",alignItems:"center",flexWrap:"wrap",children:[e.jsx(E,{control:e.jsx(O,{defaultChecked:!0,inputProps:{id:"publish-switch"}}),label:"Publish",sx:{pl:3,flexGrow:1}}),e.jsx(F,{type:"submit",variant:"contained",size:"large",loading:h,children:s?"Save changes":"Create product"})]});return e.jsx(_,{methods:p,onSubmit:U,children:e.jsxs(r,{spacing:{xs:3,md:5},sx:{mx:"auto",maxWidth:{xs:720,xl:880}},children:[B,V,W,$]})})}const de=T({rating:j().min(1,"Rating must be greater than or equal to 1!"),name:n().min(1,{message:"Name is required!"}),review:n().min(1,{message:"Review is required!"}),email:n().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ge({onClose:s,...u}){const c={rating:0,review:"",name:"",email:""},x=P({mode:"all",resolver:N(de),defaultValues:c}),{reset:d,handleSubmit:p,formState:{isSubmitting:m}}=x,b=p(async C=>{try{await new Promise(h=>setTimeout(h,500)),d(),s(),console.info("DATA",C)}catch(h){console.error(h)}}),l=o.useCallback(()=>{s(),d()},[s,d]);return e.jsx(ae,{onClose:s,...u,children:e.jsxs(_,{methods:x,onSubmit:b,children:[e.jsx(ie,{children:" Add Review "}),e.jsxs(te,{children:[e.jsxs("div",{children:[e.jsx(S,{variant:"body2",sx:{mb:1},children:"Your review about this product:"}),e.jsx(a.Rating,{name:"rating"})]}),e.jsx(a.Text,{name:"review",label:"Review *",multiline:!0,rows:3,sx:{mt:3}}),e.jsx(a.Text,{name:"name",label:"Name *",sx:{mt:3}}),e.jsx(a.Text,{name:"email",label:"Email *",sx:{mt:3}})]}),e.jsxs(ne,{children:[e.jsx(le,{color:"inherit",variant:"outlined",onClick:l,children:"Cancel"}),e.jsx(F,{type:"submit",variant:"contained",loading:m,children:"Post"})]})]})})}const je=o.forwardRef(({quantity:s,onIncrease:u,onDecrease:c,disabledIncrease:x,disabledDecrease:d,sx:p,...m},b)=>e.jsxs(r,{ref:b,flexShrink:0,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:.5,width:88,borderRadius:1,typography:"subtitle2",border:l=>`solid 1px ${re(l.vars.palette.grey["500Channel"],.2)}`,...p},...m,children:[e.jsx(D,{size:"small",onClick:c,disabled:d,sx:{borderRadius:.75},children:e.jsx(A,{icon:"eva:minus-fill",width:16})}),s,e.jsx(D,{size:"small",onClick:u,disabled:x,sx:{borderRadius:.75},children:e.jsx(A,{icon:"mingcute:add-line",width:16})})]}));export{je as I,ge as P,he as a};
