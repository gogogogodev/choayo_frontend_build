import{r as h,cP as w,k as e,ag as k,aw as p,n as c,cQ as L,cd as T,cc as y,c as E,bB as A,f$ as W,g0 as V,aL as O,L as B,l as F,bE as H,I as N,g1 as U,fJ as G,u as M,S as I,aC as R,aI as Q,dL as P,p as x,R as z,m as $,bK as K,f6 as _,aE as J,ca as q,c9 as D,cR as S,H as X,C as Y}from"./index-DL1FC2Xw.js";import{P as Z,a as ee}from"./post-skeleton-DGYW-BLY.js";import{u as se,a as te}from"./blog-BVUlPylH.js";import{C as oe}from"./custom-breadcrumbs-nJImJlyu.js";import{c as v}from"./format-number-CnUv9gu0.js";import{C as ne}from"./Card-x9v4l8Wx.js";import{P as re,p as ie}from"./Pagination-BhlVSDxW.js";import"./post-comment-form-CRt2unnc.js";import"./html-to-markdown-C60JWNql.js";import"./Skeleton-M-yixhCy.js";import"./index-DCopXJUS.js";import"./index-CYenwyVg.js";import"./LastPage-CNSkhtZT.js";import"./fields-CF4iu1MC.js";import"./Rating-B4A3Yvck.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-CeFV86ab.js";import"./rhf-radio-group-c3xmrwMe.js";import"./RadioGroup-DjJiUtpj.js";import"./FormGroup-dr7_GDnD.js";import"./FormControlLabel-RF8C1zCS.js";import"./country-select-C_VDc9o1.js";import"./rhf-switch-D1cE4SqJ.js";import"./rhf-checkbox-DHrzNFCH.js";import"./rhf-upload-CDPkY_M8.js";import"./upload-zFEN7YNi.js";import"./index-Buzb-ijE.js";import"./placeholder-CUueKP83.js";import"./preview-multi-file-IiDRFFAI.js";import"./upload-avatar-DX55zYUp.js";import"./rhf-date-picker-CcRSy6lj.js";import"./DatePicker-x3rEWLr9.js";import"./ListItem-ByRhTH_M.js";import"./MobileDateTimePicker-DRzd3izO.js";import"./schema-helper-CLblsXWr.js";import"./markdown-CHRWPvcH.js";import"./empty-content-Cjr2GcXL.js";import"./Zoom-_X9IkYnu.js";import"./Fab-BOYn_fVU.js";import"./CardHeader-bsWkR9QZ.js";function ae(s,l=500){const[o,n]=h.useState(s),t=h.useCallback(()=>{const m=setTimeout(()=>{n(s)},l);return()=>{clearTimeout(m)}},[s,l]);return h.useEffect(()=>{t()},[t]),h.useMemo(()=>o,[o])}function le({sort:s,sortOptions:l,onSort:o}){const n=w();return e.jsxs(e.Fragment,{children:[e.jsxs(k,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(c,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort by:",e.jsx(p,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(L,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsx(T,{children:l.map(t=>e.jsx(y,{selected:s===t.value,onClick:()=>{n.onClose(),o(t.value)},children:t.label},t.value))})})]})}function ce({query:s,results:l,onSearch:o,hrefItem:n,loading:t}){const d=E(),m=i=>{d.push(n(i))},f=i=>{s&&i.key==="Enter"&&m(s)};return e.jsx(A,{sx:{width:{xs:1,sm:260}},loading:t,autoHighlight:!0,popupIcon:null,options:l,onInputChange:(i,r)=>o(r),getOptionLabel:i=>i.title,noOptionsText:e.jsx(G,{query:s}),isOptionEqualToValue:(i,r)=>i.id===r.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${U.option}`]:{pl:.75}}}},renderInput:i=>e.jsx(H,{...i,placeholder:"Search...",onKeyUp:f,InputProps:{...i.InputProps,startAdornment:e.jsx(N,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[t?e.jsx(c,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,i.InputProps.endAdornment]})}}),renderOption:(i,r,{inputValue:u})=>{const j=W(r.title,u),g=V(r.title,j);return h.createElement("li",{...i,key:r.id},e.jsx(O,{alt:r.title,src:r.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},r.id),e.jsx(B,{underline:"none",onClick:()=>m(r.title),children:g.map((b,a)=>e.jsx(F,{component:"span",color:b.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:b.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:b.text},a))},u))}})}function de({post:s}){const l=M(),o=w(),n=E(),{title:t,author:d,publish:m,coverUrl:f,createdAt:i,totalViews:r,totalShares:u,totalComments:j,description:g}=s;return e.jsxs(e.Fragment,{children:[e.jsxs(ne,{sx:{display:"flex"},children:[e.jsxs(I,{spacing:1,sx:{p:l.spacing(3,3,2,3)},children:[e.jsxs(p,{display:"flex",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(R,{variant:"soft",color:m==="published"&&"info"||"default",children:m}),e.jsx(p,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:Q(i)})]}),e.jsxs(I,{spacing:1,flexGrow:1,children:[e.jsx(B,{component:z,href:x.dashboard.post.details(t),color:"inherit",variant:"subtitle2",sx:{...P({line:2})},children:t}),e.jsx(F,{variant:"body2",sx:{...P({line:2}),color:"text.secondary"},children:g})]}),e.jsxs(p,{display:"flex",alignItems:"center",children:[e.jsx($,{color:o.open?"inherit":"default",onClick:o.onOpen,children:e.jsx(c,{icon:"eva:more-horizontal-fill"})}),e.jsxs(p,{gap:1.5,flexGrow:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[e.jsxs(p,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"eva:message-circle-fill",width:16}),v(j)]}),e.jsxs(p,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"solar:eye-bold",width:16}),v(r)]}),e.jsxs(p,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(c,{icon:"solar:share-bold",width:16}),v(u)]})]})]})]}),e.jsxs(p,{sx:{p:1,width:180,height:240,flexShrink:0,position:"relative",display:{xs:"none",sm:"block"}},children:[e.jsx(O,{alt:d.name,src:d.avatarUrl,sx:{top:16,right:16,zIndex:9,position:"absolute"}}),e.jsx(K,{alt:t,src:f,sx:{height:1,borderRadius:1.5}})]})]}),e.jsx(L,{open:o.open,anchorEl:o.anchorEl,onClose:o.onClose,slotProps:{arrow:{placement:"bottom-center"}},children:e.jsxs(T,{children:[e.jsxs(y,{onClick:()=>{o.onClose(),n.push(x.dashboard.post.details(t))},children:[e.jsx(c,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(y,{onClick:()=>{o.onClose(),n.push(x.dashboard.post.edit(t))},children:[e.jsx(c,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(y,{onClick:()=>{o.onClose()},sx:{color:"error.main"},children:[e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})})]})}function pe({posts:s,loading:l}){const o=e.jsx(Z,{variant:"horizontal"}),n=s.map(t=>e.jsx(de,{post:t},t.id));return e.jsxs(e.Fragment,{children:[e.jsx(p,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:l?o:n}),s.length>8&&e.jsx(re,{count:8,sx:{mt:{xs:5,md:8},[`& .${ie.ul}`]:{justifyContent:"center"}}})]})}function he(){const[s,l]=h.useState("latest"),[o,n]=h.useState(""),t=ae(o),{posts:d,postsLoading:m}=se(),{searchResults:f,searchLoading:i}=te(t),r=_({publish:"all"}),u=me({inputData:d,filters:r.state,sortBy:s}),j=h.useCallback(a=>{l(a)},[]),g=h.useCallback(a=>{n(a)},[]),b=h.useCallback((a,C)=>{r.setState({publish:C})},[r]);return e.jsxs(J,{children:[e.jsx(oe,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Blog",href:x.dashboard.post.root},{name:"List"}],action:e.jsx(k,{component:z,href:x.dashboard.post.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"New post"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(I,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsx(ce,{query:t,results:f,onSearch:g,loading:i,hrefItem:a=>x.dashboard.post.details(a)}),e.jsx(le,{sort:s,onSort:j,sortOptions:ee})]}),e.jsx(q,{value:r.state.publish,onChange:b,sx:{mb:{xs:3,md:5}},children:["all","published","draft"].map(a=>e.jsx(D,{iconPosition:"end",value:a,label:a,icon:e.jsxs(R,{variant:(a==="all"||a===r.state.publish)&&"filled"||"soft",color:a==="published"&&"info"||"default",children:[a==="all"&&d.length,a==="published"&&d.filter(C=>C.publish==="published").length,a==="draft"&&d.filter(C=>C.publish==="draft").length]}),sx:{textTransform:"capitalize"}},a))}),e.jsx(pe,{posts:u,loading:m})]})}const me=({inputData:s,filters:l,sortBy:o})=>{const{publish:n}=l;return o==="latest"&&(s=S(s,["createdAt"],["desc"])),o==="oldest"&&(s=S(s,["createdAt"],["asc"])),o==="popular"&&(s=S(s,["totalViews"],["desc"])),n!=="all"&&(s=s.filter(t=>t.publish===n)),s},xe={title:`Post list | Dashboard - ${Y.site.name}`};function ss(){return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsxs("title",{children:[" ",xe.title]})}),e.jsx(he,{})]})}export{ss as default};
