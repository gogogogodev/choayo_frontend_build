import{ah as O,ai as J,aj as K,ak as Q,al as X,am as Y,an as Z,ao as _,ap as T,aq as ee,ar as se,c as W,d as re,r as U,f as G,g as A,k as e,S as t,L as y,p as b,R as v,I as V,m as d,n as L,o as R,A as $,F as C,t as q,l as g,as as B,at as j,q as N,v as m}from"./index-DL1FC2Xw.js";import{F as u}from"./fields-CF4iu1MC.js";import{P as ae}from"./new-password-icon-Ba5IOtjU.js";const x={},ne={},te=async({email:r,password:o})=>{try{if(await Z(x,r,o),!x.currentUser?.emailVerified)throw new Error("Email not verified!")}catch(n){throw console.error("Error during sign in with password:",n),n}},H=async()=>{const r=new _;await T(x,r)},M=async()=>{const r=new ee;await T(x,r)},z=async()=>{const r=new se;await T(x,r)},ie=async({email:r,password:o,firstName:n,lastName:c})=>{try{const a=await J(x,r,o);await K(a.user);const l=Q(X(ne,"users"),a.user?.uid);await Y(l,{uid:a.user?.uid,email:r,displayName:`${n} ${c}`})}catch(a){throw console.error("Error during sign up:",a),a}},oe=async({email:r})=>{await O(x,r)},ce=N({email:m().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:m().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ge(){const r=W(),{checkUserSession:o}=re(),[n,c]=U.useState(""),a=G(),l={email:"",password:""},p=A({resolver:q(ce),defaultValues:l}),{handleSubmit:f,formState:{isSubmitting:w}}=p,h=f(async s=>{try{await te({email:s.email,password:s.password}),await o?.(),r.refresh()}catch(i){console.error(i),c(i instanceof Error?i.message:i)}}),S=async()=>{try{await H()}catch(s){console.error(s)}},I=async()=>{try{await M()}catch(s){console.error(s)}},P=async()=>{try{await z()}catch(s){console.error(s)}},E=e.jsxs(t,{spacing:1.5,sx:{mb:5},children:[e.jsx(g,{variant:"h5",children:"Sign in to your account"}),e.jsxs(t,{direction:"row",spacing:.5,children:[e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Don't have an account?"}),e.jsx(y,{component:v,href:b.auth.firebase.signUp,variant:"subtitle2",children:"Get started"})]})]}),F=e.jsxs(t,{spacing:3,children:[e.jsx(u.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsxs(t,{spacing:1.5,children:[e.jsx(y,{component:v,href:b.auth.firebase.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(u.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:a.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(V,{position:"end",children:e.jsx(d,{onClick:a.onToggle,edge:"end",children:e.jsx(L,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(R,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:w,loadingIndicator:"Sign in...",children:"Sign in"})]}),k=e.jsxs(e.Fragment,{children:[e.jsx(B,{sx:{my:3,typography:"overline",color:"text.disabled","&::before, :after":{borderTopStyle:"dashed"}},children:"OR"}),e.jsxs(t,{direction:"row",justifyContent:"center",spacing:1,children:[e.jsx(d,{onClick:S,children:e.jsx(j,{icon:"google",width:22})}),e.jsx(d,{onClick:I,children:e.jsx(j,{icon:"github",width:22})}),e.jsx(d,{onClick:P,children:e.jsx(j,{icon:"twitter",width:22})})]})]});return e.jsxs(e.Fragment,{children:[E,!!n&&e.jsx($,{severity:"error",sx:{mb:3},children:n}),e.jsx(C,{methods:p,onSubmit:h,children:F}),k]})}const le=N({firstName:m().min(1,{message:"First name is required!"}),lastName:m().min(1,{message:"Last name is required!"}),email:m().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:m().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function xe(){const[r,o]=U.useState(""),n=W(),c=G(),a={firstName:"",lastName:"",email:"",password:""},l=A({resolver:q(le),defaultValues:a}),{handleSubmit:p,formState:{isSubmitting:f}}=l,w=p(async s=>{try{await ie({email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName});const i=new URLSearchParams({email:s.email}).toString(),D=`${b.auth.firebase.verify}?${i}`;n.push(D)}catch(i){console.error(i),o(i instanceof Error?i.message:i)}}),h=async()=>{try{await H()}catch(s){console.error(s)}},S=async()=>{try{await M()}catch(s){console.error(s)}},I=async()=>{try{await z()}catch(s){console.error(s)}},P=e.jsxs(t,{spacing:1.5,sx:{mb:5},children:[e.jsx(g,{variant:"h5",children:"Get started absolutely free"}),e.jsxs(t,{direction:"row",spacing:.5,children:[e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Already have an account?"}),e.jsx(y,{component:v,href:b.auth.firebase.signIn,variant:"subtitle2",children:"Sign in"})]})]}),E=e.jsxs(t,{spacing:3,children:[e.jsxs(t,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(u.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),e.jsx(u.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),e.jsx(u.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsx(u.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:c.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(V,{position:"end",children:e.jsx(d,{onClick:c.onToggle,edge:"end",children:e.jsx(L,{icon:c.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(R,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:f,loadingIndicator:"Create account...",children:"Create account"})]}),F=e.jsxs(g,{component:"div",sx:{mt:3,textAlign:"center",typography:"caption",color:"text.secondary"},children:["By signing up, I agree to ",e.jsx(y,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",e.jsx(y,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]}),k=e.jsxs(e.Fragment,{children:[e.jsx(B,{sx:{my:3,typography:"overline",color:"text.disabled","&::before, :after":{borderTopStyle:"dashed"}},children:"OR"}),e.jsxs(t,{direction:"row",justifyContent:"center",spacing:1,children:[e.jsx(d,{onClick:h,children:e.jsx(j,{icon:"google",width:22})}),e.jsx(d,{onClick:S,children:e.jsx(j,{icon:"github",width:22})}),e.jsx(d,{onClick:I,children:e.jsx(j,{icon:"twitter",width:22})})]})]});return e.jsxs(e.Fragment,{children:[P,!!r&&e.jsx($,{severity:"error",sx:{mb:3},children:r}),e.jsx(C,{methods:l,onSubmit:w,children:E}),F,k]})}const de=N({email:m().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function pe(){const r=W(),o={email:""},n=A({resolver:q(de),defaultValues:o}),{handleSubmit:c,formState:{isSubmitting:a}}=n,l=c(async w=>{try{await oe({email:w.email});const h=new URLSearchParams({email:w.email}).toString(),S=`${b.auth.firebase.verify}?${h}`;r.push(S)}catch(h){console.error(h)}}),p=e.jsxs(e.Fragment,{children:[e.jsx(ae,{sx:{mx:"auto"}}),e.jsxs(t,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(g,{variant:"h5",children:"Forgot your password?"}),e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Please enter the email address associated with your account and we'll email you a link to reset your password."})]})]}),f=e.jsxs(t,{spacing:3,children:[e.jsx(u.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Send request...",children:"Send request"}),e.jsxs(y,{component:v,href:b.auth.firebase.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[e.jsx(L,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return e.jsxs(e.Fragment,{children:[p,e.jsx(C,{methods:n,onSubmit:l,children:f})]})}export{ge as F,xe as a,pe as b};
