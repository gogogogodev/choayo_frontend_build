import{ic as y,id as h,ie as p,dC as l,ig as c,a as n,e as s,aA as m,ih as w,ii as g,ij as v}from"./index-DL1FC2Xw.js";import{C as u}from"./errors-wZ747Yys.js";const C=async()=>{try{return(await n.get(`${s.transaction.order.status_list}`)).data}catch{throw new Error("unexpected error occurred")}},E=async({start_date:r,end_date:e,store_id:o,keyword:t,page:i,status:d})=>{try{let a={},_=`search=${t??""}&page=${i??1}&order_by=created_at&order_direction=desc`;return o&&(a={headers:{"X-STORE-ID":o}}),r&&e&&(_+=`&start_date=${r}&end_date=${e}`),d&&(_+=`&status=${d===p.all?"":d}`),(await n.get(`${s.transaction.order.list}?${_}`,a)).data}catch{throw new Error("unexpected error occurred")}},f=async({start_date:r,file_type:e,end_date:o,status:t})=>{try{let i="mode=url";t&&(i+=`&status=${t===p.all?"":t}`),r&&o&&(i+=`&start_at=${r}&end_at=${o}`),e&&(i+=`&type=${e}`);const d=await n.post(`${s.report.order}?${i}`);window.open(d.data,"__blank")}catch(i){throw console.error("OrderReportDownload - error : ",i),new Error("something wrong")}},P=async r=>{try{const e=`${s.transaction.order.list}/${r}`,t=(await n.get(e)).data;return b(t)}catch(e){throw console.error("OrderDetailGet - error : ",e),new Error("unexpected error occurred")}},I=async r=>{try{return(await n.post(`${s.transaction.order.create}`,r)).data}catch(e){throw console.error("OrderDetailSubmitCreate - error : ",e),new Error("something wrong")}},R=async r=>{try{await n.put(`${s.transaction.order.update}`,r)}catch(e){throw console.error("OrderDetailSubmitUpdate - error : ",e),new Error("something wrong")}},S=async r=>{try{return(await n.post(`${s.transaction.order.calculate}`,r)).data}catch(e){throw console.error("OrderDetailCalculate - error : ",e),new Error("something wrong")}},T=r=>({order_id:"new",customer_id:r.customer?.id??""}),L=r=>({order_id:r.id??"",payment_plan:r.payment_plan,customer_id:r.customer?.id??"",delivery_fee:Number(r.delivery_fee??"0"),pickup_address_id:r.pickup_address?.id??"",total_billing:Number(r.total_billing??"0"),status:r.order_status??p.draft,shipping_address_id:r.shipping_address?.id??"",pickup_type:r.type_pickup??h.walkin,shipping_type:r.type_shipping??y.in_store,point_value:r.is_redeem_coin?Number(r.available_redeem_coin??"0"):0}),b=r=>{const e=r.vouchers.map(t=>({id:t.voucher_id,code:t.voucher_code,name:t.voucher_name,qty:"",type:v.private,usage:null,status:g.active,start_at:"",end_at:""})),o=r.order_products.map(t=>({item_id:t.id,item_id_temp:t.id,product:{id:t.product_id,store_id:t.store_id,project_id:"",name:t.name,type:"",icon:"",parent_id:"",sku:"",is_active:!1,is_pressing:!1,is_drying:!1,price:t.price_item,addons:[],estimated_days:"0",category:null,categories:[]},remarks:t.order_product_detail?.remarks??[],brand:{id:t.order_product_detail?.brand_id??"-",name:t.order_product_detail?.brand_name??"-"},color:{id:t.order_product_detail?.color_id??"-",hex:t.order_product_detail?.color_code??"-",name:t.order_product_detail?.color_name??"-"},notes:t.order_product_detail?.notes??"-",quantity:String(t.qty),discount_type:t.discount_type,discount_value:t.discount_value,arr_addons_obj:t.order_product_detail?.addons.map(i=>({id:i.id,name:i.name,price:i.master_price,price_type:i.master_price_type}))??[],arr_addons_id:t.order_product_detail?.addons.map(i=>i.id)??[],status:t.status}));return{id:r.id,order_no:r.order_no,customer:r.customer,order_status:r.status,order_date:String(r.date),payment_plan:r.payment_plan,payment_status:r.payment_status,type_pickup:r.pickup_type,type_shipping:r.shipping_type,pickup_address:r.pickup_address,shipping_address:r.shipping_address,is_redeem_coin:!1,available_redeem_coin:"0",available_deposit:"0",total_billing:r.total_billing,amount_to_paid:String(r.net_payable_amount),amount_be_paid:r.amount_paid,delivery_fee:r.delivery_fee,voucher_amount:String(r.voucher_value),voucher:e,items:o}},q=r=>{const e=r.items.map(t=>({order_id:r.id??"",qty:t.quantity,product_id:t.product.id,price:t.product.price??"0",order_item_id:t.item_id??"",discount_type:t.discount_type,addons:t.arr_addons_obj.map(i=>({id:i.id,price:i.price,price_type:i.price_type,addons_name:i.name})),discount_value:t.discount_value.replace(/,/g,""),order_product_detail:{notes:t.notes,brand_id:t.brand.id,color_id:t.color.id,remark:t.remarks.map(i=>i.id??"")}})),o=r.voucher.map(t=>({voucher_id:t.id,voucher_type:m.percentage,voucher_value:"0",voucher_item_type:""}));return{order_id:r.id??"",items:e,vouchers:o,delivery_fee:r.delivery_fee??"0",point_value:r.available_redeem_coin??"0"}},x=async({customer_id:r,payment_status:e})=>{try{return(await n.get(`${s.transaction.order.history}?customer_id=${r}&payment_status=${e}`)).data}catch(o){throw console.error("ChartCustomerInfoHistoryGetList - error : ",o),new Error("unexpected error occurred")}},D=async()=>{try{return(await n.get(`${s.transaction.order.product_category_list}`)).data}catch(r){throw console.error("ChartCatalogCategoryFilterGetList - error : ",r),new Error("unexpected error occurred")}},G=async({keyword:r,category_id:e})=>{try{return(await n.get(`${s.transaction.order.product_list}?search=${r}&category_id=${e}`)).data}catch(o){throw console.error("ChartCatalogGetList - error : ",o),new Error("unexpected error occurred")}},j=async r=>{try{const e=`${s.transaction.order.multiple_address}/${r}`;return(await n.get(e)).data}catch(e){throw console.error("ChartCheckoutCustomerAddressGetList - error : ",e),new Error("unexpected error occurred")}},U=async r=>{try{r.address_id?await n.post(`${s.transaction.order.multiple_address}/${r.address_id}?_method=PUT`,r):await n.post(`${s.transaction.order.multiple_address}`,r)}catch(e){throw e.status===422?e.data&&e.data.errors?new u(e.data.errors):e:(console.error("ChartCheckoutCustomerAddressSave - error : ",e),new Error("something wrong"))}},A=r=>({address_id:r.address_id??"",person_id:r.person_id,receiver_name:r.receive_name,receiver_phone:r.receive_phone,name:r.address_name,kecamatan_id:r.wilayah.kecamatan_id,kelurahan_id:r.wilayah.kelurahan_id,kode_pos:r.address_kode_pos,text:r.address_text,description:r.address_description,latitude:"0",longitude:"0",full_name:r.wilayah.full_name}),N=[{title:"whatsapp",icon_name:"logos:whatsapp-icon",action:r=>{l.warning("share not available",{position:"top-center"})}},{title:"gmail",icon_name:"logos:google-gmail",action:r=>{l.warning("share not available",{position:"top-center"})}}],V=async r=>{try{const e=await n.get(`${s.transaction.order.print.receipt}?order_id=${r}`,{responseType:"blob"}),o=window.URL.createObjectURL(e.data);window.open(o,"__blank"),window.URL.revokeObjectURL(o)}catch(e){console.error("OrderInvoicePrintReceipt - error : ",e)}},F=async r=>{try{return(await n.post(s.transaction.order.mobile.print,{key:r.key,order_id:r.orderId})).data}catch(e){throw console.error("MobilePrint - error : ",e),new Error("something wrong")}},M=async r=>{try{r.order_product_id?await n.post(`${s.transaction.order.revoke.otp}`,r):await n.post(`${s.transaction.order.revoke.otp}`,r)}catch(e){throw e.status===422?e.data&&e.data.errors?new u(e.data.errors):e:(console.error("RevokeRequestOtp - error : ",e),new Error("Oops, an error occurred while saving data!"))}},H=r=>({type:r.order_item_id?c.product:c.order,order_product_id:r.order_item_id,otp_by:r.request_method,order_id:r.order_id,reason:"-"}),B=async r=>{try{await n.post(`${s.transaction.order.revoke.request}`,r)}catch(e){throw e.status===400?new Error("Invalid OTP"):(console.error("RevokeOrder - error : ",e),new Error("Oops, an error occurred while saving data!"))}},z=r=>({otp:"",order_id:r.order_id,order_product_id:r.order_item_id,type:r.order_item_id?c.product:c.order}),X=async r=>{try{const e=`${s.transaction.order.payment_history}?order_id=${r}`;return(await n.get(e)).data}catch(e){throw console.error("OrderInvoicePaymentHistoryGetList - error : ",e),new Error("unexpected error occurred")}},J=async r=>{try{const e=await n.get(`${s.transaction.order.print.marker}?order_product_id=${r}`,{responseType:"blob"}),o=window.URL.createObjectURL(e.data);window.open(o,"__blank"),window.URL.revokeObjectURL(o)}catch(e){throw console.error("OrderDetailItemPrintMarker - error : ",e),new Error("something wrong")}},K=async r=>{try{return(await n.post(`${s.transaction.order.item.create_update}`,{items:[r]})).data}catch(e){throw console.error("OrderDetailItemSubmit - error : ",e),new Error("something wrong")}},Q=async r=>{try{await n.delete(`${s.transaction.order.item.delete}/${r}`)}catch(e){throw console.error("OrderDetailItemDelete - error : ",e),new Error("something wrong")}},W=(r,e)=>({order_id:r,qty:e.quantity,product_id:e.product.id,price:e.product.price??"0",order_item_id:e.item_id??"",discount_type:e.discount_type,addons:e.arr_addons_obj.map(o=>({id:o.id,price:o.price,price_type:o.price_type,addons_name:o.name})),discount_value:e.discount_value.replace(/,/g,""),order_product_detail:{notes:e.notes,brand_id:e.brand.id,color_id:e.color.id,remark:e.remarks.map(o=>o.id??"")}}),Y=(r,e)=>{const o=e.remarks.length>0?e.remarks.map(t=>({id:t.id??null,code:t.code,name:t.name})):[];return{order_id:r,brand:e.brand,color:e.color,notes:e.notes,quantity:e.quantity,order_item_id:e.item_id??"",discount_type:e.discount_type,is_bulk:Number(e.quantity)>1,discount_value:e.discount_value,arr_addons_id:e.arr_addons_id??[],arr_addons_obj:e.arr_addons_obj??[],remarks:o}},Z=(r,e)=>{const o=e.remarks?.map(a=>({id:a.id??"",code:a.code,name:a.name}))??[],t={id:e.brand.id??"",name:e.brand.name??""},i={id:e.color.id??"",hex:e.color.hex??"",name:e.color.name??""},d=e.arr_addons_obj?.map(a=>({id:a.id,name:a.name,price:a.price??"0",price_type:a.price_type??m.absolute}))??[];return{brand:t,color:i,remarks:o,product:r,arr_addons_obj:d,notes:e.notes??"",discount_type:e.discount_type,discount_value:e.discount_value,arr_addons_id:e.arr_addons_id??[],quantity:e.is_bulk?e.quantity:"1",item_id:e.order_item_id!==""?e.order_item_id:"new",item_id_temp:e.order_item_id!==""?e.order_item_id:"new",status:w.normal}},rr=async(r,e,o)=>{try{await n.post(`${s.transaction.order.voucher_apply}`,{customer_id:r,order_id:e,vouchers:o.map(t=>({customer_id:r,order_id:e,voucher_id:t}))})}catch(t){throw console.error("VoucherApply - error : ",t),new Error("something wrong")}},er=async r=>{try{return(await n.get(`${s.transaction.deposit.history_list}/${r}?depositRequest=orderDeposit`)).data}catch(e){throw console.error("OrderPaymentDepositGet - error : ",e),new Error("unexpected error occurred")}},tr=async r=>{try{return(await n.get(`${s.transaction.point.history_list}/${r}?pointRequest=orderPoint`)).data}catch(e){throw console.error("OrderPaymentPointGet - error : ",e),new Error("unexpected error occurred")}},or=async r=>{try{return(await n.post(`${s.transaction.order.payment}`,r)).data}catch(e){throw e.status===422?e.data&&e.data.errors?new u(e.data.errors):e:(console.error("OrderPaymentCreate - error : ",e),new Error("Oops, an error occurred while saving data!"))}},nr=r=>({order_id:r.order_id,use_point:r.use_point,use_deposit:r.use_deposit,payment_type:r.payment_plan,store_payment_method_id:r.payment_method.id!==""?r.payment_method.id:null,payment_amount:Number(r.amount_paid.replace(/,/g,"")),deposit_amount:Number(r.deposit?.replace(/,/g,"")??""),payment_amount_change:Number(r.amount_change.replace(/,/g,"")),payment_amount_receive:Number(r.amount_receive.replace(/,/g,""))});export{L as A,R as B,D as C,T as D,I as E,F as M,E as O,H as R,rr as V,f as a,C as b,G as c,Q as d,J as e,tr as f,nr as g,or as h,er as i,j,A as k,U as l,x as m,Y as n,Z as o,W as p,K as q,N as r,V as s,M as t,z as u,B as v,X as w,P as x,q as y,S as z};
