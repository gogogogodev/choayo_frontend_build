import{p,c as I,d as C,r as A,f as N,g as F,k as e,S as d,L as b,R as S,I as P,m as v,n as f,o as T,A as U,F as k,t as E,l as u,q as L,v as c}from"./index-CtazL8yi.js";import{F as m}from"./fields-DtpCY2Ze.js";import{P as R,N as V}from"./new-password-icon-BLsuMVet.js";const q={},M=async({email:a,password:n})=>{const{data:s,error:r}=await q.auth.signInWithPassword({email:a,password:n});if(r)throw console.error(r),r;return{data:s,error:r}},W=async({email:a,password:n,firstName:s,lastName:r})=>{const{data:o,error:t}=await q.auth.signUp({email:a,password:n,options:{emailRedirectTo:`${window.location.origin}${p.dashboard.root}`,data:{display_name:`${s} ${r}`}}});if(t)throw console.error(t),t;if(!o?.user?.identities?.length)throw new Error("This user already exists");return{data:o,error:t}},$=async({email:a})=>{const{data:n,error:s}=await q.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}${p.auth.supabase.updatePassword}`});if(s)throw console.error(s),s;return{data:n,error:s}},z=async({password:a})=>{const{data:n,error:s}=await q.auth.updateUser({password:a});if(s)throw console.error(s),s;return{data:n,error:s}},B=L({email:c().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:c().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function O(){const a=I(),{checkUserSession:n}=C(),[s,r]=A.useState(""),o=N(),t={email:"",password:""},h=F({resolver:E(B),defaultValues:t}),{handleSubmit:x,formState:{isSubmitting:g}}=h,w=x(async i=>{try{await M({email:i.email,password:i.password}),await n?.(),a.refresh()}catch(l){console.error(l),r(l instanceof Error?l.message:l)}}),j=e.jsxs(d,{spacing:1.5,sx:{mb:5},children:[e.jsx(u,{variant:"h5",children:"Sign in to your account"}),e.jsxs(d,{direction:"row",spacing:.5,children:[e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Don't have an account?"}),e.jsx(b,{component:S,href:p.auth.supabase.signUp,variant:"subtitle2",children:"Get started"})]})]}),y=e.jsxs(d,{spacing:3,children:[e.jsx(m.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsxs(d,{spacing:1.5,children:[e.jsx(b,{component:S,href:p.auth.supabase.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(v,{onClick:o.onToggle,edge:"end",children:e.jsx(f,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(T,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:g,loadingIndicator:"Sign in...",children:"Sign in"})]});return e.jsxs(e.Fragment,{children:[j,!!s&&e.jsx(U,{severity:"error",sx:{mb:3},children:s}),e.jsx(k,{methods:h,onSubmit:w,children:y})]})}const H=L({firstName:c().min(1,{message:"First name is required!"}),lastName:c().min(1,{message:"Last name is required!"}),email:c().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:c().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function Q(){const[a,n]=A.useState(""),s=I(),r=N(),o={firstName:"",lastName:"",email:"",password:""},t=F({resolver:E(H),defaultValues:o}),{handleSubmit:h,formState:{isSubmitting:x}}=t,g=h(async i=>{try{await W({email:i.email,password:i.password,firstName:i.firstName,lastName:i.lastName}),s.push(p.auth.supabase.verify)}catch(l){console.error(l),n(l instanceof Error?l.message:l)}}),w=e.jsxs(d,{spacing:1.5,sx:{mb:5},children:[e.jsx(u,{variant:"h5",children:"Get started absolutely free"}),e.jsxs(d,{direction:"row",spacing:.5,children:[e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Already have an account?"}),e.jsx(b,{component:S,href:p.auth.supabase.signIn,variant:"subtitle2",children:"Sign in"})]})]}),j=e.jsxs(d,{spacing:3,children:[e.jsxs(d,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsx(m.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),e.jsx(m.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),e.jsx(m.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(v,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(T,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:x,loadingIndicator:"Create account...",children:"Create account"})]}),y=e.jsxs(u,{component:"div",sx:{mt:3,textAlign:"center",typography:"caption",color:"text.secondary"},children:["By signing up, I agree to ",e.jsx(b,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",e.jsx(b,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]});return e.jsxs(e.Fragment,{children:[w,!!a&&e.jsx(U,{severity:"error",sx:{mb:3},children:a}),e.jsx(k,{methods:t,onSubmit:g,children:j}),y]})}const G=L({email:c().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function X(){const a=I(),n={email:""},s=F({resolver:E(G),defaultValues:n}),{handleSubmit:r,formState:{isSubmitting:o}}=s,t=r(async g=>{try{await $({email:g.email}),a.push(p.auth.supabase.verify)}catch(w){console.error(w)}}),h=e.jsxs(e.Fragment,{children:[e.jsx(R,{sx:{mx:"auto"}}),e.jsxs(d,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(u,{variant:"h5",children:"Forgot your password?"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Please enter the email address associated with your account and we'll email you a link to reset your password."})]})]}),x=e.jsxs(d,{spacing:3,children:[e.jsx(m.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:o,loadingIndicator:"Send request...",children:"Send request"}),e.jsxs(b,{component:S,href:p.auth.supabase.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[e.jsx(f,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return e.jsxs(e.Fragment,{children:[h,e.jsx(k,{methods:s,onSubmit:t,children:x})]})}const D=L({password:c().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:c().min(1,{message:"Confirm password is required!"})}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function Y(){const a=I(),[n,s]=A.useState(""),r=N(),o={password:"",confirmPassword:""},t=F({resolver:E(D),defaultValues:o}),{handleSubmit:h,formState:{isSubmitting:x}}=t,g=h(async y=>{try{await z({password:y.password}),a.push(p.dashboard.root)}catch(i){console.error(i),s(i instanceof Error?i.message:i)}}),w=e.jsxs(e.Fragment,{children:[e.jsx(V,{sx:{mx:"auto"}}),e.jsxs(d,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[e.jsx(u,{variant:"h5",children:"Update password"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Successful updates enable access using the new password."})]})]}),j=e.jsxs(d,{spacing:3,children:[e.jsx(m.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(v,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(m.Text,{name:"confirmPassword",label:"Confirm password",type:r.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(P,{position:"end",children:e.jsx(v,{onClick:r.onToggle,edge:"end",children:e.jsx(f,{icon:r.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(T,{fullWidth:!0,type:"submit",size:"large",variant:"contained",loading:x,loadingIndicator:"Update password...",children:"Update password"})]});return e.jsxs(e.Fragment,{children:[w,!!n&&e.jsx(U,{severity:"error",sx:{mb:3},children:n}),e.jsx(k,{methods:t,onSubmit:g,children:j})]})}export{O as S,Q as a,Y as b,X as c};
